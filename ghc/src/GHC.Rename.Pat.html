<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE TypeApplications           #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor              #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts           #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes                 #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables        #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies               #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns               #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE DisambiguateRecordFields   #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns             #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE MultiWayIf                 #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies         #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-comment">{-
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

Renaming of patterns

Basically dependency analysis.

Handles @Match@, @GRHSs@, @HsExpr@, and @Qualifier@ datatypes.  In
general, all of these functions return a renamed thing, and a set of
free variables.
-}</span><span>
</span><span id="line-25"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html"><span class="hs-identifier">GHC.Rename.Pat</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-comment">-- main entry points</span><span>
</span><span id="line-26"></span><span>              </span><span class="annot"><a href="GHC.Rename.Pat.html#rnPat"><span class="hs-identifier">rnPat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnPats"><span class="hs-identifier">rnPats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnBindPat"><span class="hs-identifier">rnBindPat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>              </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier">NameMaker</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#applyNameMaker"><span class="hs-identifier">applyNameMaker</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- a utility for making names:</span><span>
</span><span id="line-29"></span><span>              </span><span class="annot"><a href="GHC.Rename.Pat.html#localRecNameMaker"><span class="hs-identifier">localRecNameMaker</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#topRecNameMaker"><span class="hs-identifier">topRecNameMaker</span></a></span><span class="hs-special">,</span><span>  </span><span class="hs-comment">--   sometimes we want to make local names,</span><span>
</span><span id="line-30"></span><span>                                             </span><span class="hs-comment">--   sometimes we want to make top (qualified) names.</span><span>
</span><span id="line-31"></span><span>              </span><span class="annot"><a href="GHC.Rename.Pat.html#isTopRecNameMaker"><span class="hs-identifier">isTopRecNameMaker</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>              </span><span class="annot"><a href="GHC.Rename.Pat.html#rnHsRecFields"><span class="hs-identifier">rnHsRecFields</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldContext"><span class="hs-identifier">HsRecFieldContext</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>              </span><span class="annot"><a href="GHC.Rename.Pat.html#rnHsRecUpdFields"><span class="hs-identifier">rnHsRecUpdFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span>              </span><span class="hs-comment">-- CpsRn monad</span><span>
</span><span id="line-37"></span><span>              </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier">CpsRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier">liftCps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCpsWithCont"><span class="hs-identifier">liftCpsWithCont</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span>              </span><span class="hs-comment">-- Literals</span><span>
</span><span id="line-40"></span><span>              </span><span class="annot"><a href="GHC.Rename.Pat.html#rnLit"><span class="hs-identifier">rnLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnOverLit"><span class="hs-identifier">rnOverLit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>             </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">-- ENH: thin imports to only what is necessary for patterns</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html"><span class="hs-identifier">GHC.Rename.Expr</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier">rnLExpr</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html"><span class="hs-identifier">GHC.Rename.Splice</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html#rnSplicePat"><span class="hs-identifier">rnSplicePat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html#rnSpliceTyPat"><span class="hs-identifier">rnSpliceTyPat</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html"><span class="hs-identifier">GHC.Tc.Errors.Types</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcMType.html"><span class="hs-identifier">GHC.Tc.Utils.TcMType</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcMType.html#hsOverLitName"><span class="hs-identifier">hsOverLitName</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html"><span class="hs-identifier">GHC.Rename.Env</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html"><span class="hs-identifier">GHC.Rename.Fixity</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html"><span class="hs-identifier">GHC.Rename.Utils</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier">newLocalBndrRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier">bindLocalNames</span></a></span><span>
</span><span id="line-57"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedMatches"><span class="hs-identifier">warnUnusedMatches</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier">newLocalBndrRn</span></a></span><span>
</span><span id="line-58"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier">checkUnusedRecordWildcard</span></a></span><span>
</span><span id="line-59"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupNames"><span class="hs-identifier">checkDupNames</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupAndShadowedNames"><span class="hs-identifier">checkDupAndShadowedNames</span></a></span><span>
</span><span id="line-60"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier">wrapGenSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsApps"><span class="hs-identifier">genHsApps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genLHsVar"><span class="hs-identifier">genLHsVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsIntegralLit"><span class="hs-identifier">genHsIntegralLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#delLocalNames"><span class="hs-identifier">delLocalNames</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#typeAppErr"><span class="hs-identifier">typeAppErr</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html"><span class="hs-identifier">GHC.Rename.HsType</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html"><span class="hs-identifier">GHC.Types.SourceText</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#uniqCompareFS"><span class="hs-identifier">uniqCompareFS</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html"><span class="hs-identifier">GHC.Data.List.SetOps</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier">removeDups</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.Plain.html"><span class="hs-identifier">GHC.Utils.Panic.Plain</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html"><span class="hs-identifier">GHC.Types.Literal</span></a></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html#inCharRange"><span class="hs-identifier">inCharRange</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html"><span class="hs-identifier">GHC.Types.GREInfo</span></a></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#ConInfo"><span class="hs-identifier">ConInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#conInfoFields"><span class="hs-identifier">conInfoFields</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html#nilDataCon"><span class="hs-identifier">nilDataCon</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#isKindName"><span class="hs-identifier">isKindName</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot-9.10.2-inplace/src/GHC.LanguageExtensions.html"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.20.1.0-inplace/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">when</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ap</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">guard</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unless</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.20.1.0-inplace/src/Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.20.1.0-inplace/src/Data.Function.html"><span class="hs-identifier">Data.Function</span></a></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">on</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.20.1.0-inplace/src/Data.Functor.Identity.html"><span class="hs-identifier">Data.Functor.Identity</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Identity</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.20.1.0-inplace/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.20.1.0-inplace/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.20.1.0-inplace/src/Data.Ratio.html"><span class="hs-identifier">Data.Ratio</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Writer.CPS.html"><span class="hs-identifier">Control.Monad.Trans.Writer.CPS</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Class.html"><span class="hs-identifier">Control.Monad.Trans.Class</span></a></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Reader.html"><span class="hs-identifier">Control.Monad.Trans.Reader</span></a></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.20.1.0-inplace/src/Data.Functor.html"><span class="hs-identifier">Data.Functor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;&amp;&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Doc.html"><span class="hs-identifier">GHC.Rename.Doc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Doc.html#rnLHsDoc"><span class="hs-identifier">rnLHsDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html"><span class="hs-identifier">GHC.Types.Hint</span></a></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html"><span class="hs-identifier">GHC.Types.Fixity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Fixity.html#LexicalFixity"><span class="hs-identifier">LexicalFixity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.20.1.0-inplace/src/Data.Coerce.html"><span class="hs-identifier">Data.Coerce</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
        The CpsRn Monad
*                                                      *
*********************************************************

Note [CpsRn monad]
~~~~~~~~~~~~~~~~~~
The CpsRn monad uses continuation-passing style to support this
style of programming:

        do { ...
           ; ns &lt;- bindNames rs
           ; ...blah... }

   where rs::[RdrName], ns::[Name]

The idea is that '...blah...'
  a) sees the bindings of ns
  b) returns the free variables it mentions
     so that bindNames can report unused ones

In particular,
    mapM rnPatAndThen [p1, p2, p3]
has a *left-to-right* scoping: it makes the binders in
p1 scope over p2,p3.
-}</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">newtype</span><span> </span><span id="CpsRn"><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span></span><span> </span><span id="local-6989586621682852894"><span class="annot"><a href="#local-6989586621682852894"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CpsRn"><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unCpsRn"><span class="annot"><span class="annottext">forall b.
CpsRn b -&gt; forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="GHC.Rename.Pat.html#unCpsRn"><span class="hs-identifier hs-var hs-var">unCpsRn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682852895"><span class="annot"><a href="#local-6989586621682852895"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682852894"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682852895"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>                                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682852895"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-131"></span><span>        </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682853720"><span id="local-6989586621682853722"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; CpsRn a -&gt; CpsRn b)
-&gt; (forall a b. a -&gt; CpsRn b -&gt; CpsRn a) -&gt; Functor CpsRn
forall a b. a -&gt; CpsRn b -&gt; CpsRn a
forall a b. (a -&gt; b) -&gt; CpsRn a -&gt; CpsRn b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; CpsRn a -&gt; CpsRn b
fmap :: forall a b. (a -&gt; b) -&gt; CpsRn a -&gt; CpsRn b
$c&lt;$ :: forall a b. a -&gt; CpsRn b -&gt; CpsRn a
&lt;$ :: forall a b. a -&gt; CpsRn b -&gt; CpsRn a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>        </span><span class="hs-comment">-- See Note [CpsRn monad]</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682853730"><span id="local-6989586621682853733"><span id="local-6989586621682853736"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-135"></span><span>    </span><span id="local-6989586621682853739"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; CpsRn a
</span><span class="hs-identifier hs-var hs-var hs-var">pure</span></span></span><span> </span><span id="local-6989586621682853740"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682853740"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (a -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn a
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682853741"><span class="annot"><span class="annottext">a -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853741"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853741"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682853740"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>    </span><span id="local-6989586621682853743"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. CpsRn (a -&gt; b) -&gt; CpsRn a -&gt; CpsRn b
</span><span class="hs-operator hs-var hs-var hs-var">(&lt;*&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CpsRn (a -&gt; b) -&gt; CpsRn a -&gt; CpsRn b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-identifier hs-var">ap</span></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682853748"><span id="local-6989586621682853751"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span id="local-6989586621682853754"><span class="annot"><span class="annottext">forall r. (a -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853754"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682853755"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. CpsRn a -&gt; (a -&gt; CpsRn b) -&gt; CpsRn b
</span><span class="hs-operator hs-var hs-var hs-var">&gt;&gt;=</span></span></span><span> </span><span id="local-6989586621682853756"><span class="annot"><span class="annottext">a -&gt; CpsRn b
</span><a href="#local-6989586621682853756"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682853757"><span class="annot"><span class="annottext">b -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853757"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
forall r. (a -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853754"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682853758"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682853758"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CpsRn b -&gt; forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
forall b.
CpsRn b -&gt; forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="GHC.Rename.Pat.html#unCpsRn"><span class="hs-identifier hs-var">unCpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; CpsRn b
</span><a href="#local-6989586621682853756"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682853758"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853757"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span id="local-6989586621682852932"><span class="annot"><a href="GHC.Rename.Pat.html#runCps"><span class="hs-identifier hs-type">runCps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682852932"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682852932"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-142"></span><span id="runCps"><span class="annot"><span class="annottext">runCps :: forall a. CpsRn a -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Pat.html#runCps"><span class="hs-identifier hs-var hs-var">runCps</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span id="local-6989586621682853761"><span class="annot"><span class="annottext">forall r. (a -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853761"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; RnM (a, FreeVars)) -&gt; RnM (a, FreeVars)
forall r. (a -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853761"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682853762"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682853762"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a, FreeVars) -&gt; RnM (a, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682853762"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span id="local-6989586621682852934"><span class="annot"><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-type">liftCps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682852934"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682852934"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-145"></span><span id="liftCps"><span class="annot"><span class="annottext">liftCps :: forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var hs-var">liftCps</span></a></span></span><span> </span><span id="local-6989586621682853764"><span class="annot"><span class="annottext">RnM a
</span><a href="#local-6989586621682853764"><span class="hs-identifier hs-var">rn_thing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (a -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn a
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682853766"><span class="annot"><span class="annottext">a -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853766"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RnM a
</span><a href="#local-6989586621682853764"><span class="hs-identifier hs-var">rn_thing</span></a></span><span> </span><span class="annot"><span class="annottext">RnM a -&gt; (a -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
forall a b.
IOEnv (Env TcGblEnv TcLclEnv) a
-&gt; (a -&gt; IOEnv (Env TcGblEnv TcLclEnv) b)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853766"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="local-6989586621682852937"><span class="annot"><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-type">liftCpsFV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682852937"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682852937"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-148"></span><span id="liftCpsFV"><span class="annot"><span class="annottext">liftCpsFV :: forall a. RnM (a, FreeVars) -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-var hs-var">liftCpsFV</span></a></span></span><span> </span><span id="local-6989586621682853768"><span class="annot"><span class="annottext">RnM (a, FreeVars)
</span><a href="#local-6989586621682853768"><span class="hs-identifier hs-var">rn_thing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (a -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn a
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682853772"><span class="annot"><span class="annottext">a -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853772"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682853773"><span class="annot"><a href="#local-6989586621682853773"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682853774"><span class="annot"><a href="#local-6989586621682853774"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM (a, FreeVars)
</span><a href="#local-6989586621682853768"><span class="hs-identifier hs-var">rn_thing</span></a></span><span>
</span><span id="line-149"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682853775"><span class="annot"><a href="#local-6989586621682853775"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682853776"><span class="annot"><a href="#local-6989586621682853776"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682853772"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853773"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-150"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853775"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682853774"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853776"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span id="local-6989586621682853778"><span class="annot"><a href="GHC.Rename.Pat.html#liftCpsWithCont"><span class="hs-identifier hs-type">liftCpsWithCont</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682853034"><span class="annot"><a href="#local-6989586621682853034"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853778"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853034"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853034"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853778"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-153"></span><span id="liftCpsWithCont"><span class="annot"><span class="annottext">liftCpsWithCont :: forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#liftCpsWithCont"><span class="hs-identifier hs-var hs-var">liftCpsWithCont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span id="local-6989586621682852941"><span id="local-6989586621682852942"><span class="annot"><a href="GHC.Rename.Pat.html#wrapSrcSpanCps"><span class="hs-identifier hs-type">wrapSrcSpanCps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682852941"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682852942"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682852941"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682852942"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- Set the location, and also wrap it around the value returned</span><span>
</span><span id="line-157"></span><span id="wrapSrcSpanCps"><span class="annot"><span class="annottext">wrapSrcSpanCps :: forall a b. (a -&gt; CpsRn b) -&gt; LocatedA a -&gt; CpsRn (LocatedA b)
</span><a href="GHC.Rename.Pat.html#wrapSrcSpanCps"><span class="hs-identifier hs-var hs-var">wrapSrcSpanCps</span></a></span></span><span> </span><span id="local-6989586621682853780"><span class="annot"><span class="annottext">a -&gt; CpsRn b
</span><a href="#local-6989586621682853780"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682853782"><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682853782"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682853783"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682853783"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (LocatedA b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn (LocatedA b)
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682853784"><span class="annot"><span class="annottext">LocatedA b -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853784"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem -&gt; RnM (r, FreeVars) -&gt; RnM (r, FreeVars)
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682853782"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM (r, FreeVars) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars) -&gt; RnM (r, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-159"></span><span>                 </span><span class="annot"><span class="annottext">CpsRn b -&gt; forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
forall b.
CpsRn b -&gt; forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="GHC.Rename.Pat.html#unCpsRn"><span class="hs-identifier hs-var">unCpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; CpsRn b
</span><a href="#local-6989586621682853780"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682853783"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682853786"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682853786"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-160"></span><span>                 </span><span class="annot"><span class="annottext">LocatedA b -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853784"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn AnnListItem -&gt; b -&gt; LocatedA b
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682853782"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682853786"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="annot"><a href="GHC.Rename.Pat.html#lookupConCps"><span class="hs-identifier hs-type">lookupConCps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span id="lookupConCps"><span class="annot"><span class="annottext">lookupConCps :: GenLocated SrcSpanAnnN RdrName -&gt; CpsRn (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#lookupConCps"><span class="hs-identifier hs-var hs-var">lookupConCps</span></a></span></span><span> </span><span id="local-6989586621682853788"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853788"><span class="hs-identifier hs-var">con_rdr</span></a></span></span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r.
 (LocatedN Name -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn (LocatedN Name)
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682853792"><span class="annot"><span class="annottext">LocatedN Name -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853792"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853793"><span class="annot"><a href="#local-6989586621682853793"><span class="hs-identifier hs-var">con_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; TcRn (LocatedN Name)
forall ann.
GenLocated (EpAnn ann) RdrName
-&gt; TcRn (GenLocated (EpAnn ann) Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedOccRnConstr"><span class="hs-identifier hs-var">lookupLocatedOccRnConstr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853788"><span class="hs-identifier hs-var">con_rdr</span></a></span><span>
</span><span id="line-165"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682853795"><span class="annot"><a href="#local-6989586621682853795"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682853796"><span class="annot"><a href="#local-6989586621682853796"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682853792"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853793"><span class="hs-identifier hs-type">con_name</span></a></span><span>
</span><span id="line-166"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853795"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#addOneFV"><span class="hs-identifier hs-type">addOneFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853796"><span class="hs-identifier hs-type">fvs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853793"><span class="hs-identifier hs-type">con_name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-comment">-- We add the constructor name to the free vars</span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-comment">-- See Note [Patterns are uses]</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-comment">{-
Note [Patterns are uses]
~~~~~~~~~~~~~~~~~~~~~~~~
Consider
  module Foo( f, g ) where
  data T = T1 | T2

  f T1 = True
  f T2 = False

  g _ = T1

Arguably we should report T2 as unused, even though it appears in a
pattern, because it never occurs in a constructed position.
See #7336.
However, implementing this in the face of pattern synonyms would be
less straightforward, since given two pattern synonyms

  pattern P1 &lt;- P2
  pattern P2 &lt;- ()

we need to observe the dependency between P1 and P2 so that type
checking can be done in the correct order (just like for value
bindings). Dependencies between bindings is analyzed in the renamer,
where we don't know yet whether P2 is a constructor or a pattern
synonym. So for now, we do report conid occurrences in patterns as
uses.

*********************************************************
*                                                      *
        Name makers
*                                                      *
*********************************************************

Externally abstract type of name makers,
which is how you go from a RdrName to a Name
-}</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-keyword">data</span><span> </span><span id="NameMaker"><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-var">NameMaker</span></a></span></span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="LamMk"><span class="annot"><a href="GHC.Rename.Pat.html#LamMk"><span class="hs-identifier hs-var">LamMk</span></a></span></span><span>       </span><span class="hs-comment">-- Lambdas</span><span>
</span><span id="line-210"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>      </span><span class="hs-comment">-- True &lt;=&gt; report unused bindings</span><span>
</span><span id="line-211"></span><span>                </span><span class="hs-comment">--   (even if True, the warning only comes out</span><span>
</span><span id="line-212"></span><span>                </span><span class="hs-comment">--    if -Wunused-matches is on)</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LetMk"><span class="annot"><a href="GHC.Rename.Pat.html#LetMk"><span class="hs-identifier hs-var">LetMk</span></a></span></span><span>       </span><span class="hs-comment">-- Let bindings, incl top level</span><span>
</span><span id="line-215"></span><span>                </span><span class="hs-comment">-- Do *not* check for unused bindings</span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><a href="GHC.Types.Basic.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a></span><span>
</span><span id="line-217"></span><span>      </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="annot"><a href="GHC.Rename.Pat.html#topRecNameMaker"><span class="hs-identifier hs-type">topRecNameMaker</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span>
</span><span id="line-220"></span><span id="topRecNameMaker"><span class="annot"><span class="annottext">topRecNameMaker :: MiniFixityEnv -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#topRecNameMaker"><span class="hs-identifier hs-var hs-var">topRecNameMaker</span></a></span></span><span> </span><span id="local-6989586621682853801"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621682853801"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag -&gt; MiniFixityEnv -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#LetMk"><span class="hs-identifier hs-var">LetMk</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621682853801"><span class="hs-identifier hs-var">fix_env</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="annot"><a href="GHC.Rename.Pat.html#isTopRecNameMaker"><span class="hs-identifier hs-type">isTopRecNameMaker</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-223"></span><span id="isTopRecNameMaker"><span class="annot"><span class="annottext">isTopRecNameMaker :: NameMaker -&gt; Bool
</span><a href="GHC.Rename.Pat.html#isTopRecNameMaker"><span class="hs-identifier hs-var hs-var">isTopRecNameMaker</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#LetMk"><span class="hs-identifier hs-type">LetMk</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-224"></span><span class="annot"><a href="GHC.Rename.Pat.html#isTopRecNameMaker"><span class="hs-identifier hs-var">isTopRecNameMaker</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="annot"><a href="GHC.Rename.Pat.html#localRecNameMaker"><span class="hs-identifier hs-type">localRecNameMaker</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span>
</span><span id="line-227"></span><span id="localRecNameMaker"><span class="annot"><span class="annottext">localRecNameMaker :: MiniFixityEnv -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#localRecNameMaker"><span class="hs-identifier hs-var hs-var">localRecNameMaker</span></a></span></span><span> </span><span id="local-6989586621682853803"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621682853803"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag -&gt; MiniFixityEnv -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#LetMk"><span class="hs-identifier hs-var">LetMk</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621682853803"><span class="hs-identifier hs-var">fix_env</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span id="local-6989586621682852965"><span class="annot"><a href="GHC.Rename.Pat.html#matchNameMaker"><span class="hs-identifier hs-type">matchNameMaker</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMatchContext"><span class="hs-identifier hs-type">HsMatchContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682852965"><span class="hs-identifier hs-type">fn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span></span><span>
</span><span id="line-230"></span><span id="matchNameMaker"><span class="annot"><span class="annottext">matchNameMaker :: forall fn. HsMatchContext fn -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#matchNameMaker"><span class="hs-identifier hs-var hs-var">matchNameMaker</span></a></span></span><span> </span><span id="local-6989586621682853806"><span class="annot"><span class="annottext">HsMatchContext fn
</span><a href="#local-6989586621682853806"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#LamMk"><span class="hs-identifier hs-var">LamMk</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682853807"><span class="hs-identifier hs-var">report_unused</span></a></span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-comment">-- Do not report unused names in interactive contexts</span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-comment">-- i.e. when you type 'x &lt;- e' at the GHCi prompt</span><span>
</span><span id="line-234"></span><span>    </span><span id="local-6989586621682853807"><span class="annot"><span class="annottext">report_unused :: Bool
</span><a href="#local-6989586621682853807"><span class="hs-identifier hs-var hs-var">report_unused</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsMatchContext fn
</span><a href="#local-6989586621682853806"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-235"></span><span>                      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtCtxt"><span class="hs-identifier hs-type">StmtCtxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDoStmt"><span class="hs-identifier hs-type">HsDoStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="Language.Haskell.Syntax.Expr.html#GhciStmtCtxt"><span class="hs-identifier hs-var">GhciStmtCtxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-236"></span><span>                      </span><span class="hs-comment">-- also, don't warn in pattern quotes, as there</span><span>
</span><span id="line-237"></span><span>                      </span><span class="hs-comment">-- is no RHS where the variables can be used!</span><span>
</span><span id="line-238"></span><span>                      </span><span class="annot"><span class="annottext">HsMatchContext fn
</span><a href="Language.Haskell.Syntax.Expr.html#ThPatQuote"><span class="hs-identifier hs-var">ThPatQuote</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-239"></span><span>                      </span><span class="annot"><span class="annottext">HsMatchContext fn
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="annot"><a href="GHC.Rename.Pat.html#newPatLName"><span class="hs-identifier hs-type">newPatLName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span id="newPatLName"><span class="annot"><span class="annottext">newPatLName :: NameMaker
-&gt; GenLocated SrcSpanAnnN RdrName -&gt; CpsRn (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#newPatLName"><span class="hs-identifier hs-var hs-var">newPatLName</span></a></span></span><span> </span><span id="local-6989586621682853813"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853813"><span class="hs-identifier hs-var">name_maker</span></a></span></span><span> </span><span id="local-6989586621682853814"><span class="annot"><span class="annottext">rdr_name :: GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853814"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682853815"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682853815"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853816"><span class="annot"><a href="#local-6989586621682853816"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; GenLocated SrcSpanAnnN RdrName -&gt; CpsRn Name
</span><a href="GHC.Rename.Pat.html#newPatName"><span class="hs-identifier hs-var">newPatName</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853813"><span class="hs-identifier hs-var">name_maker</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853814"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-244"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853815"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853816"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="annot"><a href="GHC.Rename.Pat.html#newPatName"><span class="hs-identifier hs-type">newPatName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-247"></span><span id="newPatName"><span class="annot"><span class="annottext">newPatName :: NameMaker -&gt; GenLocated SrcSpanAnnN RdrName -&gt; CpsRn Name
</span><a href="GHC.Rename.Pat.html#newPatName"><span class="hs-identifier hs-var hs-var">newPatName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#LamMk"><span class="hs-identifier hs-type">LamMk</span></a></span><span> </span><span id="local-6989586621682853818"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682853818"><span class="hs-identifier hs-var">report_unused</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682853819"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853819"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (Name -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn Name
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682853825"><span class="annot"><span class="annottext">Name -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853825"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-249"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853826"><span class="annot"><a href="#local-6989586621682853826"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier hs-var">newLocalBndrRn</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853819"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-250"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682853827"><span class="annot"><a href="#local-6989586621682853827"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682853828"><span class="annot"><a href="#local-6989586621682853828"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier hs-type">bindLocalNames</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682853826"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853825"><span class="hs-identifier hs-type">thing_inside</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853826"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="annot"><a href="#local-6989586621682853818"><span class="hs-identifier hs-type">report_unused</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedMatches"><span class="hs-identifier hs-type">warnUnusedMatches</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682853826"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621682853828"><span class="hs-identifier hs-type">fvs</span></a></span><span>
</span><span id="line-252"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853827"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682853826"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#delFV"><span class="hs-operator hs-type">`delFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853828"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><a href="GHC.Rename.Pat.html#newPatName"><span class="hs-identifier hs-var">newPatName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#LetMk"><span class="hs-identifier hs-type">LetMk</span></a></span><span> </span><span id="local-6989586621682853830"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621682853830"><span class="hs-identifier hs-var">is_top</span></a></span></span><span> </span><span id="local-6989586621682853831"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621682853831"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682853832"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853832"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r. (Name -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn Name
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682853834"><span class="annot"><span class="annottext">Name -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853834"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-256"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853835"><span class="annot"><a href="#local-6989586621682853835"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621682853830"><span class="hs-identifier hs-var">is_top</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-257"></span><span>                       </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier hs-var">newLocalBndrRn</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853832"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-258"></span><span>                       </span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#TopLevel"><span class="hs-identifier hs-var">TopLevel</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Env.html#newTopSrcBinder"><span class="hs-identifier hs-var">newTopSrcBinder</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853832"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-259"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier hs-type">bindLocalNames</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682853835"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-260"></span><span>                 </span><span class="hs-comment">-- Do *not* use bindLocalNameFV here;</span><span>
</span><span id="line-261"></span><span>                 </span><span class="hs-comment">--   see Note [View pattern usage]</span><span>
</span><span id="line-262"></span><span>                 </span><span class="hs-comment">-- For the TopLevel case</span><span>
</span><span id="line-263"></span><span>                 </span><span class="hs-comment">--   see Note [bindLocalNames for an External name]</span><span>
</span><span id="line-264"></span><span>             </span><span class="annot"><a href="GHC.Rename.Fixity.html#addLocalFixities"><span class="hs-identifier hs-type">addLocalFixities</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853831"><span class="hs-identifier hs-type">fix_env</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682853835"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-265"></span><span>             </span><span class="annot"><a href="#local-6989586621682853834"><span class="hs-identifier hs-type">thing_inside</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853835"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-comment">{- Note [bindLocalNames for an External name]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In the TopLevel case, the use of bindLocalNames here is somewhat
suspicious because it binds a top-level External name in the
LocalRdrEnv.  c.f. Note [LocalRdrEnv] in GHC.Types.Name.Reader.

However, this only happens when renaming the LHS (only) of a top-level
pattern binding.  Even though this only the LHS, we need to bring the
binder into scope in the pattern itself in case the binder is used in
subsequent view patterns.  A bit bizarre, something like
  (x, Just y &lt;- f x) = e

Anyway, bindLocalNames does work, and the binding only exists for the
duration of the pattern; then the top-level name is added to the
global env before going on to the RHSes (see GHC.Rename.Module).

Note [View pattern usage]
~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
  let (r, (r -&gt; x)) = x in ...
Here the pattern binds 'r', and then uses it *only* in the view pattern.
We want to &quot;see&quot; this use, and in let-bindings we collect all uses and
report unused variables at the binding level. So we must use bindLocalNames
here, *not* bindLocalNameFV.  #3943.


Note [Don't report shadowing for pattern synonyms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
There is one special context where a pattern doesn't introduce any new binders -
pattern synonym declarations. Therefore we don't check to see if pattern
variables shadow existing identifiers as they are never bound to anything
and have no scope.

Without this check, there would be quite a cryptic warning that the `x`
in the RHS of the pattern synonym declaration shadowed the top level `x`.

```
x :: ()
x = ()

pattern P x = Just x
```

See #12615 for some more examples.

Note [Handling overloaded and rebindable patterns]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Overloaded patterns and rebindable patterns are desugared in the renamer
using the HsPatExpansion mechanism detailed in:
Note [Rebindable syntax and XXExprGhcRn]
The approach is similar to that of expressions, which is further detailed
in Note [Handling overloaded and rebindable constructs] in GHC.Rename.Expr.

Here are the patterns that are currently desugared in this way:

* ListPat (list patterns [p1,p2,p3])
  When (and only when) OverloadedLists is on, desugar to a view pattern:
    [p1, p2, p3]
  ==&gt;
    toList -&gt; [p1, p2, p3]
              ^^^^^^^^^^^^ built-in (non-overloaded) list pattern
  NB: the type checker and desugarer still see ListPat,
      but to them it always means the built-in list pattern.
  See Note [Desugaring overloaded list patterns] below for more details.

We expect to add to this list as we deal with more patterns via the expansion
mechanism.

Note [Desugaring overloaded list patterns]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
If OverloadedLists is enabled, we desugar a list pattern to a view pattern:

  [p1, p2, p3]
==&gt;
  toList -&gt; [p1, p2, p3]

This happens directly in the renamer, using the HsPatExpansion mechanism
detailed in Note [Rebindable syntax and XXExprGhcRn].

Note that we emit a special view pattern: we additionally keep track of an
inverse to the pattern.
See Note [Invertible view patterns] in GHC.Tc.TyCl.PatSyn for details.

== Wrinkle ==

This is all fine, except in one very specific case:
  - when RebindableSyntax is off,
  - and the type being matched on is already a list type.

In this case, it is undesirable to desugar an overloaded list pattern into
a view pattern. To illustrate, consider the following program:

&gt; {-# LANGUAGE OverloadedLists #-}
&gt;
&gt; f []    = True
&gt; f (_:_) = False

Without any special logic, the pattern `[]` is desugared to `(toList -&gt; [])`,
whereas `(_:_)` remains a constructor pattern. This implies that the argument
of `f` is necessarily a list (even though `OverloadedLists` is enabled).
After desugaring the overloaded list pattern `[]`, and type-checking, we obtain:

&gt; f :: [a] -&gt; Bool
&gt; f (toList -&gt; []) = True
&gt; f (_:_)          = False

The pattern match checker then warns that the pattern `[]` is not covered,
as it isn't able to look through view patterns.
We can see that this is silly: as we are matching on a list, `toList` doesn't
actually do anything. So we ignore it, and desugar the pattern to an explicit
list pattern, instead of a view pattern.

Note however that this is not necessarily sound, because it is possible to have
a list `l` such that `toList l` is not the same as `l`.
This can happen with an overlapping instance, such as the following:

instance {-# OVERLAPPING #-} IsList [Int] where
  type Item [Int] = Int
  toList = reverse
  fromList = reverse

We make the assumption that no such instance exists, in order to avoid worsening
pattern-match warnings (see #14547).

*********************************************************
*                                                      *
        External entry points
*                                                      *
*********************************************************

There are various entry points to renaming patterns, depending on
 (1) whether the names created should be top-level names or local names
 (2) whether the scope of the names is entirely given in a continuation
     (e.g., in a case or lambda, but not in a let or at the top-level,
      because of the way mutually recursive bindings are handled)
 (3) whether the a type signature in the pattern can bind
        lexically-scoped type variables (for unpacking existential
        type vars in data constructors)
 (4) whether we do duplicate and unused variable checking
 (5) whether there are fixity declarations associated with the names
     bound by the patterns that need to be brought into scope with them.

 Rather than burdening the clients of this module with all of these choices,
 we export the three points in this design space that we actually need:
-}</span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-comment">-- ----------- Entry point 1: rnPats -------------------</span><span>
</span><span id="line-414"></span><span class="hs-comment">-- Binds local names; the scope of the bindings is entirely in the thing_inside</span><span>
</span><span id="line-415"></span><span class="hs-comment">--   * allows type sigs to bind type vars</span><span>
</span><span id="line-416"></span><span class="hs-comment">--   * local namemaker</span><span>
</span><span id="line-417"></span><span class="hs-comment">--   * unused and duplicate checking</span><span>
</span><span id="line-418"></span><span class="hs-comment">--   * no fixities</span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span class="hs-comment">-- rn_pats_general is the generalisation of two functions:</span><span>
</span><span id="line-421"></span><span class="hs-comment">--    rnPats, rnPat</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- Those are the only call sites, so we inline it for improved performance.</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- Kind of like a macro.</span><span>
</span><span id="line-424"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_pats_general"><span class="hs-pragma hs-type">rn_pats_general</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-425"></span><span id="local-6989586621682852975"><span id="local-6989586621682852979"><span class="annot"><a href="GHC.Rename.Pat.html#rn_pats_general"><span class="hs-identifier hs-type">rn_pats_general</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621682852975"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsMatchContextRn"><span class="hs-identifier hs-type">HsMatchContextRn</span></a></span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682852975"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682852975"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682852979"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682852979"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-429"></span><span id="rn_pats_general"><span class="annot"><span class="annottext">rn_pats_general :: forall (f :: * -&gt; *) r.
Traversable f =&gt;
HsMatchContextRn
-&gt; f (LPat GhcPs)
-&gt; (f (LPat GhcRn) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
</span><a href="GHC.Rename.Pat.html#rn_pats_general"><span class="hs-identifier hs-var hs-var">rn_pats_general</span></a></span></span><span> </span><span id="local-6989586621682853864"><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621682853864"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621682853865"><span class="annot"><span class="annottext">f (LPat GhcPs)
</span><a href="#local-6989586621682853865"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621682853866"><span class="annot"><span class="annottext">f (LPat GhcRn) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853866"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-430"></span><span>  </span><span id="local-6989586621682853867"><span class="annot"><a href="#local-6989586621682853867"><span class="hs-identifier hs-var">envs_before</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn (GlobalRdrEnv, LocalRdrEnv)
</span><a href="GHC.Tc.Utils.Monad.html#getRdrEnvs"><span class="hs-identifier hs-var">getRdrEnvs</span></a></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span>  </span><span class="hs-comment">-- (1) rename the patterns, bringing into scope all of the term variables</span><span>
</span><span id="line-433"></span><span>  </span><span class="hs-comment">-- (2) then do the thing inside.</span><span>
</span><span id="line-434"></span><span>  </span><span class="annot"><a href="GHC.Rename.Pat.html#unCpsRn"><span class="hs-identifier hs-var">unCpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853869"><span class="hs-identifier hs-type">rn_pats_fun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#matchNameMaker"><span class="hs-identifier hs-type">matchNameMaker</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853864"><span class="hs-identifier hs-type">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682853865"><span class="hs-identifier hs-type">pats</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682853870"><span class="annot"><span class="annottext">f (LocatedA (Pat GhcRn))
</span><a href="#local-6989586621682853870"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-435"></span><span>    </span><span class="hs-comment">-- Check for duplicated and shadowed names</span><span>
</span><span id="line-436"></span><span>    </span><span class="hs-comment">-- Must do this *after* renaming the patterns</span><span>
</span><span id="line-437"></span><span>    </span><span class="hs-comment">-- See Note [Collect binders only after renaming] in GHC.Hs.Utils</span><span>
</span><span id="line-438"></span><span>    </span><span class="hs-comment">-- Because we don't bind the vars all at once, we can't</span><span>
</span><span id="line-439"></span><span>    </span><span class="hs-comment">--    check incrementally for duplicates;</span><span>
</span><span id="line-440"></span><span>    </span><span class="hs-comment">-- Nor can we check incrementally for shadowing, else we'll</span><span>
</span><span id="line-441"></span><span>    </span><span class="hs-comment">--    complain *twice* about duplicates e.g. f (x,x) = ...</span><span>
</span><span id="line-442"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-443"></span><span>    </span><span class="hs-comment">-- See Note [Don't report shadowing for pattern synonyms]</span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682853871"><span class="annot"><span class="annottext">bndrs :: [IdP GhcRn]
</span><a href="#local-6989586621682853871"><span class="hs-identifier hs-var hs-var hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcRn -&gt; [LPat GhcRn] -&gt; [IdP GhcRn]
forall p. CollectPass p =&gt; CollectFlag p -&gt; [LPat p] -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectPatsBinders"><span class="hs-identifier hs-var">collectPatsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcRn
</span><a href="GHC.Hs.Utils.html#CollVarTyVarBinders"><span class="hs-identifier hs-var">CollVarTyVarBinders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f (LocatedA (Pat GhcRn)) -&gt; [LocatedA (Pat GhcRn)]
forall a. f a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">f (LocatedA (Pat GhcRn))
</span><a href="#local-6989586621682853870"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>    </span><span class="annot"><span class="annottext">SDoc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. SDoc -&gt; TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#addErrCtxt"><span class="hs-identifier hs-var">addErrCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682853876"><span class="hs-identifier hs-var">doc_pat</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-446"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">HsMatchContext (LocatedN Name) -&gt; Bool
forall fn. HsMatchContext fn -&gt; Bool
</span><a href="Language.Haskell.Syntax.Expr.html#isPatSynCtxt"><span class="hs-identifier hs-var">isPatSynCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
HsMatchContext (LocatedN Name)
</span><a href="#local-6989586621682853864"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-447"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkDupNames"><span class="hs-identifier hs-var">checkDupNames</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
[Name]
</span><a href="#local-6989586621682853871"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-448"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEnv, LocalRdrEnv)
-&gt; [Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkDupAndShadowedNames"><span class="hs-identifier hs-var">checkDupAndShadowedNames</span></a></span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEnv, LocalRdrEnv)
</span><a href="#local-6989586621682853867"><span class="hs-identifier hs-var">envs_before</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
[Name]
</span><a href="#local-6989586621682853871"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-449"></span><span>    </span><span class="annot"><span class="annottext">f (LPat GhcRn) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682853866"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">f (LPat GhcRn)
f (LocatedA (Pat GhcRn))
</span><a href="#local-6989586621682853870"><span class="hs-identifier hs-var">pats'</span></a></span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-451"></span><span>    </span><span id="local-6989586621682853876"><span class="annot"><span class="annottext">doc_pat :: SDoc
</span><a href="#local-6989586621682853876"><span class="hs-identifier hs-var hs-var">doc_pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext (LocatedN Name) -&gt; SDoc
forall fn. Outputable fn =&gt; HsMatchContext fn -&gt; SDoc
</span><a href="GHC.Hs.Expr.html#pprMatchContext"><span class="hs-identifier hs-var">pprMatchContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
HsMatchContext (LocatedN Name)
</span><a href="#local-6989586621682853864"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-comment">-- See Note [Invisible binders in functions] in GHC.Hs.Pat</span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-comment">-- BTW, Or-patterns would be awesome here</span><span>
</span><span id="line-456"></span><span>    </span><span id="local-6989586621682853869"><span class="annot"><span class="annottext">rn_pats_fun :: NameMaker
-&gt; f (LocatedA (Pat GhcPs)) -&gt; CpsRn (f (LocatedA (Pat GhcRn)))
</span><a href="#local-6989586621682853869"><span class="hs-identifier hs-var hs-var">rn_pats_fun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621682853864"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-457"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FunRhs"><span class="hs-identifier hs-type">FunRhs</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
-&gt; f (LocatedA (Pat GhcPs)) -&gt; CpsRn (f (LocatedA (Pat GhcRn)))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; f a -&gt; m (f b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">((LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
 -&gt; f (LocatedA (Pat GhcPs)) -&gt; CpsRn (f (LocatedA (Pat GhcRn))))
-&gt; (NameMaker
    -&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
-&gt; NameMaker
-&gt; f (LocatedA (Pat GhcPs))
-&gt; CpsRn (f (LocatedA (Pat GhcRn)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn))
</span><a href="GHC.Rename.Pat.html#rnLArgPatAndThen"><span class="hs-identifier hs-var">rnLArgPatAndThen</span></a></span><span>
</span><span id="line-458"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LamAlt"><span class="hs-identifier hs-type">LamAlt</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="Language.Haskell.Syntax.Expr.html#LamSingle"><span class="hs-identifier hs-var">LamSingle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
-&gt; f (LocatedA (Pat GhcPs)) -&gt; CpsRn (f (LocatedA (Pat GhcRn)))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; f a -&gt; m (f b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">((LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
 -&gt; f (LocatedA (Pat GhcPs)) -&gt; CpsRn (f (LocatedA (Pat GhcRn))))
-&gt; (NameMaker
    -&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
-&gt; NameMaker
-&gt; f (LocatedA (Pat GhcPs))
-&gt; CpsRn (f (LocatedA (Pat GhcRn)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn))
</span><a href="GHC.Rename.Pat.html#rnLArgPatAndThen"><span class="hs-identifier hs-var">rnLArgPatAndThen</span></a></span><span>
</span><span id="line-459"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LamAlt"><span class="hs-identifier hs-type">LamAlt</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="Language.Haskell.Syntax.Expr.html#LamCases"><span class="hs-identifier hs-var">LamCases</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
-&gt; f (LocatedA (Pat GhcPs)) -&gt; CpsRn (f (LocatedA (Pat GhcRn)))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; f a -&gt; m (f b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">((LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
 -&gt; f (LocatedA (Pat GhcPs)) -&gt; CpsRn (f (LocatedA (Pat GhcRn))))
-&gt; (NameMaker
    -&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
-&gt; NameMaker
-&gt; f (LocatedA (Pat GhcPs))
-&gt; CpsRn (f (LocatedA (Pat GhcRn)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn))
</span><a href="GHC.Rename.Pat.html#rnLArgPatAndThen"><span class="hs-identifier hs-var">rnLArgPatAndThen</span></a></span><span>
</span><span id="line-460"></span><span>      </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
-&gt; f (LocatedA (Pat GhcPs)) -&gt; CpsRn (f (LocatedA (Pat GhcRn)))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; f a -&gt; m (f b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">((LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
 -&gt; f (LocatedA (Pat GhcPs)) -&gt; CpsRn (f (LocatedA (Pat GhcRn))))
-&gt; (NameMaker
    -&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
-&gt; NameMaker
-&gt; f (LocatedA (Pat GhcPs))
-&gt; CpsRn (f (LocatedA (Pat GhcRn)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
NameMaker -&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn))
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var">rnLPatAndThen</span></a></span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span id="local-6989586621682853011"><span class="annot"><a href="GHC.Rename.Pat.html#rnPats"><span class="hs-identifier hs-type">rnPats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsMatchContextRn"><span class="hs-identifier hs-type">HsMatchContextRn</span></a></span><span>   </span><span class="hs-comment">-- For error messages and choosing if @-patterns are allowed</span><span>
</span><span id="line-463"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-464"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853011"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853011"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-466"></span><span id="rnPats"><span class="annot"><span class="annottext">rnPats :: forall a.
HsMatchContextRn
-&gt; [LPat GhcPs]
-&gt; ([LPat GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Pat.html#rnPats"><span class="hs-identifier hs-var hs-var">rnPats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
-&gt; [LPat GhcPs]
-&gt; ([LPat GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall (f :: * -&gt; *) r.
Traversable f =&gt;
HsMatchContextRn
-&gt; f (LPat GhcPs)
-&gt; (f (LPat GhcRn) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
</span><a href="GHC.Rename.Pat.html#rn_pats_general"><span class="hs-identifier hs-var">rn_pats_general</span></a></span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPat"><span class="hs-identifier hs-type">rnPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682853013"><span class="annot"><a href="#local-6989586621682853013"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsMatchContextRn"><span class="hs-identifier hs-type">HsMatchContextRn</span></a></span><span>      </span><span class="hs-comment">-- For error messages and choosing if @-patterns are allowed</span><span>
</span><span id="line-469"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-470"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853013"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853013"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>     </span><span class="hs-comment">-- Variables bound by pattern do not</span><span>
</span><span id="line-472"></span><span>                               </span><span class="hs-comment">-- appear in the result FreeVars</span><span>
</span><span id="line-473"></span><span id="rnPat"><span class="annot"><span class="annottext">rnPat :: forall a.
HsMatchContextRn
-&gt; LPat GhcPs
-&gt; (LPat GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Pat.html#rnPat"><span class="hs-identifier hs-var hs-var">rnPat</span></a></span></span><span>
</span><span id="line-474"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsMatchContext (LocatedN Name)
 -&gt; Identity (LocatedA (Pat GhcPs))
 -&gt; (Identity (LocatedA (Pat GhcRn)) -&gt; RnM (a, FreeVars))
 -&gt; RnM (a, FreeVars))
-&gt; HsMatchContext (LocatedN Name)
-&gt; LocatedA (Pat GhcPs)
-&gt; (LocatedA (Pat GhcRn) -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) r.
Traversable f =&gt;
HsMatchContextRn
-&gt; f (LPat GhcPs)
-&gt; (f (LPat GhcRn) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
</span><a href="GHC.Rename.Pat.html#rn_pats_general"><span class="hs-identifier hs-var">rn_pats_general</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682853013"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span class="annot"><a href="GHC.Rename.Pat.html#applyNameMaker"><span class="hs-identifier hs-type">applyNameMaker</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span id="applyNameMaker"><span class="annot"><span class="annottext">applyNameMaker :: NameMaker -&gt; GenLocated SrcSpanAnnN RdrName -&gt; TcRn (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#applyNameMaker"><span class="hs-identifier hs-var hs-var">applyNameMaker</span></a></span></span><span> </span><span id="local-6989586621682853893"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853893"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span id="local-6989586621682853894"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853894"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682853895"><span class="annot"><a href="#local-6989586621682853895"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682853896"><span class="annot"><a href="#local-6989586621682853896"><span class="hs-identifier hs-var">_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CpsRn (LocatedN Name) -&gt; RnM (LocatedN Name, FreeVars)
forall a. CpsRn a -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Pat.html#runCps"><span class="hs-identifier hs-var">runCps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameMaker
-&gt; GenLocated SrcSpanAnnN RdrName -&gt; CpsRn (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#newPatLName"><span class="hs-identifier hs-var">newPatLName</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853893"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853894"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>                           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682853895"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span class="hs-comment">-- ----------- Entry point 2: rnBindPat -------------------</span><span>
</span><span id="line-481"></span><span class="hs-comment">-- Binds local names; in a recursive scope that involves other bound vars</span><span>
</span><span id="line-482"></span><span class="hs-comment">--      e.g let { (x, Just y) = e1; ... } in ...</span><span>
</span><span id="line-483"></span><span class="hs-comment">--   * does NOT allows type sig to bind type vars</span><span>
</span><span id="line-484"></span><span class="hs-comment">--   * local namemaker</span><span>
</span><span id="line-485"></span><span class="hs-comment">--   * no unused and duplicate checking</span><span>
</span><span id="line-486"></span><span class="hs-comment">--   * fixities might be coming in</span><span>
</span><span id="line-487"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnBindPat"><span class="hs-identifier hs-type">rnBindPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span>
</span><span id="line-488"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-489"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span>   </span><span class="hs-comment">-- Returned FreeVars are the free variables of the pattern,</span><span>
</span><span id="line-491"></span><span>   </span><span class="hs-comment">-- of course excluding variables bound by this pattern</span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span id="rnBindPat"><span class="annot"><span class="annottext">rnBindPat :: NameMaker -&gt; LPat GhcPs -&gt; RnM (LPat GhcRn, FreeVars)
</span><a href="GHC.Rename.Pat.html#rnBindPat"><span class="hs-identifier hs-var hs-var">rnBindPat</span></a></span></span><span> </span><span id="local-6989586621682853897"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853897"><span class="hs-identifier hs-var">name_maker</span></a></span></span><span> </span><span id="local-6989586621682853898"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853898"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CpsRn (LocatedA (Pat GhcRn))
-&gt; RnM (LocatedA (Pat GhcRn), FreeVars)
forall a. CpsRn a -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Pat.html#runCps"><span class="hs-identifier hs-var">runCps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var">rnLPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853897"><span class="hs-identifier hs-var">name_maker</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853898"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
        The main event
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnLArgPatAndThen"><span class="hs-identifier hs-type">rnLArgPatAndThen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span id="rnLArgPatAndThen"><span class="annot"><span class="annottext">rnLArgPatAndThen :: NameMaker -&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn))
</span><a href="GHC.Rename.Pat.html#rnLArgPatAndThen"><span class="hs-identifier hs-var hs-var">rnLArgPatAndThen</span></a></span></span><span> </span><span id="local-6989586621682853899"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853899"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pat GhcPs -&gt; CpsRn (Pat GhcRn))
-&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn))
forall a b. (a -&gt; CpsRn b) -&gt; LocatedA a -&gt; CpsRn (LocatedA b)
</span><a href="GHC.Rename.Pat.html#wrapSrcSpanCps"><span class="hs-identifier hs-var">wrapSrcSpanCps</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcPs -&gt; CpsRn (Pat GhcRn)
</span><a href="#local-6989586621682853900"><span class="hs-identifier hs-var">rnArgPatAndThen</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span>  </span><span id="local-6989586621682853900"><span class="annot"><span class="annottext">rnArgPatAndThen :: Pat GhcPs -&gt; CpsRn (Pat GhcRn)
</span><a href="#local-6989586621682853900"><span class="hs-identifier hs-var hs-var">rnArgPatAndThen</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#InvisPat"><span class="hs-identifier hs-type">InvisPat</span></a></span><span> </span><span class="annot"><span class="annottext">XInvisPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682853902"><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcPs)
</span><a href="#local-6989586621682853902"><span class="hs-identifier hs-var">tp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-508"></span><span>    </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ()
forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var">liftCps</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Extension
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#unlessXOptM"><span class="hs-identifier hs-var">unlessXOptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.TypeAbstractions</span></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-509"></span><span>      </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsTyPat GhcPs -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalInvisibleTypePattern"><span class="hs-identifier hs-var">TcRnIllegalInvisibleTypePattern</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcPs)
HsTyPat GhcPs
</span><a href="#local-6989586621682853902"><span class="hs-identifier hs-var">tp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span>    </span><span id="local-6989586621682853907"><span class="annot"><a href="#local-6989586621682853907"><span class="hs-identifier hs-var">tp'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; HsTyPat GhcPs -&gt; CpsRn (HsTyPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnHsTyPat"><span class="hs-identifier hs-var">rnHsTyPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#HsTypePatCtx"><span class="hs-identifier hs-var">HsTypePatCtx</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcPs)
HsTyPat GhcPs
</span><a href="#local-6989586621682853902"><span class="hs-identifier hs-var">tp</span></a></span><span>
</span><span id="line-511"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#InvisPat"><span class="hs-identifier hs-type">InvisPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853907"><span class="hs-identifier hs-type">tp'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>  </span><span class="annot"><a href="#local-6989586621682853900"><span class="hs-identifier hs-var">rnArgPatAndThen</span></a></span><span> </span><span id="local-6989586621682853911"><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682853911"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; Pat GhcPs -&gt; CpsRn (Pat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853899"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682853911"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="hs-comment">-- ----------- Entry point 3: rnLPatAndThen -------------------</span><span>
</span><span id="line-515"></span><span class="hs-comment">-- General version: parameterized by how you make new names</span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnLPatsAndThen"><span class="hs-identifier hs-type">rnLPatsAndThen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-518"></span><span id="rnLPatsAndThen"><span class="annot"><span class="annottext">rnLPatsAndThen :: NameMaker -&gt; [LPat GhcPs] -&gt; CpsRn [LPat GhcRn]
</span><a href="GHC.Rename.Pat.html#rnLPatsAndThen"><span class="hs-identifier hs-var hs-var">rnLPatsAndThen</span></a></span></span><span> </span><span id="local-6989586621682853914"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853914"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn)))
-&gt; [LocatedA (Pat GhcPs)] -&gt; CpsRn [LocatedA (Pat GhcRn)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var">rnLPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853914"><span class="hs-identifier hs-var">mk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-comment">-- Despite the map, the monad ensures that each pattern binds</span><span>
</span><span id="line-520"></span><span>  </span><span class="hs-comment">-- variables that may be mentioned in subsequent patterns in the list</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span class="hs-comment">--------------------</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- The workhorse</span><span>
</span><span id="line-524"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-type">rnLPatAndThen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span id="rnLPatAndThen"><span class="annot"><span class="annottext">rnLPatAndThen :: NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var hs-var">rnLPatAndThen</span></a></span></span><span> </span><span id="local-6989586621682853915"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853915"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621682853916"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853916"><span class="hs-identifier hs-var">lpat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pat GhcPs -&gt; CpsRn (Pat GhcRn))
-&gt; LocatedA (Pat GhcPs) -&gt; CpsRn (LocatedA (Pat GhcRn))
forall a b. (a -&gt; CpsRn b) -&gt; LocatedA a -&gt; CpsRn (LocatedA b)
</span><a href="GHC.Rename.Pat.html#wrapSrcSpanCps"><span class="hs-identifier hs-var">wrapSrcSpanCps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameMaker -&gt; Pat GhcPs -&gt; CpsRn (Pat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853915"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
LocatedA (Pat GhcPs)
</span><a href="#local-6989586621682853916"><span class="hs-identifier hs-var">lpat</span></a></span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-type">rnPatAndThen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span id="rnPatAndThen"><span class="annot"><span class="annottext">rnPatAndThen :: NameMaker -&gt; Pat GhcPs -&gt; CpsRn (Pat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var hs-var">rnPatAndThen</span></a></span></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; CpsRn (Pat GhcRn)
forall a. a -&gt; CpsRn a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XWildPat GhcRn -&gt; Pat GhcRn
forall p. XWildPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682853918"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853918"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="annot"><span class="annottext">XParPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682853920"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853920"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-530"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853921"><span class="annot"><a href="#local-6989586621682853921"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var">rnLPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853918"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853920"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-531"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853921"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-532"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682853922"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853922"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLazyPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682853924"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853924"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853925"><span class="annot"><a href="#local-6989586621682853925"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var">rnLPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853922"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853924"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-533"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853925"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-534"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682853926"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853926"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span class="annot"><span class="annottext">XBangPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682853928"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853928"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853929"><span class="annot"><a href="#local-6989586621682853929"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var">rnLPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853926"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853928"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-535"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853929"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-536"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682853930"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853930"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span id="local-6989586621682853932"><span class="annot"><span class="annottext">XVarPat GhcPs
</span><a href="#local-6989586621682853932"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682853933"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682853933"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682853934"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682853934"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-537"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853935"><span class="annot"><a href="#local-6989586621682853935"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM SrcSpan -&gt; CpsRn SrcSpan
forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var">liftCps</span></a></span><span> </span><span class="annot"><span class="annottext">RnM SrcSpan
</span><a href="GHC.Tc.Utils.Monad.html#getSrcSpanM"><span class="hs-identifier hs-var">getSrcSpanM</span></a></span><span>
</span><span id="line-538"></span><span>         </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682853937"><span class="annot"><a href="#local-6989586621682853937"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#newPatName"><span class="hs-identifier hs-type">newPatName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853930"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-type">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853935"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682853934"><span class="hs-identifier hs-type">rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853932"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853933"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853937"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-540"></span><span>     </span><span class="hs-comment">-- we need to bind pattern variables for view pattern expressions</span><span>
</span><span id="line-541"></span><span>     </span><span class="hs-comment">-- (e.g. in the pattern (x, x -&gt; y) x needs to be bound in the rhs of the tuple)</span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682853939"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853939"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682853941"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682853941"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621682853942"><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcPs)
</span><a href="#local-6989586621682853942"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>  </span><span class="hs-comment">-- When renaming a pattern type signature (e.g. f (a :: T) = ...), it is</span><span>
</span><span id="line-545"></span><span>  </span><span class="hs-comment">-- important to rename its type signature _before_ renaming the rest of the</span><span>
</span><span id="line-546"></span><span>  </span><span class="hs-comment">-- pattern, so that type variables are first bound by the _outermost_ pattern</span><span>
</span><span id="line-547"></span><span>  </span><span class="hs-comment">-- type signature they occur in. This keeps the type checker happy when</span><span>
</span><span id="line-548"></span><span>  </span><span class="hs-comment">-- pattern type signatures happen to be nested (#7827)</span><span>
</span><span id="line-549"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-550"></span><span>  </span><span class="hs-comment">-- f ((Just (x :: a) :: Maybe a)</span><span>
</span><span id="line-551"></span><span>  </span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~^       `a' is first bound here</span><span>
</span><span id="line-552"></span><span>  </span><span class="hs-comment">-- ~~~~~~~~~~~~~~~^                   the same `a' then used here</span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853943"><span class="annot"><a href="#local-6989586621682853943"><span class="hs-identifier hs-var">sig'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcPs -&gt; CpsRn (HsPatSigType GhcRn)
</span><a href="#local-6989586621682853944"><span class="hs-identifier hs-var">rnHsPatSigTypeAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcPs)
HsPatSigType GhcPs
</span><a href="#local-6989586621682853942"><span class="hs-identifier hs-var">sig</span></a></span><span>
</span><span id="line-554"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682853945"><span class="annot"><a href="#local-6989586621682853945"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-type">rnLPatAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853939"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853941"><span class="hs-identifier hs-type">pat</span></a></span><span>
</span><span id="line-555"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853945"><span class="hs-identifier hs-type">pat'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853943"><span class="hs-identifier hs-type">sig'</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-556"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-557"></span><span>    </span><span class="annot"><a href="#local-6989586621682853944"><span class="hs-identifier hs-type">rnHsPatSigTypeAndThen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>    </span><span id="local-6989586621682853944"><span class="annot"><span class="annottext">rnHsPatSigTypeAndThen :: HsPatSigType GhcPs -&gt; CpsRn (HsPatSigType GhcRn)
</span><a href="#local-6989586621682853944"><span class="hs-identifier hs-var hs-var">rnHsPatSigTypeAndThen</span></a></span></span><span> </span><span id="local-6989586621682853946"><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621682853946"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r.
 (HsPatSigType GhcRn -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn (HsPatSigType GhcRn)
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#liftCpsWithCont"><span class="hs-identifier hs-var">liftCpsWithCont</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
forall a.
HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsPatSigType"><span class="hs-identifier hs-var">rnHsPatSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigTypeScoping
</span><a href="GHC.Rename.HsType.html#AlwaysBind"><span class="hs-identifier hs-var">AlwaysBind</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#PatCtx"><span class="hs-identifier hs-var">PatCtx</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621682853946"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682853950"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853950"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span> </span><span id="local-6989586621682853952"><span class="annot"><span class="annottext">XLitPat GhcPs
</span><a href="#local-6989586621682853952"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682853953"><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682853953"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsString"><span class="hs-identifier hs-type">HsString</span></a></span><span> </span><span id="local-6989586621682853955"><span class="annot"><span class="annottext">XHsString GhcPs
</span><a href="#local-6989586621682853955"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621682853956"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682853956"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682853953"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853957"><span class="annot"><a href="#local-6989586621682853957"><span class="hs-identifier hs-var">ovlStr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM Bool -&gt; CpsRn Bool
forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var">liftCps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.OverloadedStrings</span></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682853957"><span class="hs-identifier hs-type">ovlStr</span></a></span><span>
</span><span id="line-564"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-type">rnPatAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853950"><span class="hs-identifier hs-type">mk</span></a></span><span>
</span><span id="line-565"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Utils.html#mkNPat"><span class="hs-identifier hs-type">mkNPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-type">noLocA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsIsString"><span class="hs-identifier hs-type">mkHsIsString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853955"><span class="hs-identifier hs-type">src</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853956"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-566"></span><span>                                      </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="#local-6989586621682853964"><span class="hs-identifier hs-type">normal_lit</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-568"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CpsRn (Pat GhcRn)
</span><a href="#local-6989586621682853964"><span class="hs-identifier hs-var">normal_lit</span></a></span><span>
</span><span id="line-569"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-570"></span><span>    </span><span id="local-6989586621682853964"><span class="annot"><span class="annottext">normal_lit :: CpsRn (Pat GhcRn)
</span><a href="#local-6989586621682853964"><span class="hs-identifier hs-var hs-var">normal_lit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ()
forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var">liftCps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLit GhcPs -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall p. HsLit p -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Pat.html#rnLit"><span class="hs-identifier hs-var">rnLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682853953"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; CpsRn (Pat GhcRn)
forall a. a -&gt; CpsRn a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLitPat GhcRn -&gt; HsLit GhcRn -&gt; Pat GhcRn
forall p. XLitPat p -&gt; HsLit p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-var">LitPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLitPat GhcPs
XLitPat GhcRn
</span><a href="#local-6989586621682853952"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLit GhcPs -&gt; HsLit GhcRn
forall (p1 :: Pass) (p2 :: Pass).
HsLit (GhcPass p1) -&gt; HsLit (GhcPass p2)
</span><a href="GHC.Hs.Lit.html#convertLit"><span class="hs-identifier hs-var">convertLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682853953"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span id="local-6989586621682853967"><span class="annot"><span class="annottext">XNPat GhcPs
</span><a href="#local-6989586621682853967"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682853968"><span class="annot"><span class="annottext">EpAnn NoEpAnns
</span><a href="#local-6989586621682853968"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682853969"><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682853969"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682853970"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcPs)
</span><a href="#local-6989586621682853970"><span class="hs-identifier hs-var">mb_neg</span></a></span></span><span> </span><span id="local-6989586621682853971"><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><a href="#local-6989586621682853971"><span class="hs-identifier hs-var">_eq</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-573"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682853972"><span class="annot"><a href="#local-6989586621682853972"><span class="hs-identifier hs-var">lit'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682853973"><span class="annot"><a href="#local-6989586621682853973"><span class="hs-identifier hs-var">mb_neg'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM ((HsOverLit GhcRn, Maybe (HsExpr GhcRn)), FreeVars)
-&gt; CpsRn (HsOverLit GhcRn, Maybe (HsExpr GhcRn))
forall a. RnM (a, FreeVars) -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-var">liftCpsFV</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM ((HsOverLit GhcRn, Maybe (HsExpr GhcRn)), FreeVars)
 -&gt; CpsRn (HsOverLit GhcRn, Maybe (HsExpr GhcRn)))
-&gt; RnM ((HsOverLit GhcRn, Maybe (HsExpr GhcRn)), FreeVars)
-&gt; CpsRn (HsOverLit GhcRn, Maybe (HsExpr GhcRn))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcPs
-&gt; RnM ((HsOverLit GhcRn, Maybe (HsExpr GhcRn)), FreeVars)
forall t.
(XXOverLit t ~ DataConCantHappen) =&gt;
HsOverLit t
-&gt; RnM ((HsOverLit GhcRn, Maybe (HsExpr GhcRn)), FreeVars)
</span><a href="GHC.Rename.Pat.html#rnOverLit"><span class="hs-identifier hs-var">rnOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682853969"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-574"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682853974"><span class="annot"><a href="#local-6989586621682853974"><span class="hs-identifier hs-var">mb_neg'</span></a></span></span><span> </span><span class="hs-comment">-- See Note [Negative zero]</span><span>
</span><span id="line-575"></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682853977"><span class="annot"><a href="#local-6989586621682853977"><span class="hs-identifier hs-var hs-var">negative</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682853978"><span class="annot"><a href="#local-6989586621682853978"><span class="hs-identifier hs-var">neg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682853979"><span class="annot"><a href="#local-6989586621682853979"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM (SyntaxExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Env.html#lookupSyntax"><span class="hs-identifier hs-var">lookupSyntax</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#negateName"><span class="hs-identifier hs-var">negateName</span></a></span><span>
</span><span id="line-576"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621682853978"><span class="hs-identifier hs-type">neg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682853979"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-577"></span><span>                  </span><span id="local-6989586621682853986"><span class="annot"><a href="#local-6989586621682853986"><span class="hs-identifier hs-var hs-var">positive</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe a, FreeVars)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe a, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-578"></span><span>              </span><span class="hs-keyword">in</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-type">liftCpsFV</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853970"><span class="hs-identifier hs-type">mb_neg</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682853973"><span class="hs-identifier hs-type">mb_neg'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-579"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe NoExtField
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (Maybe SyntaxExprRn, FreeVars)
</span><a href="#local-6989586621682853977"><span class="hs-identifier hs-var">negative</span></a></span><span>
</span><span id="line-580"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcRn)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (Maybe SyntaxExprRn, FreeVars)
</span><a href="#local-6989586621682853977"><span class="hs-identifier hs-var">negative</span></a></span><span>
</span><span id="line-581"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe NoExtField
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcRn)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (Maybe SyntaxExprRn, FreeVars)
forall {a}. IOEnv (Env TcGblEnv TcLclEnv) (Maybe a, FreeVars)
</span><a href="#local-6989586621682853986"><span class="hs-identifier hs-var">positive</span></a></span><span>
</span><span id="line-582"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">NoExtField
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (Maybe SyntaxExprRn, FreeVars)
forall {a}. IOEnv (Env TcGblEnv TcLclEnv) (Maybe a, FreeVars)
</span><a href="#local-6989586621682853986"><span class="hs-identifier hs-var">positive</span></a></span><span>
</span><span id="line-583"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682853987"><span class="annot"><a href="#local-6989586621682853987"><span class="hs-identifier hs-var">eq'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-type">liftCpsFV</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#lookupSyntax"><span class="hs-identifier hs-type">lookupSyntax</span></a></span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#eqName"><span class="hs-identifier hs-type">eqName</span></a></span><span>
</span><span id="line-584"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853967"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853968"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853972"><span class="hs-identifier hs-type">lit'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682853974"><span class="hs-identifier hs-type">mb_neg'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853987"><span class="hs-identifier hs-type">eq'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-585"></span><span>
</span><span id="line-586"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682853989"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853989"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span class="annot"><span class="annottext">XNPlusKPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682853991"><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682853991"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682853992"><span class="annot"><span class="annottext">EpAnn NoEpAnns
</span><a href="#local-6989586621682853992"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682853993"><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682853993"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682853994"><span class="annot"><a href="#local-6989586621682853994"><span class="hs-identifier hs-var">new_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; GenLocated SrcSpanAnnN RdrName -&gt; CpsRn Name
</span><a href="GHC.Rename.Pat.html#newPatName"><span class="hs-identifier hs-var">newPatName</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682853989"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; GenLocated SrcSpanAnnN RdrName
forall l l2 a.
(HasLoc l, HasAnnotation l2) =&gt;
GenLocated l a -&gt; GenLocated l2 a
</span><a href="GHC.Parser.Annotation.html#la2la"><span class="hs-identifier hs-var">la2la</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682853991"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682853996"><span class="annot"><a href="#local-6989586621682853996"><span class="hs-identifier hs-var">lit'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-type">liftCpsFV</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnOverLit"><span class="hs-identifier hs-type">rnOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853993"><span class="hs-identifier hs-type">lit</span></a></span><span> </span><span class="hs-comment">-- See Note [Negative zero]</span><span>
</span><span id="line-589"></span><span>                                                </span><span class="hs-comment">-- We skip negateName as</span><span>
</span><span id="line-590"></span><span>                                                </span><span class="hs-comment">-- negative zero doesn't make</span><span>
</span><span id="line-591"></span><span>                                                </span><span class="hs-comment">-- sense in n + k patterns</span><span>
</span><span id="line-592"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682853997"><span class="annot"><a href="#local-6989586621682853997"><span class="hs-identifier hs-var">minus</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-type">liftCpsFV</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#lookupSyntax"><span class="hs-identifier hs-type">lookupSyntax</span></a></span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#minusName"><span class="hs-identifier hs-type">minusName</span></a></span><span>
</span><span id="line-593"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682853999"><span class="annot"><a href="#local-6989586621682853999"><span class="hs-identifier hs-var">ge</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-type">liftCpsFV</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#lookupSyntax"><span class="hs-identifier hs-type">lookupSyntax</span></a></span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#geName"><span class="hs-identifier hs-type">geName</span></a></span><span>
</span><span id="line-594"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-type">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-type">nameSrcSpan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853994"><span class="hs-identifier hs-type">new_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682853994"><span class="hs-identifier hs-type">new_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>                                      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853992"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853996"><span class="hs-identifier hs-type">lit'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682853996"><span class="hs-identifier hs-type">lit'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853999"><span class="hs-identifier hs-type">ge</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853997"><span class="hs-identifier hs-type">minus</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-596"></span><span>                </span><span class="hs-comment">-- The Report says that n+k patterns must be in Integral</span><span>
</span><span id="line-597"></span><span>
</span><span id="line-598"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682854002"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854002"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="annot"><span class="annottext">XAsPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854004"><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682854004"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span id="local-6989586621682854005"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682854005"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854006"><span class="annot"><a href="#local-6989586621682854006"><span class="hs-identifier hs-var">new_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker
-&gt; GenLocated SrcSpanAnnN RdrName -&gt; CpsRn (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#newPatLName"><span class="hs-identifier hs-var">newPatLName</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854002"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854004"><span class="hs-identifier hs-var">rdr</span></a></span><span>
</span><span id="line-600"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854007"><span class="annot"><a href="#local-6989586621682854007"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-type">rnLPatAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854002"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854005"><span class="hs-identifier hs-type">pat</span></a></span><span>
</span><span id="line-601"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854006"><span class="hs-identifier hs-type">new_name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854007"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682854008"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854008"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span id="local-6989586621682854009"><span class="annot"><span class="annottext">p :: Pat GhcPs
</span><a href="#local-6989586621682854009"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span class="annot"><span class="annottext">XViewPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854011"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682854011"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621682854012"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682854012"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-604"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ()
forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var">liftCps</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854013"><span class="annot"><a href="#local-6989586621682854013"><span class="hs-identifier hs-var">vp_flag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.ViewPatterns</span></span><span>
</span><span id="line-605"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#checkErr"><span class="hs-identifier hs-type">checkErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854013"><span class="hs-identifier hs-type">vp_flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnIllegalViewPattern"><span class="hs-identifier hs-type">TcRnIllegalViewPattern</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854009"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-606"></span><span>         </span><span class="hs-comment">-- Because of the way we're arranging the recursive calls,</span><span>
</span><span id="line-607"></span><span>         </span><span class="hs-comment">-- this will be in the right context</span><span>
</span><span id="line-608"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854017"><span class="annot"><a href="#local-6989586621682854017"><span class="hs-identifier hs-var">expr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM (LHsExpr GhcRn, FreeVars) -&gt; CpsRn (LHsExpr GhcRn)
forall a. RnM (a, FreeVars) -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-var">liftCpsFV</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM (LHsExpr GhcRn, FreeVars) -&gt; CpsRn (LHsExpr GhcRn))
-&gt; RnM (LHsExpr GhcRn, FreeVars) -&gt; CpsRn (LHsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (LHsExpr GhcRn, FreeVars)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682854011"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-609"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854018"><span class="annot"><a href="#local-6989586621682854018"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-type">rnLPatAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854008"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854012"><span class="hs-identifier hs-type">pat</span></a></span><span>
</span><span id="line-610"></span><span>       </span><span class="hs-comment">-- Note: at this point the PreTcType in ty can only be a placeHolder</span><span>
</span><span id="line-611"></span><span>       </span><span class="hs-comment">-- ; return (ViewPat expr' pat' ty) }</span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span>       </span><span class="hs-comment">-- Note: we can't cook up an inverse for an arbitrary view pattern,</span><span>
</span><span id="line-614"></span><span>       </span><span class="hs-comment">-- so we pass 'Nothing'.</span><span>
</span><span id="line-615"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621682854017"><span class="hs-identifier hs-type">expr'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854018"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-616"></span><span>
</span><span id="line-617"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682854019"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854019"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="annot"><span class="annottext">XConPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854021"><span class="annot"><span class="annottext">XRec GhcPs (ConLikeP GhcPs)
</span><a href="#local-6989586621682854021"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621682854022"><span class="annot"><span class="annottext">HsConPatDetails GhcPs
</span><a href="#local-6989586621682854022"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-618"></span><span>   </span><span class="hs-comment">-- rnConPatAndThen takes care of reconstructing the pattern</span><span>
</span><span id="line-619"></span><span>   </span><span class="hs-comment">-- The pattern for the empty list needs to be replaced by an empty explicit list pattern when overloaded lists is turned on.</span><span>
</span><span id="line-620"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (ConLikeP GhcPs)
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854021"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nameRdrName"><span class="hs-identifier hs-var">nameRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#nilDataCon"><span class="hs-identifier hs-var">nilDataCon</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-621"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854025"><span class="annot"><a href="#local-6989586621682854025"><span class="hs-identifier hs-var">ol_flag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM Bool -&gt; CpsRn Bool
forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var">liftCps</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM Bool -&gt; CpsRn Bool) -&gt; RnM Bool -&gt; CpsRn Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.OverloadedLists</span></span><span>
</span><span id="line-622"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682854025"><span class="hs-identifier hs-type">ol_flag</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-type">rnPatAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854019"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-623"></span><span>                                 </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnConPatAndThen"><span class="hs-identifier hs-type">rnConPatAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854019"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854021"><span class="hs-identifier hs-type">con</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854022"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-624"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NameMaker
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; HsConPatDetails GhcPs
-&gt; CpsRn (Pat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnConPatAndThen"><span class="hs-identifier hs-var">rnConPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854019"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (ConLikeP GhcPs)
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854021"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">HsConPatDetails GhcPs
</span><a href="#local-6989586621682854022"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-625"></span><span>
</span><span id="line-626"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682854029"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854029"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="annot"><span class="annottext">XListPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854030"><span class="annot"><span class="annottext">[LPat GhcPs]
</span><a href="#local-6989586621682854030"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-627"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854031"><span class="annot"><a href="#local-6989586621682854031"><span class="hs-identifier hs-var">opt_OverloadedLists</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM Bool -&gt; CpsRn Bool
forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var">liftCps</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM Bool -&gt; CpsRn Bool) -&gt; RnM Bool -&gt; CpsRn Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.OverloadedLists</span></span><span>
</span><span id="line-628"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854032"><span class="annot"><a href="#local-6989586621682854032"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnLPatsAndThen"><span class="hs-identifier hs-type">rnLPatsAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854029"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854030"><span class="hs-identifier hs-type">pats</span></a></span><span>
</span><span id="line-629"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="annot"><a href="#local-6989586621682854031"><span class="hs-identifier hs-type">opt_OverloadedLists</span></a></span><span>
</span><span id="line-630"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854032"><span class="hs-identifier hs-type">pats'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>         </span><span class="hs-keyword">else</span><span>
</span><span id="line-632"></span><span>    </span><span class="hs-comment">-- If OverloadedLists is enabled, desugar to a view pattern.</span><span>
</span><span id="line-633"></span><span>    </span><span class="hs-comment">-- See Note [Desugaring overloaded list patterns]</span><span>
</span><span id="line-634"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854034"><span class="annot"><a href="#local-6989586621682854034"><span class="hs-identifier hs-var">to_list_name</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-type">liftCps</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#lookupSyntaxName"><span class="hs-identifier hs-type">lookupSyntaxName</span></a></span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#toListName"><span class="hs-identifier hs-type">toListName</span></a></span><span>
</span><span id="line-635"></span><span>       </span><span class="hs-comment">-- Use 'fromList' as proof of invertibility of the view pattern.</span><span>
</span><span id="line-636"></span><span>       </span><span class="hs-comment">-- See Note [Invertible view patterns] in GHC.Tc.TyCl.PatSyn</span><span>
</span><span id="line-637"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854037"><span class="annot"><a href="#local-6989586621682854037"><span class="hs-identifier hs-var">from_list_n_name</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-type">liftCps</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#lookupSyntaxName"><span class="hs-identifier hs-type">lookupSyntaxName</span></a></span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#fromListNName"><span class="hs-identifier hs-type">fromListNName</span></a></span><span>
</span><span id="line-638"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-639"></span><span>           </span><span id="local-6989586621682854039"><span class="annot"><a href="#local-6989586621682854039"><span class="hs-identifier hs-var hs-var">lit_n</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IntegralLit
forall a. Integral a =&gt; a -&gt; IntegralLit
</span><a href="GHC.Types.SourceText.html#mkIntegralLit"><span class="hs-identifier hs-var">mkIntegralLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA (Pat GhcPs)] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[LPat GhcPs]
[LocatedA (Pat GhcPs)]
</span><a href="#local-6989586621682854030"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-640"></span><span>           </span><span id="local-6989586621682854042"><span class="annot"><a href="#local-6989586621682854042"><span class="hs-identifier hs-var hs-var">hs_lit</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntegralLit -&gt; GenLocated (EpAnn AnnListItem) (HsExpr GhcRn)
forall an. NoAnn an =&gt; IntegralLit -&gt; LocatedAn an (HsExpr GhcRn)
</span><a href="GHC.Rename.Utils.html#genHsIntegralLit"><span class="hs-identifier hs-var">genHsIntegralLit</span></a></span><span> </span><span class="annot"><span class="annottext">IntegralLit
</span><a href="#local-6989586621682854039"><span class="hs-identifier hs-var">lit_n</span></a></span><span>
</span><span id="line-641"></span><span>           </span><span id="local-6989586621682854043"><span class="annot"><a href="#local-6989586621682854043"><span class="hs-identifier hs-var hs-var">inverse</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [LHsExpr GhcRn] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsApps"><span class="hs-identifier hs-var">genHsApps</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854037"><span class="hs-identifier hs-var">from_list_n_name</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated (EpAnn AnnListItem) (HsExpr GhcRn)
</span><a href="#local-6989586621682854042"><span class="hs-identifier hs-var">hs_lit</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-642"></span><span>           </span><span id="local-6989586621682854044"><span class="annot"><a href="#local-6989586621682854044"><span class="hs-identifier hs-var hs-var">rn_list_pat</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XListPat GhcRn -&gt; [LPat GhcRn] -&gt; Pat GhcRn
forall p. XListPat p -&gt; [LPat p] -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-var">ListPat</span></a></span><span> </span><span class="annot"><span class="annottext">XListPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcRn]
[LocatedA (Pat GhcRn)]
</span><a href="#local-6989586621682854032"><span class="hs-identifier hs-var">pats'</span></a></span><span>
</span><span id="line-643"></span><span>           </span><span id="local-6989586621682854045"><span class="annot"><a href="#local-6989586621682854045"><span class="hs-identifier hs-var hs-var">exp_expr</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; LHsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genLHsVar"><span class="hs-identifier hs-var">genLHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854034"><span class="hs-identifier hs-var">to_list_name</span></a></span><span>
</span><span id="line-644"></span><span>           </span><span id="local-6989586621682854046"><span class="annot"><a href="#local-6989586621682854046"><span class="hs-identifier hs-var hs-var">exp_list_pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XViewPat GhcRn -&gt; LHsExpr GhcRn -&gt; LPat GhcRn -&gt; Pat GhcRn
forall p. XViewPat p -&gt; LHsExpr p -&gt; LPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-var">ViewPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Maybe (HsExpr GhcRn)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621682854043"><span class="hs-identifier hs-var">inverse</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621682854045"><span class="hs-identifier hs-var">exp_expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcRn -&gt; LocatedA (Pat GhcRn)
forall an a. NoAnn an =&gt; a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682854044"><span class="hs-identifier hs-var">rn_list_pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-645"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#mkExpandedPat"><span class="hs-identifier hs-type">mkExpandedPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854044"><span class="hs-identifier hs-type">rn_list_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854046"><span class="hs-identifier hs-type">exp_list_pat</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682854048"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854048"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span class="annot"><span class="annottext">XTuplePat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854050"><span class="annot"><span class="annottext">[LPat GhcPs]
</span><a href="#local-6989586621682854050"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621682854051"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682854051"><span class="hs-identifier hs-var">boxed</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-648"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854052"><span class="annot"><a href="#local-6989586621682854052"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; [LPat GhcPs] -&gt; CpsRn [LPat GhcRn]
</span><a href="GHC.Rename.Pat.html#rnLPatsAndThen"><span class="hs-identifier hs-var">rnLPatsAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854048"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcPs]
</span><a href="#local-6989586621682854050"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-649"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854052"><span class="hs-identifier hs-type">pats'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854051"><span class="hs-identifier hs-type">boxed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682854053"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854053"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSumPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854055"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682854055"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621682854056"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682854056"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621682854057"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682854057"><span class="hs-identifier hs-var">arity</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854058"><span class="annot"><a href="#local-6989586621682854058"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var">rnLPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854053"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682854055"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-653"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854058"><span class="hs-identifier hs-type">pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854056"><span class="hs-identifier hs-type">alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854057"><span class="hs-identifier hs-type">arity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-655"></span><span>
</span><span id="line-656"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span id="local-6989586621682854059"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854059"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-type">SplicePat</span></a></span><span> </span><span class="annot"><span class="annottext">XSplicePat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854061"><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682854061"><span class="hs-identifier hs-var">splice</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-657"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854062"><span class="annot"><a href="#local-6989586621682854062"><span class="hs-identifier hs-var">eith</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM
  ((HsUntypedSplice GhcRn, HsUntypedSpliceResult (LPat GhcPs)),
   FreeVars)
-&gt; CpsRn
     (HsUntypedSplice GhcRn, HsUntypedSpliceResult (LPat GhcPs))
forall a. RnM (a, FreeVars) -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-var">liftCpsFV</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM
   ((HsUntypedSplice GhcRn, HsUntypedSpliceResult (LPat GhcPs)),
    FreeVars)
 -&gt; CpsRn
      (HsUntypedSplice GhcRn, HsUntypedSpliceResult (LPat GhcPs)))
-&gt; RnM
     ((HsUntypedSplice GhcRn, HsUntypedSpliceResult (LPat GhcPs)),
      FreeVars)
-&gt; CpsRn
     (HsUntypedSplice GhcRn, HsUntypedSpliceResult (LPat GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
-&gt; RnM
     ((HsUntypedSplice GhcRn, HsUntypedSpliceResult (LPat GhcPs)),
      FreeVars)
</span><a href="GHC.Rename.Splice.html#rnSplicePat"><span class="hs-identifier hs-var">rnSplicePat</span></a></span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682854061"><span class="hs-identifier hs-var">splice</span></a></span><span>
</span><span id="line-658"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682854062"><span class="hs-identifier hs-type">eith</span></a></span><span> </span><span class="hs-keyword">of</span><span>   </span><span class="hs-comment">-- See Note [rnSplicePat] in GHC.Rename.Splice</span><span>
</span><span id="line-659"></span><span>           </span><span class="hs-special">(</span><span id="local-6989586621682854063"><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><a href="#local-6989586621682854063"><span class="hs-identifier hs-var">rn_splice</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsUntypedSpliceTop"><span class="hs-identifier hs-type">HsUntypedSpliceTop</span></a></span><span> </span><span id="local-6989586621682854065"><span class="annot"><span class="annottext">ThModFinalizers
</span><a href="#local-6989586621682854065"><span class="hs-identifier hs-var">mfs</span></a></span></span><span> </span><span id="local-6989586621682854066"><span class="annot"><span class="annottext">LocatedA (Pat GhcPs)
</span><a href="#local-6989586621682854066"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- Splice was top-level and thus run, creating Pat GhcPs</span><span>
</span><span id="line-660"></span><span>               </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Pat GhcRn
LocatedA (Pat GhcRn) -&gt; Pat GhcRn
forall (p :: Pass). IsPass p =&gt; LPat (GhcPass p) -&gt; Pat (GhcPass p)
</span><a href="GHC.Hs.Pat.html#gParPat"><span class="hs-identifier hs-var">gParPat</span></a></span><span> </span><span class="annot"><span class="annottext">(LocatedA (Pat GhcRn) -&gt; Pat GhcRn)
-&gt; (LocatedA (Pat GhcRn) -&gt; LocatedA (Pat GhcRn))
-&gt; LocatedA (Pat GhcRn)
-&gt; Pat GhcRn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Pat GhcRn -&gt; Pat GhcRn)
-&gt; LocatedA (Pat GhcRn) -&gt; LocatedA (Pat GhcRn)
forall a b.
(a -&gt; b)
-&gt; GenLocated (EpAnn AnnListItem) a
-&gt; GenLocated (EpAnn AnnListItem) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HsUntypedSpliceResult (Pat GhcRn)
 -&gt; HsUntypedSplice GhcRn -&gt; Pat GhcRn)
-&gt; HsUntypedSplice GhcRn
-&gt; HsUntypedSpliceResult (Pat GhcRn)
-&gt; Pat GhcRn
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">XSplicePat GhcRn -&gt; HsUntypedSplice GhcRn -&gt; Pat GhcRn
HsUntypedSpliceResult (Pat GhcRn)
-&gt; HsUntypedSplice GhcRn -&gt; Pat GhcRn
forall p. XSplicePat p -&gt; HsUntypedSplice p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-var">SplicePat</span></a></span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><a href="#local-6989586621682854063"><span class="hs-identifier hs-var">rn_splice</span></a></span><span> </span><span class="annot"><span class="annottext">(HsUntypedSpliceResult (Pat GhcRn) -&gt; Pat GhcRn)
-&gt; (Pat GhcRn -&gt; HsUntypedSpliceResult (Pat GhcRn))
-&gt; Pat GhcRn
-&gt; Pat GhcRn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ThModFinalizers -&gt; Pat GhcRn -&gt; HsUntypedSpliceResult (Pat GhcRn)
forall thing.
ThModFinalizers -&gt; thing -&gt; HsUntypedSpliceResult thing
</span><a href="GHC.Hs.Expr.html#HsUntypedSpliceTop"><span class="hs-identifier hs-var">HsUntypedSpliceTop</span></a></span><span> </span><span class="annot"><span class="annottext">ThModFinalizers
</span><a href="#local-6989586621682854065"><span class="hs-identifier hs-var">mfs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LocatedA (Pat GhcRn) -&gt; Pat GhcRn)
-&gt; CpsRn (LocatedA (Pat GhcRn)) -&gt; CpsRn (Pat GhcRn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var">rnLPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854059"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
LocatedA (Pat GhcPs)
</span><a href="#local-6989586621682854066"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-661"></span><span>           </span><span class="hs-special">(</span><span id="local-6989586621682854070"><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><a href="#local-6989586621682854070"><span class="hs-identifier hs-var">rn_splice</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsUntypedSpliceNested"><span class="hs-identifier hs-type">HsUntypedSpliceNested</span></a></span><span> </span><span id="local-6989586621682854072"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854072"><span class="hs-identifier hs-var">splice_name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; CpsRn (Pat GhcRn)
forall a. a -&gt; CpsRn a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSplicePat GhcRn -&gt; HsUntypedSplice GhcRn -&gt; Pat GhcRn
forall p. XSplicePat p -&gt; HsUntypedSplice p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-var">SplicePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; HsUntypedSpliceResult (Pat GhcRn)
forall thing. Name -&gt; HsUntypedSpliceResult thing
</span><a href="GHC.Hs.Expr.html#HsUntypedSpliceNested"><span class="hs-identifier hs-var">HsUntypedSpliceNested</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854072"><span class="hs-identifier hs-var">splice_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><a href="#local-6989586621682854070"><span class="hs-identifier hs-var">rn_splice</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Splice was nested and thus already renamed</span><span>
</span><span id="line-662"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#EmbTyPat"><span class="hs-identifier hs-type">EmbTyPat</span></a></span><span> </span><span class="annot"><span class="annottext">XEmbTyPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854074"><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcPs)
</span><a href="#local-6989586621682854074"><span class="hs-identifier hs-var">tp</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854075"><span class="annot"><a href="#local-6989586621682854075"><span class="hs-identifier hs-var">tp'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; HsTyPat GhcPs -&gt; CpsRn (HsTyPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnHsTyPat"><span class="hs-identifier hs-var">rnHsTyPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#HsTypePatCtx"><span class="hs-identifier hs-var">HsTypePatCtx</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcPs)
HsTyPat GhcPs
</span><a href="#local-6989586621682854074"><span class="hs-identifier hs-var">tp</span></a></span><span>
</span><span id="line-666"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#EmbTyPat"><span class="hs-identifier hs-type">EmbTyPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854075"><span class="hs-identifier hs-type">tp'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-667"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnPatAndThen"><span class="hs-identifier hs-var">rnPatAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#InvisPat"><span class="hs-identifier hs-type">InvisPat</span></a></span><span> </span><span class="annot"><span class="annottext">XInvisPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854076"><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcPs)
</span><a href="#local-6989586621682854076"><span class="hs-identifier hs-var">tp</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ()
forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var">liftCps</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) () -&gt; CpsRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsTyPat GhcPs -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnMisplacedInvisPat"><span class="hs-identifier hs-var">TcRnMisplacedInvisPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcPs)
HsTyPat GhcPs
</span><a href="#local-6989586621682854076"><span class="hs-identifier hs-var">tp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-669"></span><span>         </span><span class="hs-comment">-- Invisible patterns are handled in `rnLArgPatAndThen`</span><span>
</span><span id="line-670"></span><span>         </span><span class="hs-comment">-- so unconditionally emit error here</span><span>
</span><span id="line-671"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854078"><span class="annot"><a href="#local-6989586621682854078"><span class="hs-identifier hs-var">tp'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; HsTyPat GhcPs -&gt; CpsRn (HsTyPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnHsTyPat"><span class="hs-identifier hs-var">rnHsTyPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#HsTypePatCtx"><span class="hs-identifier hs-var">HsTypePatCtx</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcPs)
HsTyPat GhcPs
</span><a href="#local-6989586621682854076"><span class="hs-identifier hs-var">tp</span></a></span><span>
</span><span id="line-672"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#InvisPat"><span class="hs-identifier hs-type">InvisPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854078"><span class="hs-identifier hs-type">tp'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span class="hs-comment">--------------------</span><span>
</span><span id="line-676"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnConPatAndThen"><span class="hs-identifier hs-type">rnConPatAndThen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span>
</span><span id="line-677"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>    </span><span class="hs-comment">-- the constructor</span><span>
</span><span id="line-678"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsConPatDetails"><span class="hs-identifier hs-type">HsConPatDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-679"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span id="rnConPatAndThen"><span class="annot"><span class="annottext">rnConPatAndThen :: NameMaker
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; HsConPatDetails GhcPs
-&gt; CpsRn (Pat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnConPatAndThen"><span class="hs-identifier hs-var hs-var">rnConPatAndThen</span></a></span></span><span> </span><span id="local-6989586621682854079"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854079"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span id="local-6989586621682854080"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854080"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span id="local-6989586621682854082"><span class="annot"><span class="annottext">[HsConPatTyArg (NoGhcTc GhcPs)]
</span><a href="#local-6989586621682854082"><span class="hs-identifier hs-var">tyargs</span></a></span></span><span> </span><span id="local-6989586621682854083"><span class="annot"><span class="annottext">[LPat GhcPs]
</span><a href="#local-6989586621682854083"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-682"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854084"><span class="annot"><a href="#local-6989586621682854084"><span class="hs-identifier hs-var">con'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; CpsRn (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#lookupConCps"><span class="hs-identifier hs-var">lookupConCps</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854080"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-683"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-type">liftCps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854085"><span class="hs-identifier hs-type">check_lang_exts</span></a></span><span>
</span><span id="line-684"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854086"><span class="annot"><a href="#local-6989586621682854086"><span class="hs-identifier hs-var">tyargs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="#local-6989586621682854087"><span class="hs-identifier hs-type">rnConPatTyArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854082"><span class="hs-identifier hs-type">tyargs</span></a></span><span>
</span><span id="line-685"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854088"><span class="annot"><a href="#local-6989586621682854088"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnLPatsAndThen"><span class="hs-identifier hs-type">rnLPatsAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854079"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854083"><span class="hs-identifier hs-type">pats</span></a></span><span>
</span><span id="line-686"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span>
</span><span id="line-687"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-688"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854084"><span class="hs-identifier hs-type">con'</span></a></span><span>
</span><span id="line-689"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854086"><span class="hs-identifier hs-type">tyargs'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854088"><span class="hs-identifier hs-type">pats'</span></a></span><span>
</span><span id="line-690"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-691"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-692"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-693"></span><span>    </span><span class="annot"><a href="#local-6989586621682854085"><span class="hs-identifier hs-type">check_lang_exts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>    </span><span id="local-6989586621682854085"><span class="annot"><span class="annottext">check_lang_exts :: IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621682854085"><span class="hs-identifier hs-var hs-var">check_lang_exts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-695"></span><span>      </span><span class="annot"><span class="annottext">Maybe (HsConPatTyArg GhcPs)
-&gt; (HsConPatTyArg GhcPs -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><span class="hs-identifier hs-var">for_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[HsConPatTyArg GhcPs] -&gt; Maybe (HsConPatTyArg GhcPs)
forall a. [a] -&gt; Maybe a
</span><span class="hs-identifier hs-var">listToMaybe</span></span><span> </span><span class="annot"><span class="annottext">[HsConPatTyArg (NoGhcTc GhcPs)]
[HsConPatTyArg GhcPs]
</span><a href="#local-6989586621682854082"><span class="hs-identifier hs-var">tyargs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((HsConPatTyArg GhcPs -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; (HsConPatTyArg GhcPs -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682854094"><span class="annot"><span class="annottext">HsConPatTyArg GhcPs
</span><a href="#local-6989586621682854094"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-696"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854095"><span class="annot"><a href="#local-6989586621682854095"><span class="hs-identifier hs-var">type_abs</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.TypeAbstractions</span></span><span>
</span><span id="line-697"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854096"><span class="annot"><a href="#local-6989586621682854096"><span class="hs-identifier hs-var">type_app</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-type">xoptM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LangExt.TypeApplications</span></span><span>
</span><span id="line-698"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854098"><span class="annot"><a href="#local-6989586621682854098"><span class="hs-identifier hs-var">scoped_tvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-type">xoptM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LangExt.ScopedTypeVariables</span></span><span>
</span><span id="line-699"></span><span>           </span><span class="hs-comment">-- See Note [Deprecated type abstractions in constructor patterns]</span><span>
</span><span id="line-700"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621682854095"><span class="hs-identifier hs-type">type_abs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621682854096"><span class="hs-identifier hs-type">type_app</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><a href="#local-6989586621682854098"><span class="hs-identifier hs-type">scoped_tvs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-type">addDiagnostic</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnDeprecatedInvisTyArgInConPat"><span class="hs-identifier hs-type">TcRnDeprecatedInvisTyArgInConPat</span></a></span><span>
</span><span id="line-702"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErrTc"><span class="hs-identifier hs-type">addErrTc</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnTypeApplicationsDisabled"><span class="hs-identifier hs-type">TcRnTypeApplicationsDisabled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TypeApplicationInPattern"><span class="hs-identifier hs-type">TypeApplicationInPattern</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854094"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span>    </span><span id="local-6989586621682854087"><span class="annot"><span class="annottext">rnConPatTyArg :: HsConPatTyArg GhcPs -&gt; CpsRn (HsConPatTyArg GhcRn)
</span><a href="#local-6989586621682854087"><span class="hs-identifier hs-var hs-var">rnConPatTyArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsConPatTyArg"><span class="hs-identifier hs-type">HsConPatTyArg</span></a></span><span> </span><span class="annot"><span class="annottext">XConPatTyArg GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854109"><span class="annot"><span class="annottext">HsTyPat GhcPs
</span><a href="#local-6989586621682854109"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-706"></span><span>      </span><span id="local-6989586621682854110"><span class="annot"><a href="#local-6989586621682854110"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; HsTyPat GhcPs -&gt; CpsRn (HsTyPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnHsTyPat"><span class="hs-identifier hs-var">rnHsTyPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#HsTypePatCtx"><span class="hs-identifier hs-var">HsTypePatCtx</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyPat GhcPs
</span><a href="#local-6989586621682854109"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-707"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsConPatTyArg"><span class="hs-identifier hs-type">HsConPatTyArg</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854110"><span class="hs-identifier hs-type">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnConPatAndThen"><span class="hs-identifier hs-var">rnConPatAndThen</span></a></span><span> </span><span id="local-6989586621682854111"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854111"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span id="local-6989586621682854112"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854112"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621682854114"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682854114"><span class="hs-identifier hs-var">pat1</span></a></span></span><span> </span><span id="local-6989586621682854115"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682854115"><span class="hs-identifier hs-var">pat2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-710"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854116"><span class="annot"><a href="#local-6989586621682854116"><span class="hs-identifier hs-var">con'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; CpsRn (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#lookupConCps"><span class="hs-identifier hs-var">lookupConCps</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854112"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-711"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854117"><span class="annot"><a href="#local-6989586621682854117"><span class="hs-identifier hs-var">pat1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-type">rnLPatAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854111"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854114"><span class="hs-identifier hs-type">pat1</span></a></span><span>
</span><span id="line-712"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854118"><span class="annot"><a href="#local-6989586621682854118"><span class="hs-identifier hs-var">pat2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-type">rnLPatAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854111"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854115"><span class="hs-identifier hs-type">pat2</span></a></span><span>
</span><span id="line-713"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854119"><span class="annot"><a href="#local-6989586621682854119"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-type">liftCps</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier hs-type">lookupFixityRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854116"><span class="hs-identifier hs-type">con'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-714"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-type">liftCps</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#mkConOpPatRn"><span class="hs-identifier hs-type">mkConOpPatRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854116"><span class="hs-identifier hs-type">con'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854119"><span class="hs-identifier hs-type">fixity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854117"><span class="hs-identifier hs-type">pat1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854118"><span class="hs-identifier hs-type">pat2'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-715"></span><span>
</span><span id="line-716"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnConPatAndThen"><span class="hs-identifier hs-var">rnConPatAndThen</span></a></span><span> </span><span id="local-6989586621682854122"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854122"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span id="local-6989586621682854123"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854123"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621682854125"><span class="annot"><span class="annottext">HsRecFields GhcPs (LPat GhcPs)
</span><a href="#local-6989586621682854125"><span class="hs-identifier hs-var">rpats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-717"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854126"><span class="annot"><a href="#local-6989586621682854126"><span class="hs-identifier hs-var">con'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; CpsRn (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#lookupConCps"><span class="hs-identifier hs-var">lookupConCps</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854123"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-718"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854127"><span class="annot"><a href="#local-6989586621682854127"><span class="hs-identifier hs-var">rpats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rnHsRecPatsAndThen"><span class="hs-identifier hs-type">rnHsRecPatsAndThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854122"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854126"><span class="hs-identifier hs-type">con'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854125"><span class="hs-identifier hs-type">rpats</span></a></span><span>
</span><span id="line-719"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span>
</span><span id="line-720"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-721"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854126"><span class="hs-identifier hs-type">con'</span></a></span><span>
</span><span id="line-722"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854127"><span class="hs-identifier hs-type">rpats'</span></a></span><span>
</span><span id="line-723"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-724"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-725"></span><span>
</span><span id="line-726"></span><span class="hs-comment">{- Note [Deprecated type abstractions in constructor patterns]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Type abstractions in constructor patterns allow the user to bind
existential type variables:

    import Type.Reflection (Typeable, typeRep)
    data Ex = forall e. (Typeable e, Show e) =&gt; MkEx e
    showEx (MkEx @e a) = show a ++ &quot; :: &quot; ++ show (typeRep @e)

Note the pattern `MkEx @e a`, and specifically the `@e` binder.

For historical reasons, using this feature only required TypeApplications
and ScopedTypeVariables to be enabled. As per GHC Proposal #448 (and especially
its amendment #604) we are now transitioning towards guarding this feature
behind TypeAbstractions instead.

As a compatibility measure, we continue to support old programs that use
TypeApplications with ScopedTypeVariables instead of TypeAbstractions,
but emit the appropriate compatibility warning, -Wdeprecated-type-abstractions.
This warning is scheduled to become an error in GHC 9.14, at which point
we can simply require TypeAbstractions.
-}</span><span>
</span><span id="line-748"></span><span>
</span><span id="line-749"></span><span class="annot"><a href="GHC.Rename.Pat.html#checkUnusedRecordWildcardCps"><span class="hs-identifier hs-type">checkUnusedRecordWildcardCps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-750"></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Utils.html#ImplicitFieldBinders"><span class="hs-identifier hs-type">ImplicitFieldBinders</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-751"></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-752"></span><span id="checkUnusedRecordWildcardCps"><span class="annot"><span class="annottext">checkUnusedRecordWildcardCps :: SrcSpan -&gt; Maybe [ImplicitFieldBinders] -&gt; CpsRn ()
</span><a href="GHC.Rename.Pat.html#checkUnusedRecordWildcardCps"><span class="hs-identifier hs-var hs-var">checkUnusedRecordWildcardCps</span></a></span></span><span> </span><span id="local-6989586621682854130"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682854130"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682854131"><span class="annot"><span class="annottext">Maybe [ImplicitFieldBinders]
</span><a href="#local-6989586621682854131"><span class="hs-identifier hs-var">dotdot_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-753"></span><span>  </span><span class="annot"><span class="annottext">(forall r. (() -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn ()
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-var">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682854135"><span class="annot"><span class="annottext">() -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682854135"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-754"></span><span>                    </span><span class="hs-special">(</span><span id="local-6989586621682854136"><span class="annot"><a href="#local-6989586621682854136"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854137"><span class="annot"><a href="#local-6989586621682854137"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">() -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682854135"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-755"></span><span>                    </span><span class="annot"><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier hs-type">checkUnusedRecordWildcard</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854130"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854137"><span class="hs-identifier hs-type">fvs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854131"><span class="hs-identifier hs-type">dotdot_names</span></a></span><span>
</span><span id="line-756"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854136"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682854137"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-757"></span><span>
</span><span id="line-758"></span><span class="hs-comment">--------------------</span><span>
</span><span id="line-759"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnHsRecPatsAndThen"><span class="hs-identifier hs-type">rnHsRecPatsAndThen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span>
</span><span id="line-760"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>      </span><span class="hs-comment">-- Constructor</span><span>
</span><span id="line-761"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-762"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span id="rnHsRecPatsAndThen"><span class="annot"><span class="annottext">rnHsRecPatsAndThen :: NameMaker
-&gt; LocatedN Name
-&gt; HsRecFields GhcPs (LPat GhcPs)
-&gt; CpsRn (HsRecFields GhcRn (LPat GhcRn))
</span><a href="GHC.Rename.Pat.html#rnHsRecPatsAndThen"><span class="hs-identifier hs-var hs-var">rnHsRecPatsAndThen</span></a></span></span><span> </span><span id="local-6989586621682854138"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854138"><span class="hs-identifier hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854139"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854139"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>     </span><span id="local-6989586621682854140"><span class="annot"><span class="annottext">hs_rec_fields :: HsRecFields GhcPs (LPat GhcPs)
</span><a href="#local-6989586621682854140"><span class="hs-identifier hs-var">hs_rec_fields</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rec_dotdot :: forall p arg. HsRecFields p arg -&gt; Maybe (XRec p RecFieldsDotDot)
</span><a href="Language.Haskell.Syntax.Pat.html#rec_dotdot"><span class="hs-identifier hs-var">rec_dotdot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854143"><span class="annot"><span class="annottext">Maybe (XRec GhcPs RecFieldsDotDot)
</span><a href="#local-6989586621682854143"><span class="hs-identifier hs-var">dd</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854144"><span class="annot"><a href="#local-6989586621682854144"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM
  ([GenLocated
      (EpAnn AnnListItem)
      (HsFieldBind
         (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
         (LocatedA (Pat GhcPs)))],
   FreeVars)
-&gt; CpsRn
     [GenLocated
        (EpAnn AnnListItem)
        (HsFieldBind
           (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
           (LocatedA (Pat GhcPs)))]
forall a. RnM (a, FreeVars) -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-var">liftCpsFV</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM
   ([GenLocated
       (EpAnn AnnListItem)
       (HsFieldBind
          (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
          (LocatedA (Pat GhcPs)))],
    FreeVars)
 -&gt; CpsRn
      [GenLocated
         (EpAnn AnnListItem)
         (HsFieldBind
            (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
            (LocatedA (Pat GhcPs)))])
-&gt; RnM
     ([GenLocated
         (EpAnn AnnListItem)
         (HsFieldBind
            (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
            (LocatedA (Pat GhcPs)))],
      FreeVars)
-&gt; CpsRn
     [GenLocated
        (EpAnn AnnListItem)
        (HsFieldBind
           (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
           (LocatedA (Pat GhcPs)))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsRecFieldContext
-&gt; (SrcSpan -&gt; RdrName -&gt; Pat GhcPs)
-&gt; HsRecFields GhcPs (LocatedA (Pat GhcPs))
-&gt; RnM ([LHsRecField GhcRn (LocatedA (Pat GhcPs))], FreeVars)
forall arg.
HsRecFieldContext
-&gt; (SrcSpan -&gt; RdrName -&gt; arg)
-&gt; HsRecFields GhcPs (LocatedA arg)
-&gt; RnM ([LHsRecField GhcRn (LocatedA arg)], FreeVars)
</span><a href="GHC.Rename.Pat.html#rnHsRecFields"><span class="hs-identifier hs-var">rnHsRecFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; HsRecFieldContext
</span><a href="GHC.Rename.Pat.html#HsRecFieldPat"><span class="hs-identifier hs-var">HsRecFieldPat</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854139"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; IdP GhcPs -&gt; Pat GhcPs
SrcSpan -&gt; RdrName -&gt; Pat GhcPs
forall {p} {l}.
(XVarPat p ~ NoExtField, XRec p (IdP p) ~ GenLocated l (IdP p),
 HasAnnotation l) =&gt;
SrcSpan -&gt; IdP p -&gt; Pat p
</span><a href="#local-6989586621682854146"><span class="hs-identifier hs-var">mkVarPat</span></a></span><span>
</span><span id="line-766"></span><span>                                            </span><span class="annot"><span class="annottext">HsRecFields GhcPs (LPat GhcPs)
HsRecFields GhcPs (LocatedA (Pat GhcPs))
</span><a href="#local-6989586621682854140"><span class="hs-identifier hs-var">hs_rec_fields</span></a></span><span>
</span><span id="line-767"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854147"><span class="annot"><a href="#local-6989586621682854147"><span class="hs-identifier hs-var">flds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="#local-6989586621682854148"><span class="hs-identifier hs-type">rn_field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854144"><span class="hs-identifier hs-type">flds</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`zip`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-number">1</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621682854149"><span class="hs-identifier hs-type">check_unused_wildcard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Utils.html#lHsRecFieldsImplicits"><span class="hs-identifier hs-type">lHsRecFieldsImplicits</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854147"><span class="hs-identifier hs-type">flds'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682854143"><span class="hs-identifier hs-type">dd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#rec_flds"><span class="hs-identifier hs-var">rec_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854147"><span class="hs-identifier hs-type">flds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#rec_dotdot"><span class="hs-identifier hs-var">rec_dotdot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854143"><span class="hs-identifier hs-type">dd</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-770"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-771"></span><span>    </span><span id="local-6989586621682854146"><span class="annot"><span class="annottext">mkVarPat :: SrcSpan -&gt; IdP p -&gt; Pat p
</span><a href="#local-6989586621682854146"><span class="hs-identifier hs-var hs-var">mkVarPat</span></a></span></span><span> </span><span id="local-6989586621682854158"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682854158"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682854159"><span class="annot"><span class="annottext">IdP p
</span><a href="#local-6989586621682854159"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XVarPat p -&gt; XRec p (IdP p) -&gt; Pat p
forall p. XVarPat p -&gt; LIdP p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat p
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">l -&gt; IdP p -&gt; GenLocated l (IdP p)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; l
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682854158"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IdP p
</span><a href="#local-6989586621682854159"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-772"></span><span>    </span><span id="local-6989586621682854148"><span class="annot"><span class="annottext">rn_field :: (GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
      (LocatedA (Pat GhcPs))),
 Int)
-&gt; CpsRn
     (GenLocated
        (EpAnn AnnListItem)
        (HsFieldBind
           (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
           (LocatedA (Pat GhcRn))))
</span><a href="#local-6989586621682854148"><span class="hs-identifier hs-var hs-var">rn_field</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854160"><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854160"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682854161"><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
  (LocatedA (Pat GhcPs))
</span><a href="#local-6989586621682854161"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854162"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682854162"><span class="hs-identifier hs-var">n'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-773"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854163"><span class="annot"><a href="#local-6989586621682854163"><span class="hs-identifier hs-var">arg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; CpsRn (LPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnLPatAndThen"><span class="hs-identifier hs-var">rnLPatAndThen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (GenLocated EpaLocation RecFieldsDotDot)
-&gt; NameMaker -&gt; RecFieldsDotDot -&gt; NameMaker
forall {a} {l}.
Ord a =&gt;
Maybe (GenLocated l a) -&gt; NameMaker -&gt; a -&gt; NameMaker
</span><a href="#local-6989586621682854164"><span class="hs-identifier hs-var">nested_mk</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcPs RecFieldsDotDot)
Maybe (GenLocated EpaLocation RecFieldsDotDot)
</span><a href="#local-6989586621682854143"><span class="hs-identifier hs-var">dd</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854138"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; RecFieldsDotDot
</span><a href="Language.Haskell.Syntax.Pat.html#RecFieldsDotDot"><span class="hs-identifier hs-var">RecFieldsDotDot</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682854162"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
  (LocatedA (Pat GhcPs))
-&gt; LocatedA (Pat GhcPs)
forall lhs rhs. HsFieldBind lhs rhs -&gt; rhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn))
  (LocatedA (Pat GhcPs))
</span><a href="#local-6989586621682854161"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-774"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854160"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854161"><span class="hs-identifier hs-type">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854163"><span class="hs-identifier hs-type">arg'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-775"></span><span>
</span><span id="line-776"></span><span>    </span><span id="local-6989586621682854167"><span class="annot"><span class="annottext">loc :: SrcSpan
</span><a href="#local-6989586621682854167"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; (GenLocated EpaLocation RecFieldsDotDot -&gt; SrcSpan)
-&gt; Maybe (GenLocated EpaLocation RecFieldsDotDot)
-&gt; SrcSpan
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated EpaLocation RecFieldsDotDot -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcPs RecFieldsDotDot)
Maybe (GenLocated EpaLocation RecFieldsDotDot)
</span><a href="#local-6989586621682854143"><span class="hs-identifier hs-var">dd</span></a></span><span>
</span><span id="line-777"></span><span>
</span><span id="line-778"></span><span>    </span><span class="hs-comment">-- Don't warn for let P{..} = ... in ...</span><span>
</span><span id="line-779"></span><span>    </span><span id="local-6989586621682854149"><span class="annot"><span class="annottext">check_unused_wildcard :: Maybe [ImplicitFieldBinders] -&gt; CpsRn ()
</span><a href="#local-6989586621682854149"><span class="hs-identifier hs-var hs-var">check_unused_wildcard</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854138"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-780"></span><span>                              </span><span class="annot"><a href="GHC.Rename.Pat.html#LetMk"><span class="hs-identifier hs-type">LetMk</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CpsRn () -&gt; Maybe [ImplicitFieldBinders] -&gt; CpsRn ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; CpsRn ()
forall a. a -&gt; CpsRn a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-781"></span><span>                              </span><span class="annot"><a href="GHC.Rename.Pat.html#LamMk"><span class="hs-identifier hs-type">LamMk</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; Maybe [ImplicitFieldBinders] -&gt; CpsRn ()
</span><a href="GHC.Rename.Pat.html#checkUnusedRecordWildcardCps"><span class="hs-identifier hs-var">checkUnusedRecordWildcardCps</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682854167"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-782"></span><span>
</span><span id="line-783"></span><span>        </span><span class="hs-comment">-- Suppress unused-match reporting for fields introduced by &quot;..&quot;</span><span>
</span><span id="line-784"></span><span>    </span><span id="local-6989586621682854164"><span class="annot"><span class="annottext">nested_mk :: Maybe (GenLocated l a) -&gt; NameMaker -&gt; a -&gt; NameMaker
</span><a href="#local-6989586621682854164"><span class="hs-identifier hs-var hs-var">nested_mk</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated l a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span id="local-6989586621682854177"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854177"><span class="hs-identifier hs-var">mk</span></a></span></span><span>                    </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854177"><span class="hs-identifier hs-var">mk</span></a></span><span>
</span><span id="line-785"></span><span>    </span><span class="annot"><a href="#local-6989586621682854164"><span class="hs-identifier hs-var">nested_mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">GenLocated l a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682854178"><span class="annot"><span class="annottext">mk :: NameMaker
</span><a href="#local-6989586621682854178"><span class="hs-identifier hs-var">mk</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#LetMk"><span class="hs-identifier hs-type">LetMk</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>         </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621682854178"><span class="hs-identifier hs-var">mk</span></a></span><span>
</span><span id="line-786"></span><span>    </span><span class="annot"><a href="#local-6989586621682854164"><span class="hs-identifier hs-var">nested_mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated l a -&gt; a
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621682854179"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682854179"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#LamMk"><span class="hs-identifier hs-type">LamMk</span></a></span><span> </span><span id="local-6989586621682854180"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854180"><span class="hs-identifier hs-var">report_unused</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682854181"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682854181"><span class="hs-identifier hs-var">n'</span></a></span></span><span>
</span><span id="line-787"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#LamMk"><span class="hs-identifier hs-var">LamMk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854180"><span class="hs-identifier hs-var">report_unused</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682854181"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682854179"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>
</span><span id="line-789"></span><span>
</span><span id="line-790"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
              Generating code for HsPatExpanded
      See Note [Handling overloaded and rebindable constructs]
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-796"></span><span>
</span><span id="line-797"></span><span class="hs-comment">-- | Build a 'HsPatExpansion' out of an extension constructor,</span><span>
</span><span id="line-798"></span><span class="hs-comment">--   and the two components of the expansion: original and</span><span>
</span><span id="line-799"></span><span class="hs-comment">--   desugared patterns</span><span>
</span><span id="line-800"></span><span class="annot"><a href="GHC.Rename.Pat.html#mkExpandedPat"><span class="hs-identifier hs-type">mkExpandedPat</span></a></span><span>
</span><span id="line-801"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ source pattern</span></span><span>
</span><span id="line-802"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ expanded pattern</span></span><span>
</span><span id="line-803"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ suitably wrapped 'HsPatExpansion'</span></span><span>
</span><span id="line-804"></span><span id="mkExpandedPat"><span class="annot"><span class="annottext">mkExpandedPat :: Pat GhcRn -&gt; Pat GhcRn -&gt; Pat GhcRn
</span><a href="GHC.Rename.Pat.html#mkExpandedPat"><span class="hs-identifier hs-var hs-var">mkExpandedPat</span></a></span></span><span> </span><span id="local-6989586621682854183"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682854183"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682854184"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682854184"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XXPat GhcRn -&gt; Pat GhcRn
forall p. XXPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-var">XPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Pat GhcRn -&gt; HsPatExpansion (Pat GhcRn) (Pat GhcRn)
forall a b. a -&gt; b -&gt; HsPatExpansion a b
</span><a href="GHC.Hs.Pat.html#HsPatExpanded"><span class="hs-identifier hs-var">HsPatExpanded</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682854183"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682854184"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
        Record fields
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span class="hs-keyword">data</span><span> </span><span id="HsRecFieldContext"><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldContext"><span class="hs-identifier hs-var">HsRecFieldContext</span></a></span></span><span>
</span><span id="line-815"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HsRecFieldCon"><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldCon"><span class="hs-identifier hs-var">HsRecFieldCon</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-816"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HsRecFieldPat"><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldPat"><span class="hs-identifier hs-var">HsRecFieldPat</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-817"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HsRecFieldUpd"><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldUpd"><span class="hs-identifier hs-var">HsRecFieldUpd</span></a></span></span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnHsRecFields"><span class="hs-identifier hs-type">rnHsRecFields</span></a></span><span>
</span><span id="line-820"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682853118"><span class="annot"><a href="#local-6989586621682853118"><span class="hs-identifier hs-type">arg</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-821"></span><span>       </span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldContext"><span class="hs-identifier hs-type">HsRecFieldContext</span></a></span><span>
</span><span id="line-822"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682853118"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span>         </span><span class="hs-comment">-- When punning, use this to build a new field</span><span>
</span><span id="line-824"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853118"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853118"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span class="hs-comment">-- This surprisingly complicated pass</span><span>
</span><span id="line-828"></span><span class="hs-comment">--   a) looks up the field name (possibly using disambiguation)</span><span>
</span><span id="line-829"></span><span class="hs-comment">--   b) fills in puns and dot-dot stuff</span><span>
</span><span id="line-830"></span><span class="hs-comment">-- When we've finished, we've renamed the LHS, but not the RHS,</span><span>
</span><span id="line-831"></span><span class="hs-comment">-- of each x=e binding</span><span>
</span><span id="line-832"></span><span class="hs-comment">--</span><span>
</span><span id="line-833"></span><span class="hs-comment">-- This is used for record construction and pattern-matching, but not updates.</span><span>
</span><span id="line-834"></span><span>
</span><span id="line-835"></span><span id="rnHsRecFields"><span class="annot"><span class="annottext">rnHsRecFields :: forall arg.
HsRecFieldContext
-&gt; (SrcSpan -&gt; RdrName -&gt; arg)
-&gt; HsRecFields GhcPs (LocatedA arg)
-&gt; RnM ([LHsRecField GhcRn (LocatedA arg)], FreeVars)
</span><a href="GHC.Rename.Pat.html#rnHsRecFields"><span class="hs-identifier hs-var hs-var">rnHsRecFields</span></a></span></span><span> </span><span id="local-6989586621682854244"><span class="annot"><span class="annottext">HsRecFieldContext
</span><a href="#local-6989586621682854244"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621682854245"><span class="annot"><span class="annottext">SrcSpan -&gt; RdrName -&gt; arg
</span><a href="#local-6989586621682854245"><span class="hs-identifier hs-var">mk_arg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rec_flds :: forall p arg. HsRecFields p arg -&gt; [LHsRecField p arg]
</span><a href="Language.Haskell.Syntax.Pat.html#rec_flds"><span class="hs-identifier hs-var">rec_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854246"><span class="annot"><span class="annottext">[LHsRecField GhcPs (LocatedA arg)]
</span><a href="#local-6989586621682854246"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rec_dotdot :: forall p arg. HsRecFields p arg -&gt; Maybe (XRec p RecFieldsDotDot)
</span><a href="Language.Haskell.Syntax.Pat.html#rec_dotdot"><span class="hs-identifier hs-var">rec_dotdot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854247"><span class="annot"><span class="annottext">Maybe (XRec GhcPs RecFieldsDotDot)
</span><a href="#local-6989586621682854247"><span class="hs-identifier hs-var">dotdot</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-836"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854248"><span class="annot"><a href="#local-6989586621682854248"><span class="hs-identifier hs-var">pun_ok</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.NamedFieldPuns</span></span><span>
</span><span id="line-837"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854250"><span class="annot"><a href="#local-6989586621682854250"><span class="hs-identifier hs-var">disambig_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-type">xoptM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LangExt.DisambiguateRecordFields</span></span><span>
</span><span id="line-838"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854252"><span class="annot"><a href="#local-6989586621682854252"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854250"><span class="hs-identifier hs-var">disambig_ok</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; Maybe Name -&gt; Maybe Name
forall a b. Maybe a -&gt; Maybe b -&gt; Maybe b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621682854253"><span class="hs-identifier hs-var">mb_con</span></a></span><span>
</span><span id="line-839"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854254"><span class="annot"><a href="#local-6989586621682854254"><span class="hs-identifier hs-var">flds1</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854255"><span class="hs-identifier hs-type">rn_fld</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854248"><span class="hs-identifier hs-type">pun_ok</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854252"><span class="hs-identifier hs-type">parent</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854246"><span class="hs-identifier hs-type">flds</span></a></span><span>
</span><span id="line-840"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#dupFieldErr"><span class="hs-identifier hs-type">dupFieldErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854244"><span class="hs-identifier hs-type">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854258"><span class="hs-identifier hs-type">dup_flds</span></a></span><span>
</span><span id="line-841"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854259"><span class="annot"><a href="#local-6989586621682854259"><span class="hs-identifier hs-var">dotdot_flds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682854260"><span class="hs-identifier hs-type">rn_dotdot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854247"><span class="hs-identifier hs-type">dotdot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854253"><span class="hs-identifier hs-type">mb_con</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854254"><span class="hs-identifier hs-type">flds1</span></a></span><span>
</span><span id="line-842"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854261"><span class="annot"><a href="#local-6989586621682854261"><span class="hs-identifier hs-var hs-var">all_flds</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
-&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
</span><a href="#local-6989586621682854259"><span class="hs-identifier hs-var">dotdot_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
</span><a href="#local-6989586621682854254"><span class="hs-identifier hs-var">flds1</span></a></span><span>
</span><span id="line-843"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
</span><a href="#local-6989586621682854254"><span class="hs-identifier hs-var">flds1</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
-&gt; [GenLocated
      (EpAnn AnnListItem)
      (HsFieldBind
         (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
-&gt; [GenLocated
      (EpAnn AnnListItem)
      (HsFieldBind
         (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
</span><a href="#local-6989586621682854259"><span class="hs-identifier hs-var">dotdot_flds</span></a></span><span>
</span><span id="line-844"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854261"><span class="hs-identifier hs-type">all_flds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#mkFVs"><span class="hs-identifier hs-type">mkFVs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#getFieldIds"><span class="hs-identifier hs-type">getFieldIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854261"><span class="hs-identifier hs-type">all_flds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-845"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-846"></span><span>    </span><span id="local-6989586621682854253"><span class="annot"><span class="annottext">mb_con :: Maybe Name
</span><a href="#local-6989586621682854253"><span class="hs-identifier hs-var hs-var">mb_con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsRecFieldContext
</span><a href="#local-6989586621682854244"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-847"></span><span>                </span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldCon"><span class="hs-identifier hs-type">HsRecFieldCon</span></a></span><span> </span><span id="local-6989586621682854265"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854265"><span class="hs-identifier hs-var">con</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854265"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-848"></span><span>                </span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldPat"><span class="hs-identifier hs-type">HsRecFieldPat</span></a></span><span> </span><span id="local-6989586621682854266"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854266"><span class="hs-identifier hs-var">con</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854266"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-849"></span><span>                </span><span class="annot"><span class="annottext">HsRecFieldContext
</span><a href="GHC.Rename.Pat.html#HsRecFieldUpd"><span class="hs-identifier hs-var">HsRecFieldUpd</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-850"></span><span>
</span><span id="line-851"></span><span>    </span><span class="annot"><a href="#local-6989586621682854255"><span class="hs-identifier hs-type">rn_fld</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853118"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-852"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853118"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-853"></span><span>    </span><span id="local-6989586621682854255"><span class="annot"><span class="annottext">rn_fld :: Bool
-&gt; Maybe Name
-&gt; LHsRecField GhcPs (LocatedA arg)
-&gt; RnM (XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg)))
</span><a href="#local-6989586621682854255"><span class="hs-identifier hs-var hs-var">rn_fld</span></a></span></span><span> </span><span id="local-6989586621682854267"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854267"><span class="hs-identifier hs-var">pun_ok</span></a></span></span><span> </span><span id="local-6989586621682854268"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621682854268"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854269"><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854269"><span class="hs-identifier hs-var">l</span></a></span></span><span>
</span><span id="line-854"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span>
</span><span id="line-855"></span><span>                              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hfbLHS :: forall lhs rhs. HsFieldBind lhs rhs -&gt; lhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbLHS"><span class="hs-identifier hs-var">hfbLHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854272"><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854272"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">XCFieldOcc GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854274"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682854274"><span class="hs-identifier hs-var">ll</span></a></span></span><span> </span><span id="local-6989586621682854275"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854275"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-856"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbRHS :: forall lhs rhs. HsFieldBind lhs rhs -&gt; rhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854276"><span class="annot"><span class="annottext">LocatedA arg
</span><a href="#local-6989586621682854276"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-857"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbPun :: forall lhs rhs. HsFieldBind lhs rhs -&gt; Bool
</span><a href="Language.Haskell.Syntax.Pat.html#hfbPun"><span class="hs-identifier hs-var">hfbPun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854278"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854278"><span class="hs-identifier hs-var">pun</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-858"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854279"><span class="annot"><a href="#local-6989586621682854279"><span class="hs-identifier hs-var">sel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem -&gt; RnM Name -&gt; RnM Name
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854272"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM Name -&gt; RnM Name) -&gt; RnM Name -&gt; RnM Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Name -&gt; RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Env.html#lookupRecFieldOcc"><span class="hs-identifier hs-var">lookupRecFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621682854268"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854275"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-859"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854281"><span class="annot"><a href="#local-6989586621682854281"><span class="hs-identifier hs-var hs-var">arg_rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName) -&gt; OccName -&gt; RdrName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; OccName -&gt; OccName
OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#recFieldToVarOcc"><span class="hs-identifier hs-var">recFieldToVarOcc</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; OccName) -&gt; OccName -&gt; OccName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
forall name. HasOccName name =&gt; name -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-var">occName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854279"><span class="hs-identifier hs-var">sel</span></a></span><span>
</span><span id="line-860"></span><span>                 </span><span class="hs-comment">-- Discard any module qualifier (#11662)</span><span>
</span><span id="line-861"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854285"><span class="annot"><a href="#local-6989586621682854285"><span class="hs-identifier hs-var">arg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682854278"><span class="hs-identifier hs-type">pun</span></a></span><span>
</span><span id="line-862"></span><span>                     </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#checkErr"><span class="hs-identifier hs-type">checkErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854267"><span class="hs-identifier hs-type">pun_ok</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-863"></span><span>                                </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnIllegalFieldPunning"><span class="hs-identifier hs-type">TcRnIllegalFieldPunning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854272"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854281"><span class="hs-identifier hs-type">arg_rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-864"></span><span>                             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-type">l2l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854272"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-865"></span><span>                                 </span><span class="annot"><a href="#local-6989586621682854245"><span class="hs-identifier hs-type">mk_arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854272"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854281"><span class="hs-identifier hs-type">arg_rdr</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-866"></span><span>                     </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682854276"><span class="hs-identifier hs-type">arg</span></a></span><span>
</span><span id="line-867"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854269"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-868"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span>
</span><span id="line-869"></span><span>                 </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbAnn"><span class="hs-identifier hs-var">hfbAnn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span>
</span><span id="line-870"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbLHS"><span class="hs-identifier hs-var">hfbLHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854272"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854279"><span class="hs-identifier hs-type">sel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854274"><span class="hs-identifier hs-type">ll</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854281"><span class="hs-identifier hs-type">arg_rdr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-871"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854285"><span class="hs-identifier hs-type">arg'</span></a></span><span>
</span><span id="line-872"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbPun"><span class="hs-identifier hs-var">hfbPun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854278"><span class="hs-identifier hs-type">pun</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-873"></span><span>
</span><span id="line-874"></span><span>    </span><span class="annot"><a href="#local-6989586621682854260"><span class="hs-identifier hs-type">rn_dotdot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedE"><span class="hs-identifier hs-type">LocatedE</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#RecFieldsDotDot"><span class="hs-identifier hs-type">RecFieldsDotDot</span></a></span><span class="hs-special">)</span><span>     </span><span class="hs-comment">-- See Note [DotDot fields] in GHC.Hs.Pat</span><span>
</span><span id="line-875"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-comment">-- The constructor (Nothing for an</span><span>
</span><span id="line-876"></span><span>                                </span><span class="hs-comment">--    out of scope constructor)</span><span>
</span><span id="line-877"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853118"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- Explicit fields</span><span>
</span><span id="line-878"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853118"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Field Labels we need to fill in</span><span>
</span><span id="line-879"></span><span>    </span><span id="local-6989586621682854260"><span class="annot"><span class="annottext">rn_dotdot :: Maybe (GenLocated EpaLocation RecFieldsDotDot)
-&gt; Maybe Name
-&gt; [XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
-&gt; RnM [XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
</span><a href="#local-6989586621682854260"><span class="hs-identifier hs-var hs-var">rn_dotdot</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854291"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682854291"><span class="hs-identifier hs-var">loc_e</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#RecFieldsDotDot"><span class="hs-identifier hs-type">RecFieldsDotDot</span></a></span><span> </span><span id="local-6989586621682854292"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682854292"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682854293"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854293"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682854294"><span class="annot"><span class="annottext">[XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
</span><a href="#local-6989586621682854294"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="hs-comment">-- &quot;..&quot; on record construction / pat match</span><span>
</span><span id="line-880"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Builtin.Names.html#isUnboundName"><span class="hs-identifier hs-var">isUnboundName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854293"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- This test is because if the constructor</span><span>
</span><span id="line-881"></span><span>                                </span><span class="hs-comment">-- isn't in scope the constructor lookup will add</span><span>
</span><span id="line-882"></span><span>                                </span><span class="hs-comment">-- an error but still return an unbound name. We</span><span>
</span><span id="line-883"></span><span>                                </span><span class="hs-comment">-- don't want that to screw up the dot-dot fill-in stuff.</span><span>
</span><span id="line-884"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; RnM [XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
-&gt; RnM [XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
</span><a href="#local-6989586621682854294"><span class="hs-identifier hs-var">flds</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
-&gt; Int -&gt; Bool
forall a. [a] -&gt; Int -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthIs"><span class="hs-operator hs-var">`lengthIs`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682854292"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RnM [XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
 -&gt; RnM [XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))])
-&gt; RnM [XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
-&gt; RnM [XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-885"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854298"><span class="annot"><a href="#local-6989586621682854298"><span class="hs-identifier hs-var">dd_flag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.RecordWildCards</span></span><span>
</span><span id="line-886"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#checkErr"><span class="hs-identifier hs-type">checkErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854298"><span class="hs-identifier hs-type">dd_flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#needFlagDotDot"><span class="hs-identifier hs-type">needFlagDotDot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854244"><span class="hs-identifier hs-type">ctxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854301"><span class="annot"><a href="#local-6989586621682854301"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854302"><span class="annot"><a href="#local-6989586621682854302"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getRdrEnvs"><span class="hs-identifier hs-type">getRdrEnvs</span></a></span><span>
</span><span id="line-888"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854303"><span class="annot"><a href="#local-6989586621682854303"><span class="hs-identifier hs-var">conInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#lookupConstructorInfo"><span class="hs-identifier hs-type">lookupConstructorInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854293"><span class="hs-identifier hs-type">con</span></a></span><span>
</span><span id="line-889"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854303"><span class="hs-identifier hs-type">conInfo</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#ConHasPositionalArgs"><span class="hs-identifier hs-type">ConHasPositionalArgs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnIllegalWildcardsInConstructor"><span class="hs-identifier hs-type">TcRnIllegalWildcardsInConstructor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854293"><span class="hs-identifier hs-type">con</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-890"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854307"><span class="annot"><a href="#local-6989586621682854307"><span class="hs-identifier hs-var hs-var">present_flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[OccName] -&gt; OccSet
</span><a href="GHC.Types.Name.Occurrence.html#mkOccSet"><span class="hs-identifier hs-var">mkOccSet</span></a></span><span> </span><span class="annot"><span class="annottext">([OccName] -&gt; OccSet) -&gt; [OccName] -&gt; OccSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; OccName) -&gt; [RdrName] -&gt; [OccName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
-&gt; [RdrName]
forall p arg. UnXRec p =&gt; [LHsRecField p arg] -&gt; [RdrName]
</span><a href="GHC.Rename.Pat.html#getFieldLbls"><span class="hs-identifier hs-var">getFieldLbls</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
</span><a href="#local-6989586621682854294"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span>                   </span><span class="hs-comment">-- For constructor uses (but not patterns)</span><span>
</span><span id="line-893"></span><span>                   </span><span class="hs-comment">-- the arg should be in scope locally;</span><span>
</span><span id="line-894"></span><span>                   </span><span class="hs-comment">-- i.e. not top level or imported</span><span>
</span><span id="line-895"></span><span>                   </span><span class="hs-comment">-- Eg.  data R = R { x,y :: Int }</span><span>
</span><span id="line-896"></span><span>                   </span><span class="hs-comment">--      f x = R { .. }   -- Should expand to R {x=x}, not R{x=x,y=y}</span><span>
</span><span id="line-897"></span><span>                 </span><span id="local-6989586621682854311"><span class="annot"><a href="#local-6989586621682854311"><span class="hs-identifier hs-var hs-var">arg_in_scope</span></a></span></span><span> </span><span id="local-6989586621682854312"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682854312"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682854312"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; LocalRdrEnv -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#elemLocalRdrEnv"><span class="hs-operator hs-var">`elemLocalRdrEnv`</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682854302"><span class="hs-identifier hs-var">lcl_env</span></a></span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621682854314"><span class="annot"><a href="#local-6989586621682854314"><span class="hs-identifier hs-var">dot_dot_fields</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854315"><span class="annot"><a href="#local-6989586621682854315"><span class="hs-identifier hs-var">dot_dot_gres</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-900"></span><span>                   </span><span class="annot"><span class="hs-identifier hs-type">unzip</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854317"><span class="hs-identifier hs-type">fl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682854318"><span class="hs-identifier hs-type">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-901"></span><span>                         </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682854317"><span class="annot"><a href="#local-6989586621682854317"><span class="hs-identifier hs-var">fl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#conInfoFields"><span class="hs-identifier hs-type">conInfoFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854303"><span class="hs-identifier hs-type">conInfo</span></a></span><span>
</span><span id="line-902"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854319"><span class="annot"><a href="#local-6989586621682854319"><span class="hs-identifier hs-var hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; OccName -&gt; OccName
OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#recFieldToVarOcc"><span class="hs-identifier hs-var">recFieldToVarOcc</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; OccName) -&gt; OccName -&gt; OccName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
forall name. HasOccName name =&gt; name -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-var">occName</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; OccName) -&gt; Name -&gt; OccName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682854317"><span class="hs-identifier hs-var">fl</span></a></span><span>
</span><span id="line-903"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854319"><span class="hs-identifier hs-type">lbl</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#elemOccSet"><span class="hs-operator hs-type">`elemOccSet`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854307"><span class="hs-identifier hs-type">present_flds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-904"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682854318"><span class="annot"><a href="#local-6989586621682854318"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupGRE_FieldLabel"><span class="hs-identifier hs-type">lookupGRE_FieldLabel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854301"><span class="hs-identifier hs-type">rdr_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854317"><span class="hs-identifier hs-type">fl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-905"></span><span>                                       </span><span class="hs-comment">-- Check selector is in scope</span><span>
</span><span id="line-906"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682854244"><span class="hs-identifier hs-type">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-907"></span><span>                             </span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldCon"><span class="hs-identifier hs-type">HsRecFieldCon</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="#local-6989586621682854311"><span class="hs-identifier hs-var">arg_in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682854319"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-908"></span><span>                             </span><span id="local-6989586621682854323"><span class="annot"><span class="annottext">HsRecFieldContext
</span><a href="#local-6989586621682854323"><span class="hs-identifier hs-var">_other</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-909"></span><span>
</span><span id="line-910"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#addUsedGREs"><span class="hs-identifier hs-type">addUsedGREs</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#NoDeprecationWarnings"><span class="hs-identifier hs-type">NoDeprecationWarnings</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854315"><span class="hs-identifier hs-type">dot_dot_gres</span></a></span><span>
</span><span id="line-911"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854326"><span class="annot"><a href="#local-6989586621682854326"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682854291"><span class="hs-identifier hs-var">loc_e</span></a></span><span>
</span><span id="line-912"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854327"><span class="annot"><a href="#local-6989586621682854327"><span class="hs-identifier hs-var hs-var">locn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; EpAnn AnnListItem
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682854326"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-913"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-type">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854326"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span>
</span><span id="line-914"></span><span>                        </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbAnn"><span class="hs-identifier hs-var">hfbAnn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span>
</span><span id="line-915"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbLHS"><span class="hs-identifier hs-var">hfbLHS</span></a></span><span>
</span><span id="line-916"></span><span>                           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-type">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854326"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854328"><span class="hs-identifier hs-type">sel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-type">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854326"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854329"><span class="hs-identifier hs-type">arg_rdr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-917"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854327"><span class="hs-identifier hs-type">locn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854245"><span class="hs-identifier hs-type">mk_arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854326"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854329"><span class="hs-identifier hs-type">arg_rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-918"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbPun"><span class="hs-identifier hs-var">hfbPun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-919"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682854330"><span class="annot"><a href="#local-6989586621682854330"><span class="hs-identifier hs-var">fl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682854314"><span class="hs-identifier hs-type">dot_dot_fields</span></a></span><span>
</span><span id="line-920"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854328"><span class="annot"><a href="#local-6989586621682854328"><span class="hs-identifier hs-var hs-var">sel</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682854330"><span class="hs-identifier hs-var">fl</span></a></span><span>
</span><span id="line-921"></span><span>                          </span><span id="local-6989586621682854329"><span class="annot"><a href="#local-6989586621682854329"><span class="hs-identifier hs-var hs-var">arg_rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span>
</span><span id="line-922"></span><span>                                  </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName) -&gt; OccName -&gt; RdrName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; OccName -&gt; OccName
OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#recFieldToVarOcc"><span class="hs-identifier hs-var">recFieldToVarOcc</span></a></span><span>
</span><span id="line-923"></span><span>                                  </span><span class="annot"><span class="annottext">(OccName -&gt; OccName) -&gt; OccName -&gt; OccName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854328"><span class="hs-identifier hs-var">sel</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-924"></span><span>
</span><span id="line-925"></span><span>    </span><span class="annot"><a href="#local-6989586621682854260"><span class="hs-identifier hs-var">rn_dotdot</span></a></span><span> </span><span id="local-6989586621682854332"><span class="annot"><span class="annottext">Maybe (GenLocated EpaLocation RecFieldsDotDot)
</span><a href="#local-6989586621682854332"><span class="hs-identifier hs-var">_dotdot</span></a></span></span><span> </span><span id="local-6989586621682854333"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621682854333"><span class="hs-identifier hs-var">_mb_con</span></a></span></span><span> </span><span id="local-6989586621682854334"><span class="annot"><span class="annottext">[XRec GhcRn (HsFieldBind (LFieldOcc GhcRn) (LocatedA arg))]
</span><a href="#local-6989586621682854334"><span class="hs-identifier hs-var">_flds</span></a></span></span><span>
</span><span id="line-926"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     [GenLocated
        (EpAnn AnnListItem)
        (HsFieldBind
           (GenLocated (EpAnn AnnListItem) (FieldOcc GhcRn)) (LocatedA arg))]
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-927"></span><span>      </span><span class="hs-comment">-- _dotdot = Nothing =&gt; No &quot;..&quot; at all</span><span>
</span><span id="line-928"></span><span>      </span><span class="hs-comment">-- _mb_con = Nothing =&gt; Record update</span><span>
</span><span id="line-929"></span><span>      </span><span class="hs-comment">-- _mb_con = Just unbound =&gt; Out of scope data constructor</span><span>
</span><span id="line-930"></span><span>
</span><span id="line-931"></span><span>    </span><span class="annot"><a href="#local-6989586621682854258"><span class="hs-identifier hs-type">dup_flds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-932"></span><span>        </span><span class="hs-comment">-- Each list represents a RdrName that occurred more than once</span><span>
</span><span id="line-933"></span><span>        </span><span class="hs-comment">-- (the list contains all occurrences)</span><span>
</span><span id="line-934"></span><span>        </span><span class="hs-comment">-- Each list in dup_fields is non-empty</span><span>
</span><span id="line-935"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[RdrName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854258"><span class="annot"><span class="annottext">[NonEmpty RdrName]
</span><a href="#local-6989586621682854258"><span class="hs-identifier hs-var">dup_flds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; RdrName -&gt; Ordering)
-&gt; [RdrName] -&gt; ([RdrName], [NonEmpty RdrName])
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier hs-var">removeDups</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; FastString -&gt; Ordering
</span><a href="GHC.Data.FastString.html#uniqCompareFS"><span class="hs-identifier hs-var">uniqCompareFS</span></a></span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; FastString -&gt; Ordering)
-&gt; (RdrName -&gt; FastString) -&gt; RdrName -&gt; RdrName -&gt; Ordering
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; FastString
</span><a href="GHC.Types.Name.Occurrence.html#occNameFS"><span class="hs-identifier hs-var">occNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; FastString)
-&gt; (RdrName -&gt; OccName) -&gt; RdrName -&gt; FastString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LHsRecField GhcPs (LocatedA arg)] -&gt; [RdrName]
forall p arg. UnXRec p =&gt; [LHsRecField p arg] -&gt; [RdrName]
</span><a href="GHC.Rename.Pat.html#getFieldLbls"><span class="hs-identifier hs-var">getFieldLbls</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcPs (LocatedA arg)]
</span><a href="#local-6989586621682854246"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-936"></span><span>      </span><span class="hs-comment">-- See the same duplicate handling logic in rnHsRecUpdFields below for further context.</span><span>
</span><span id="line-937"></span><span>
</span><span id="line-938"></span><span class="hs-comment">-- | Rename a regular (non-overloaded) record field update,</span><span>
</span><span id="line-939"></span><span class="hs-comment">-- disambiguating the fields if necessary.</span><span>
</span><span id="line-940"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnHsRecUpdFields"><span class="hs-identifier hs-type">rnHsRecUpdFields</span></a></span><span>
</span><span id="line-941"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-942"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#XLHsRecUpdLabels"><span class="hs-identifier hs-type">XLHsRecUpdLabels</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-943"></span><span id="rnHsRecUpdFields"><span class="annot"><span class="annottext">rnHsRecUpdFields :: [LHsRecUpdField GhcPs GhcPs]
-&gt; RnM
     (XLHsRecUpdLabels GhcRn, [LHsRecUpdField GhcRn GhcRn], FreeVars)
</span><a href="GHC.Rename.Pat.html#rnHsRecUpdFields"><span class="hs-identifier hs-var hs-var">rnHsRecUpdFields</span></a></span></span><span> </span><span id="local-6989586621682854336"><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs GhcPs]
</span><a href="#local-6989586621682854336"><span class="hs-identifier hs-var">flds</span></a></span></span><span>
</span><span id="line-944"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854337"><span class="annot"><a href="#local-6989586621682854337"><span class="hs-identifier hs-var">pun_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.NamedFieldPuns</span></span><span>
</span><span id="line-945"></span><span>
</span><span id="line-946"></span><span>       </span><span class="hs-comment">-- Check for an empty record update:  e {}</span><span>
</span><span id="line-947"></span><span>       </span><span class="hs-comment">-- NB: don't complain about e { .. }, because rn_dotdot has done that already</span><span>
</span><span id="line-948"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682854336"><span class="hs-identifier hs-type">flds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-949"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcRnMessage
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (NonEmpty (HsRecUpdParent GhcRn),
      [GenLocated
         (EpAnn AnnListItem)
         (HsFieldBind
            (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcRn))
            (GenLocated (EpAnn AnnListItem) (HsExpr GhcRn)))],
      FreeVars)
forall a. TcRnMessage -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a></span><span> </span><span class="annot"><span class="annottext">TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnEmptyRecordUpdate"><span class="hs-identifier hs-var">TcRnEmptyRecordUpdate</span></a></span><span>
</span><span id="line-950"></span><span>          </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854340"><span class="annot"><span class="annottext">LHsRecUpdField GhcPs GhcPs
</span><a href="#local-6989586621682854340"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682854341"><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs GhcPs]
</span><a href="#local-6989586621682854341"><span class="hs-identifier hs-var">other_flds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-951"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621682854342"><span class="hs-identifier hs-type">dup_lbls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-952"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[RdrName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854342"><span class="annot"><span class="annottext">[NonEmpty RdrName]
</span><a href="#local-6989586621682854342"><span class="hs-identifier hs-var hs-var">dup_lbls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; RdrName -&gt; Ordering)
-&gt; [RdrName] -&gt; ([RdrName], [NonEmpty RdrName])
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDups"><span class="hs-identifier hs-var">removeDups</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; FastString -&gt; Ordering
</span><a href="GHC.Data.FastString.html#uniqCompareFS"><span class="hs-identifier hs-var">uniqCompareFS</span></a></span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; FastString -&gt; Ordering)
-&gt; (RdrName -&gt; FastString) -&gt; RdrName -&gt; RdrName -&gt; Ordering
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; FastString
</span><a href="GHC.Types.Name.Occurrence.html#occNameFS"><span class="hs-identifier hs-var">occNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; FastString)
-&gt; (RdrName -&gt; OccName) -&gt; RdrName -&gt; FastString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-953"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
      (LHsExpr GhcPs))
 -&gt; RdrName)
-&gt; [GenLocated
      (EpAnn AnnListItem)
      (HsFieldBind
         (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
         (LHsExpr GhcPs))]
-&gt; [RdrName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN RdrName -&gt; RdrName)
-&gt; (GenLocated
      (EpAnn AnnListItem)
      (HsFieldBind
         (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
         (LHsExpr GhcPs))
    -&gt; GenLocated SrcSpanAnnN RdrName)
-&gt; GenLocated
     (EpAnn AnnListItem)
     (HsFieldBind
        (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
        (LHsExpr GhcPs))
-&gt; RdrName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LHsRecUpdField GhcPs GhcPs -&gt; GenLocated SrcSpanAnnN RdrName
GenLocated
  (EpAnn AnnListItem)
  (HsFieldBind
     (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
     (LHsExpr GhcPs))
-&gt; GenLocated SrcSpanAnnN RdrName
forall (p :: Pass) q.
LHsRecUpdField (GhcPass p) q -&gt; GenLocated SrcSpanAnnN RdrName
</span><a href="GHC.Rename.Env.html#getFieldUpdLbl"><span class="hs-identifier hs-var">getFieldUpdLbl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs GhcPs]
[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
      (LHsExpr GhcPs))]
</span><a href="#local-6989586621682854336"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-954"></span><span>               </span><span class="hs-comment">-- NB: we compare using the underlying field label FastString,</span><span>
</span><span id="line-955"></span><span>               </span><span class="hs-comment">-- in order to catch duplicates involving qualified names,</span><span>
</span><span id="line-956"></span><span>               </span><span class="hs-comment">-- as in the record update `r { fld = x, Mod.fld = y }`.</span><span>
</span><span id="line-957"></span><span>               </span><span class="hs-comment">-- See #21959.</span><span>
</span><span id="line-958"></span><span>               </span><span class="hs-comment">-- Note that this test doesn't correctly handle exact Names, but those</span><span>
</span><span id="line-959"></span><span>               </span><span class="hs-comment">-- aren't handled properly by the rest of the compiler anyway. See #22122.</span><span>
</span><span id="line-960"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(NonEmpty RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; [NonEmpty RdrName] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; (NonEmpty RdrName -&gt; TcRnMessage)
-&gt; NonEmpty RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HsRecFieldContext -&gt; NonEmpty RdrName -&gt; TcRnMessage
</span><a href="GHC.Rename.Pat.html#dupFieldErr"><span class="hs-identifier hs-var">dupFieldErr</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecFieldContext
</span><a href="GHC.Rename.Pat.html#HsRecFieldUpd"><span class="hs-identifier hs-var">HsRecFieldUpd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NonEmpty RdrName]
</span><a href="#local-6989586621682854342"><span class="hs-identifier hs-var">dup_lbls</span></a></span><span>
</span><span id="line-961"></span><span>
</span><span id="line-962"></span><span>         </span><span class="hs-comment">-- See Note [Disambiguating record updates]</span><span>
</span><span id="line-963"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854344"><span class="annot"><a href="#local-6989586621682854344"><span class="hs-identifier hs-var">possible_parents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmpty (LHsRecUpdField GhcPs GhcPs)
-&gt; RnM (NonEmpty (HsRecUpdParent GhcRn))
</span><a href="GHC.Rename.Env.html#lookupRecUpdFields"><span class="hs-identifier hs-var">lookupRecUpdFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsRecUpdField GhcPs GhcPs
GenLocated
  (EpAnn AnnListItem)
  (HsFieldBind
     (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
     (GenLocated (EpAnn AnnListItem) (HsExpr GhcPs)))
</span><a href="#local-6989586621682854340"><span class="hs-identifier hs-var">fld</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  (EpAnn AnnListItem)
  (HsFieldBind
     (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
     (GenLocated (EpAnn AnnListItem) (HsExpr GhcPs)))
-&gt; [GenLocated
      (EpAnn AnnListItem)
      (HsFieldBind
         (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
         (GenLocated (EpAnn AnnListItem) (HsExpr GhcPs)))]
-&gt; NonEmpty
     (GenLocated
        (EpAnn AnnListItem)
        (HsFieldBind
           (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
           (GenLocated (EpAnn AnnListItem) (HsExpr GhcPs))))
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">NE.:|</span></span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs GhcPs]
[GenLocated
   (EpAnn AnnListItem)
   (HsFieldBind
      (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcPs))
      (GenLocated (EpAnn AnnListItem) (HsExpr GhcPs)))]
</span><a href="#local-6989586621682854341"><span class="hs-identifier hs-var">other_flds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-964"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span>  </span><span class="annot"><a href="#local-6989586621682854347"><span class="hs-identifier hs-type">mb_unambig_lbls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-965"></span><span>              </span><span class="annot"><a href="#local-6989586621682854348"><span class="hs-identifier hs-type">fvs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-966"></span><span>              </span><span class="hs-special">(</span><span id="local-6989586621682854347"><span class="annot"><a href="#local-6989586621682854347"><span class="hs-identifier hs-var">mb_unambig_lbls</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854348"><span class="annot"><a href="#local-6989586621682854348"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-967"></span><span>               </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682854344"><span class="hs-identifier hs-type">possible_parents</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-968"></span><span>                  </span><span class="annot"><a href="GHC.Hs.Expr.html#RnRecUpdParent"><span class="hs-identifier hs-type">RnRecUpdParent</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rnRecUpdLabels :: HsRecUpdParent GhcRn -&gt; NonEmpty FieldGlobalRdrElt
</span><a href="GHC.Hs.Expr.html#rnRecUpdLabels"><span class="hs-identifier hs-var">rnRecUpdLabels</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854351"><span class="annot"><span class="annottext">NonEmpty FieldGlobalRdrElt
</span><a href="#local-6989586621682854351"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-operator hs-type">NE.:|</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-969"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854352"><span class="annot"><span class="annottext">lbls :: [FieldLabel]
</span><a href="#local-6989586621682854352"><span class="hs-identifier hs-var hs-var">lbls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FieldGlobalRdrElt -&gt; FieldLabel)
-&gt; [FieldGlobalRdrElt] -&gt; [FieldLabel]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; FieldGlobalRdrElt -&gt; FieldLabel
FieldGlobalRdrElt -&gt; FieldLabel
</span><a href="GHC.Types.Name.Reader.html#fieldGRELabel"><span class="hs-identifier hs-var">fieldGRELabel</span></a></span><span> </span><span class="annot"><span class="annottext">([FieldGlobalRdrElt] -&gt; [FieldLabel])
-&gt; [FieldGlobalRdrElt] -&gt; [FieldLabel]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldGlobalRdrElt -&gt; [FieldGlobalRdrElt]
forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.20.1.0-inplace/src/Data.List.NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldGlobalRdrElt
</span><a href="#local-6989586621682854351"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-970"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[FieldLabel] -&gt; Maybe [FieldLabel]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682854352"><span class="hs-identifier hs-var">lbls</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkFVs"><span class="hs-identifier hs-var">mkFVs</span></a></span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; FreeVars) -&gt; [Name] -&gt; FreeVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldLabel -&gt; Name) -&gt; [FieldLabel] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682854352"><span class="hs-identifier hs-var">lbls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-971"></span><span>                  </span><span class="annot"><span class="annottext">NonEmpty (HsRecUpdParent GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Maybe [FieldLabel]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-972"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">([FreeVars] -&gt; FreeVars) -&gt; [FreeVars] -&gt; FreeVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(HsRecUpdParent GhcRn -&gt; FreeVars)
-&gt; [HsRecUpdParent GhcRn] -&gt; [FreeVars]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[FreeVars] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-var">plusFVs</span></a></span><span> </span><span class="annot"><span class="annottext">([FreeVars] -&gt; FreeVars)
-&gt; (HsRecUpdParent GhcRn -&gt; [FreeVars])
-&gt; HsRecUpdParent GhcRn
-&gt; FreeVars
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(FieldGlobalRdrElt -&gt; FreeVars)
-&gt; [FieldGlobalRdrElt] -&gt; [FreeVars]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FieldGlobalRdrElt -&gt; FreeVars
</span><a href="#local-6989586621682854356"><span class="hs-identifier hs-var">pat_syn_free_vars</span></a></span><span> </span><span class="annot"><span class="annottext">([FieldGlobalRdrElt] -&gt; [FreeVars])
-&gt; (HsRecUpdParent GhcRn -&gt; [FieldGlobalRdrElt])
-&gt; HsRecUpdParent GhcRn
-&gt; [FreeVars]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldGlobalRdrElt -&gt; [FieldGlobalRdrElt]
forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.20.1.0-inplace/src/Data.List.NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty FieldGlobalRdrElt -&gt; [FieldGlobalRdrElt])
-&gt; (HsRecUpdParent GhcRn -&gt; NonEmpty FieldGlobalRdrElt)
-&gt; HsRecUpdParent GhcRn
-&gt; [FieldGlobalRdrElt]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HsRecUpdParent GhcRn -&gt; NonEmpty FieldGlobalRdrElt
</span><a href="GHC.Hs.Expr.html#rnRecUpdLabels"><span class="hs-identifier hs-var">rnRecUpdLabels</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-973"></span><span>                                 </span><span class="annot"><span class="annottext">([HsRecUpdParent GhcRn] -&gt; [FreeVars])
-&gt; [HsRecUpdParent GhcRn] -&gt; [FreeVars]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (HsRecUpdParent GhcRn) -&gt; [HsRecUpdParent GhcRn]
forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.20.1.0-inplace/src/Data.List.NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (HsRecUpdParent GhcRn)
</span><a href="#local-6989586621682854344"><span class="hs-identifier hs-var">possible_parents</span></a></span><span>
</span><span id="line-974"></span><span>                         </span><span class="hs-comment">-- See Note [Using PatSyn FreeVars]</span><span>
</span><span id="line-975"></span><span>                       </span><span class="hs-special">)</span><span>
</span><span id="line-976"></span><span>
</span><span id="line-977"></span><span>        </span><span class="hs-comment">-- Rename each field.</span><span>
</span><span id="line-978"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854357"><span class="annot"><a href="#local-6989586621682854357"><span class="hs-identifier hs-var">upd_flds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854358"><span class="annot"><a href="#local-6989586621682854358"><span class="hs-identifier hs-var">fvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682854359"><span class="hs-identifier hs-type">rn_flds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854337"><span class="hs-identifier hs-type">pun_ok</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854347"><span class="hs-identifier hs-type">mb_unambig_lbls</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854336"><span class="hs-identifier hs-type">flds</span></a></span><span>
</span><span id="line-979"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854360"><span class="annot"><a href="#local-6989586621682854360"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621682854348"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621682854358"><span class="hs-identifier hs-var">fvs'</span></a></span><span>
</span><span id="line-980"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854344"><span class="hs-identifier hs-type">possible_parents</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682854357"><span class="hs-identifier hs-type">upd_flds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682854360"><span class="hs-identifier hs-type">all_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-981"></span><span>
</span><span id="line-982"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-983"></span><span>
</span><span id="line-984"></span><span>      </span><span class="hs-comment">-- For an ambiguous record update involving pattern synonym record fields,</span><span>
</span><span id="line-985"></span><span>      </span><span class="hs-comment">-- we must add all the possibly-relevant field selector names to ensure that</span><span>
</span><span id="line-986"></span><span>      </span><span class="hs-comment">-- we typecheck the record update **after** we typecheck the pattern synonym</span><span>
</span><span id="line-987"></span><span>      </span><span class="hs-comment">-- definition. See Note [Using PatSyn FreeVars].</span><span>
</span><span id="line-988"></span><span>      </span><span class="annot"><a href="#local-6989586621682854356"><span class="hs-identifier hs-type">pat_syn_free_vars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldGlobalRdrElt"><span class="hs-identifier hs-type">FieldGlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-989"></span><span>      </span><span id="local-6989586621682854356"><span class="annot"><span class="annottext">pat_syn_free_vars :: FieldGlobalRdrElt -&gt; FreeVars
</span><a href="#local-6989586621682854356"><span class="hs-identifier hs-var hs-var">pat_syn_free_vars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_info :: forall info. GlobalRdrEltX info -&gt; info
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854363"><span class="annot"><span class="annottext">GREInfo
</span><a href="#local-6989586621682854363"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-990"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#IAmRecField"><span class="hs-identifier hs-type">IAmRecField</span></a></span><span> </span><span id="local-6989586621682854365"><span class="annot"><span class="annottext">RecFieldInfo
</span><a href="#local-6989586621682854365"><span class="hs-identifier hs-var">fld_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GREInfo
</span><a href="#local-6989586621682854363"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-991"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#RecFieldInfo"><span class="hs-identifier hs-type">RecFieldInfo</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recFieldLabel :: RecFieldInfo -&gt; FieldLabel
</span><a href="GHC.Types.GREInfo.html#recFieldLabel"><span class="hs-identifier hs-var">recFieldLabel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854368"><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682854368"><span class="hs-identifier hs-var">fl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recFieldCons :: RecFieldInfo -&gt; UniqSet ConLikeName
</span><a href="GHC.Types.GREInfo.html#recFieldCons"><span class="hs-identifier hs-var">recFieldCons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854370"><span class="annot"><span class="annottext">UniqSet ConLikeName
</span><a href="#local-6989586621682854370"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RecFieldInfo
</span><a href="#local-6989586621682854365"><span class="hs-identifier hs-var">fld_info</span></a></span><span>
</span><span id="line-992"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ConLikeName -&gt; Bool) -&gt; UniqSet ConLikeName -&gt; Bool
forall a. (a -&gt; Bool) -&gt; UniqSet a -&gt; Bool
</span><a href="GHC.Types.Unique.Set.html#uniqSetAny"><span class="hs-identifier hs-var">uniqSetAny</span></a></span><span> </span><span class="annot"><span class="annottext">ConLikeName -&gt; Bool
</span><a href="#local-6989586621682854372"><span class="hs-identifier hs-var">is_PS</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet ConLikeName
</span><a href="#local-6989586621682854370"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-993"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-var">unitFV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682854368"><span class="hs-identifier hs-var">fl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-994"></span><span>      </span><span class="annot"><a href="#local-6989586621682854356"><span class="hs-identifier hs-var">pat_syn_free_vars</span></a></span><span> </span><span class="annot"><span class="annottext">FieldGlobalRdrElt
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-995"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span>
</span><span id="line-996"></span><span>
</span><span id="line-997"></span><span>      </span><span class="annot"><a href="#local-6989586621682854372"><span class="hs-identifier hs-type">is_PS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#ConLikeName"><span class="hs-identifier hs-type">ConLikeName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-998"></span><span>      </span><span id="local-6989586621682854372"><span class="annot"><span class="annottext">is_PS :: ConLikeName -&gt; Bool
</span><a href="#local-6989586621682854372"><span class="hs-identifier hs-var hs-var">is_PS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.GREInfo.html#PatSynName"><span class="hs-identifier hs-type">PatSynName</span></a></span><span>  </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-999"></span><span>      </span><span class="annot"><a href="#local-6989586621682854372"><span class="hs-identifier hs-var">is_PS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.GREInfo.html#DataConName"><span class="hs-identifier hs-type">DataConName</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1000"></span><span>
</span><span id="line-1001"></span><span>      </span><span class="annot"><a href="#local-6989586621682854359"><span class="hs-identifier hs-type">rn_flds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1002"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1003"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1004"></span><span>      </span><span id="local-6989586621682854359"><span class="annot"><span class="annottext">rn_flds :: Bool
-&gt; Maybe [FieldLabel]
-&gt; [LHsRecUpdField GhcPs GhcPs]
-&gt; RnM ([LHsRecUpdField GhcRn GhcRn], FreeVars)
</span><a href="#local-6989586621682854359"><span class="hs-identifier hs-var hs-var">rn_flds</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldLabel]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([GenLocated
    (EpAnn AnnListItem)
    (HsFieldBind
       (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcRn))
       (GenLocated (EpAnn AnnListItem) (HsExpr GhcRn)))],
 FreeVars)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated
         (EpAnn AnnListItem)
         (HsFieldBind
            (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcRn))
            (GenLocated (EpAnn AnnListItem) (HsExpr GhcRn)))],
      FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1005"></span><span>      </span><span class="annot"><a href="#local-6989586621682854359"><span class="hs-identifier hs-var">rn_flds</span></a></span><span> </span><span id="local-6989586621682854376"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854376"><span class="hs-identifier hs-var">pun_ok</span></a></span></span><span> </span><span id="local-6989586621682854377"><span class="annot"><span class="annottext">Maybe [FieldLabel]
</span><a href="#local-6989586621682854377"><span class="hs-identifier hs-var">mb_unambig_lbls</span></a></span></span><span>
</span><span id="line-1006"></span><span>              </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854378"><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854378"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hfbLHS :: forall lhs rhs. HsFieldBind lhs rhs -&gt; lhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbLHS"><span class="hs-identifier hs-var">hfbLHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854379"><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854379"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682854380"><span class="annot"><span class="annottext">AmbiguousFieldOcc GhcPs
</span><a href="#local-6989586621682854380"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-1007"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbRHS :: forall lhs rhs. HsFieldBind lhs rhs -&gt; rhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854381"><span class="annot"><span class="annottext">GenLocated (EpAnn AnnListItem) (HsExpr GhcPs)
</span><a href="#local-6989586621682854381"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-1008"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbPun :: forall lhs rhs. HsFieldBind lhs rhs -&gt; Bool
</span><a href="Language.Haskell.Syntax.Pat.html#hfbPun"><span class="hs-identifier hs-var">hfbPun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854382"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854382"><span class="hs-identifier hs-var">pun</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682854383"><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs GhcPs]
</span><a href="#local-6989586621682854383"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1009"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854384"><span class="annot"><span class="annottext">lbl :: RdrName
</span><a href="#local-6989586621682854384"><span class="hs-identifier hs-var hs-var hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AmbiguousFieldOcc GhcPs -&gt; RdrName
forall (p :: Pass). AmbiguousFieldOcc (GhcPass p) -&gt; RdrName
</span><a href="GHC.Hs.Type.html#ambiguousFieldOccRdrName"><span class="hs-identifier hs-var">ambiguousFieldOccRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">AmbiguousFieldOcc GhcPs
</span><a href="#local-6989586621682854380"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1010"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854386"><span class="annot"><a href="#local-6989586621682854386"><span class="hs-identifier hs-var">arg'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier">LHsExpr</span></span><span> </span><span class="annot"><span class="hs-identifier">GhcPs</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854382"><span class="hs-identifier hs-var">pun</span></a></span><span>
</span><span id="line-1011"></span><span>                       </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854379"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1012"></span><span>                                 </span><span class="annot"><span class="annottext">Bool -&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#checkErr"><span class="hs-identifier hs-var">checkErr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854376"><span class="hs-identifier hs-var">pun_ok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located RdrName -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalFieldPunning"><span class="hs-identifier hs-var">TcRnIllegalFieldPunning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; RdrName -&gt; Located RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn AnnListItem -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854379"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854384"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>                                 </span><span class="hs-comment">-- Discard any module qualifier (#11662)</span><span>
</span><span id="line-1014"></span><span>                               </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854387"><span class="annot"><span class="annottext">arg_rdr :: RdrName
</span><a href="#local-6989586621682854387"><span class="hs-identifier hs-var hs-var">arg_rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854384"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1015"></span><span>                               </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">GenLocated (EpAnn AnnListItem) (HsExpr GhcPs)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated (EpAnn AnnListItem) (HsExpr GhcPs))
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn AnnListItem
-&gt; HsExpr GhcPs -&gt; GenLocated (EpAnn AnnListItem) (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn AnnListItem -&gt; EpAnn AnnListItem
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854379"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XVar GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; HsExpr GhcPs
forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; GenLocated SrcSpanAnnN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn AnnListItem -&gt; SrcSpanAnnN
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854379"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854387"><span class="hs-identifier hs-var">arg_rdr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1016"></span><span>                       </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">GenLocated (EpAnn AnnListItem) (HsExpr GhcPs)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated (EpAnn AnnListItem) (HsExpr GhcPs))
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">GenLocated (EpAnn AnnListItem) (HsExpr GhcPs)
</span><a href="#local-6989586621682854381"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1017"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854389"><span class="annot"><a href="#local-6989586621682854389"><span class="hs-identifier hs-var">arg''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854390"><span class="annot"><a href="#local-6989586621682854390"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-type">rnLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854386"><span class="hs-identifier hs-type">arg'</span></a></span><span>
</span><span id="line-1018"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621682854391"><span class="hs-identifier hs-type">lbl'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#AmbiguousFieldOcc"><span class="hs-identifier hs-type">AmbiguousFieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1019"></span><span>                   </span><span id="local-6989586621682854391"><span class="annot"><a href="#local-6989586621682854391"><span class="hs-identifier hs-var hs-var">lbl'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe [FieldLabel]
</span><a href="#local-6989586621682854377"><span class="hs-identifier hs-var">mb_unambig_lbls</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1020"></span><span>                            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854392"><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682854392"><span class="hs-identifier hs-var">fl</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[FieldLabel]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1021"></span><span>                                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854393"><span class="annot"><span class="annottext">sel_name :: Name
</span><a href="#local-6989586621682854393"><span class="hs-identifier hs-var hs-var">sel_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682854392"><span class="hs-identifier hs-var">fl</span></a></span><span>
</span><span id="line-1022"></span><span>                                </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">XUnambiguous GhcRn -&gt; XRec GhcRn RdrName -&gt; AmbiguousFieldOcc GhcRn
forall pass.
XUnambiguous pass -&gt; XRec pass RdrName -&gt; AmbiguousFieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#Unambiguous"><span class="hs-identifier hs-var">Unambiguous</span></a></span><span> </span><span class="annot"><span class="annottext">XUnambiguous GhcRn
Name
</span><a href="#local-6989586621682854393"><span class="hs-identifier hs-var">sel_name</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; GenLocated SrcSpanAnnN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn AnnListItem -&gt; SrcSpanAnnN
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854379"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854384"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1023"></span><span>                            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe [FieldLabel]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>   </span><span class="annot"><span class="annottext">XAmbiguous GhcRn -&gt; XRec GhcRn RdrName -&gt; AmbiguousFieldOcc GhcRn
forall pass.
XAmbiguous pass -&gt; XRec pass RdrName -&gt; AmbiguousFieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#Ambiguous"><span class="hs-identifier hs-var">Ambiguous</span></a></span><span> </span><span class="annot"><span class="annottext">XAmbiguous GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; GenLocated SrcSpanAnnN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn AnnListItem -&gt; SrcSpanAnnN
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854379"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854384"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1024"></span><span>                   </span><span class="annot"><a href="#local-6989586621682854396"><span class="hs-identifier hs-type">fld'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1025"></span><span>                   </span><span id="local-6989586621682854396"><span class="annot"><a href="#local-6989586621682854396"><span class="hs-identifier hs-var hs-var">fld'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
-&gt; HsFieldBind
     (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcRn))
     (GenLocated (EpAnn AnnListItem) (HsExpr GhcRn))
-&gt; GenLocated
     (EpAnn AnnListItem)
     (HsFieldBind
        (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcRn))
        (GenLocated (EpAnn AnnListItem) (HsExpr GhcRn)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854378"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hfbAnn :: XHsFieldBind
  (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcRn))
</span><a href="Language.Haskell.Syntax.Pat.html#hfbAnn"><span class="hs-identifier hs-var">hfbAnn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[AddEpAnn]
XHsFieldBind
  (GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcRn))
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span>
</span><span id="line-1026"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbLHS :: GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcRn)
</span><a href="Language.Haskell.Syntax.Pat.html#hfbLHS"><span class="hs-identifier hs-var">hfbLHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
-&gt; AmbiguousFieldOcc GhcRn
-&gt; GenLocated (EpAnn AnnListItem) (AmbiguousFieldOcc GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854379"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">AmbiguousFieldOcc GhcRn
</span><a href="#local-6989586621682854391"><span class="hs-identifier hs-var">lbl'</span></a></span><span>
</span><span id="line-1027"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbRHS :: GenLocated (EpAnn AnnListItem) (HsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated (EpAnn AnnListItem) (HsExpr GhcRn)
</span><a href="#local-6989586621682854389"><span class="hs-identifier hs-var">arg''</span></a></span><span>
</span><span id="line-1028"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbPun :: Bool
</span><a href="Language.Haskell.Syntax.Pat.html#hfbPun"><span class="hs-identifier hs-var">hfbPun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854382"><span class="hs-identifier hs-var">pun</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1029"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854397"><span class="annot"><a href="#local-6989586621682854397"><span class="hs-identifier hs-var">flds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854398"><span class="annot"><a href="#local-6989586621682854398"><span class="hs-identifier hs-var">fvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682854359"><span class="hs-identifier hs-type">rn_flds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854376"><span class="hs-identifier hs-type">pun_ok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Prelude.Basic.html#tail"><span class="hs-identifier hs-type">tail</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682854377"><span class="hs-identifier hs-type">mb_unambig_lbls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854383"><span class="hs-identifier hs-type">flds</span></a></span><span>
</span><span id="line-1030"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854396"><span class="hs-identifier hs-type">fld'</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621682854397"><span class="hs-identifier hs-type">flds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682854390"><span class="hs-identifier hs-type">fvs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854398"><span class="hs-identifier hs-type">fvs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1031"></span><span>
</span><span id="line-1032"></span><span id="local-6989586621682853155"><span class="annot"><a href="GHC.Rename.Pat.html#getFieldIds"><span class="hs-identifier hs-type">getFieldIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853155"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1033"></span><span id="getFieldIds"><span class="annot"><span class="annottext">getFieldIds :: forall arg. [LHsRecField GhcRn arg] -&gt; [Name]
</span><a href="GHC.Rename.Pat.html#getFieldIds"><span class="hs-identifier hs-var hs-var">getFieldIds</span></a></span></span><span> </span><span id="local-6989586621682854401"><span class="annot"><span class="annottext">[LHsRecField GhcRn arg]
</span><a href="#local-6989586621682854401"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated (EpAnn AnnListItem) (HsFieldBind (LFieldOcc GhcRn) arg)
 -&gt; Name)
-&gt; [GenLocated
      (EpAnn AnnListItem) (HsFieldBind (LFieldOcc GhcRn) arg)]
-&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsFieldBind (LFieldOcc GhcRn) arg -&gt; XCFieldOcc GhcRn
HsFieldBind (LFieldOcc GhcRn) arg -&gt; Name
forall p arg. UnXRec p =&gt; HsRecField p arg -&gt; XCFieldOcc p
</span><a href="Language.Haskell.Syntax.Pat.html#hsRecFieldSel"><span class="hs-identifier hs-var">hsRecFieldSel</span></a></span><span> </span><span class="annot"><span class="annottext">(HsFieldBind (LFieldOcc GhcRn) arg -&gt; Name)
-&gt; (GenLocated
      (EpAnn AnnListItem) (HsFieldBind (LFieldOcc GhcRn) arg)
    -&gt; HsFieldBind (LFieldOcc GhcRn) arg)
-&gt; GenLocated
     (EpAnn AnnListItem) (HsFieldBind (LFieldOcc GhcRn) arg)
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated (EpAnn AnnListItem) (HsFieldBind (LFieldOcc GhcRn) arg)
-&gt; HsFieldBind (LFieldOcc GhcRn) arg
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcRn arg]
[GenLocated
   (EpAnn AnnListItem) (HsFieldBind (LFieldOcc GhcRn) arg)]
</span><a href="#local-6989586621682854401"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-1034"></span><span>
</span><span id="line-1035"></span><span class="annot"><a href="GHC.Rename.Pat.html#getFieldLbls"><span class="hs-identifier hs-type">getFieldLbls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682853173"><span class="annot"><a href="#local-6989586621682853173"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span id="local-6989586621682853174"><span class="annot"><a href="#local-6989586621682853174"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#UnXRec"><span class="hs-identifier hs-type">UnXRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853173"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853173"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853174"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1036"></span><span id="getFieldLbls"><span class="annot"><span class="annottext">getFieldLbls :: forall p arg. UnXRec p =&gt; [LHsRecField p arg] -&gt; [RdrName]
</span><a href="GHC.Rename.Pat.html#getFieldLbls"><span class="hs-identifier hs-var hs-var">getFieldLbls</span></a></span></span><span> </span><span id="local-6989586621682854407"><span class="annot"><span class="annottext">[LHsRecField p arg]
</span><a href="#local-6989586621682854407"><span class="hs-identifier hs-var">flds</span></a></span></span><span>
</span><span id="line-1037"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LHsRecField p arg -&gt; RdrName) -&gt; [LHsRecField p arg] -&gt; [RdrName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall p a. UnXRec p =&gt; XRec p a -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#unXRec"><span class="hs-identifier hs-var">unXRec</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682853173"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><span class="annottext">(XRec p RdrName -&gt; RdrName)
-&gt; (LHsRecField p arg -&gt; XRec p RdrName)
-&gt; LHsRecField p arg
-&gt; RdrName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldOcc p -&gt; XRec p RdrName
forall pass. FieldOcc pass -&gt; XRec pass RdrName
</span><a href="Language.Haskell.Syntax.Type.html#foLabel"><span class="hs-identifier hs-var">foLabel</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldOcc p -&gt; XRec p RdrName)
-&gt; (LHsRecField p arg -&gt; FieldOcc p)
-&gt; LHsRecField p arg
-&gt; XRec p RdrName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall p a. UnXRec p =&gt; XRec p a -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#unXRec"><span class="hs-identifier hs-var">unXRec</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682853173"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><span class="annottext">(XRec p (FieldOcc p) -&gt; FieldOcc p)
-&gt; (LHsRecField p arg -&gt; XRec p (FieldOcc p))
-&gt; LHsRecField p arg
-&gt; FieldOcc p
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HsFieldBind (XRec p (FieldOcc p)) arg -&gt; XRec p (FieldOcc p)
forall lhs rhs. HsFieldBind lhs rhs -&gt; lhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbLHS"><span class="hs-identifier hs-var">hfbLHS</span></a></span><span> </span><span class="annot"><span class="annottext">(HsFieldBind (XRec p (FieldOcc p)) arg -&gt; XRec p (FieldOcc p))
-&gt; (LHsRecField p arg -&gt; HsFieldBind (XRec p (FieldOcc p)) arg)
-&gt; LHsRecField p arg
-&gt; XRec p (FieldOcc p)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall p a. UnXRec p =&gt; XRec p a -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#unXRec"><span class="hs-identifier hs-var">unXRec</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682853173"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsRecField p arg]
</span><a href="#local-6989586621682854407"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-1038"></span><span>
</span><span id="line-1039"></span><span class="annot"><a href="GHC.Rename.Pat.html#needFlagDotDot"><span class="hs-identifier hs-type">needFlagDotDot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldContext"><span class="hs-identifier hs-type">HsRecFieldContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span><span>
</span><span id="line-1040"></span><span id="needFlagDotDot"><span class="annot"><span class="annottext">needFlagDotDot :: HsRecFieldContext -&gt; TcRnMessage
</span><a href="GHC.Rename.Pat.html#needFlagDotDot"><span class="hs-identifier hs-var hs-var">needFlagDotDot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RecordFieldPart -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalWildcardsInRecord"><span class="hs-identifier hs-var">TcRnIllegalWildcardsInRecord</span></a></span><span> </span><span class="annot"><span class="annottext">(RecordFieldPart -&gt; TcRnMessage)
-&gt; (HsRecFieldContext -&gt; RecordFieldPart)
-&gt; HsRecFieldContext
-&gt; TcRnMessage
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HsRecFieldContext -&gt; RecordFieldPart
</span><a href="GHC.Rename.Pat.html#toRecordFieldPart"><span class="hs-identifier hs-var">toRecordFieldPart</span></a></span><span>
</span><span id="line-1041"></span><span>
</span><span id="line-1042"></span><span class="annot"><a href="GHC.Rename.Pat.html#dupFieldErr"><span class="hs-identifier hs-type">dupFieldErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldContext"><span class="hs-identifier hs-type">HsRecFieldContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span><span>
</span><span id="line-1043"></span><span id="dupFieldErr"><span class="annot"><span class="annottext">dupFieldErr :: HsRecFieldContext -&gt; NonEmpty RdrName -&gt; TcRnMessage
</span><a href="GHC.Rename.Pat.html#dupFieldErr"><span class="hs-identifier hs-var hs-var">dupFieldErr</span></a></span></span><span> </span><span id="local-6989586621682854412"><span class="annot"><span class="annottext">HsRecFieldContext
</span><a href="#local-6989586621682854412"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RecordFieldPart -&gt; NonEmpty RdrName -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnDuplicateFieldName"><span class="hs-identifier hs-var">TcRnDuplicateFieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecFieldContext -&gt; RecordFieldPart
</span><a href="GHC.Rename.Pat.html#toRecordFieldPart"><span class="hs-identifier hs-var">toRecordFieldPart</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecFieldContext
</span><a href="#local-6989586621682854412"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1044"></span><span>
</span><span id="line-1045"></span><span class="annot"><a href="GHC.Rename.Pat.html#toRecordFieldPart"><span class="hs-identifier hs-type">toRecordFieldPart</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldContext"><span class="hs-identifier hs-type">HsRecFieldContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#RecordFieldPart"><span class="hs-identifier hs-type">RecordFieldPart</span></a></span><span>
</span><span id="line-1046"></span><span id="toRecordFieldPart"><span class="annot"><span class="annottext">toRecordFieldPart :: HsRecFieldContext -&gt; RecordFieldPart
</span><a href="GHC.Rename.Pat.html#toRecordFieldPart"><span class="hs-identifier hs-var hs-var">toRecordFieldPart</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldCon"><span class="hs-identifier hs-type">HsRecFieldCon</span></a></span><span> </span><span id="local-6989586621682854414"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854414"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RecordFieldPart
</span><a href="GHC.Tc.Errors.Types.html#RecordFieldConstructor"><span class="hs-identifier hs-var">RecordFieldConstructor</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854414"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1047"></span><span class="annot"><a href="GHC.Rename.Pat.html#toRecordFieldPart"><span class="hs-identifier hs-var">toRecordFieldPart</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldPat"><span class="hs-identifier hs-type">HsRecFieldPat</span></a></span><span> </span><span id="local-6989586621682854416"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854416"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RecordFieldPart
</span><a href="GHC.Tc.Errors.Types.html#RecordFieldPattern"><span class="hs-identifier hs-var">RecordFieldPattern</span></a></span><span>     </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854416"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1048"></span><span class="annot"><a href="GHC.Rename.Pat.html#toRecordFieldPart"><span class="hs-identifier hs-var">toRecordFieldPart</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#HsRecFieldUpd"><span class="hs-identifier hs-type">HsRecFieldUpd</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RecordFieldPart
</span><a href="GHC.Tc.Errors.Types.html#RecordFieldUpdate"><span class="hs-identifier hs-var">RecordFieldUpdate</span></a></span><span>
</span><span id="line-1049"></span><span>
</span><span id="line-1050"></span><span class="hs-comment">{- Note [Disambiguating record updates]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When the -XDuplicateRecordFields extension is used, to rename and typecheck
a non-overloaded record update, we might need to disambiguate the field labels.

Consider the following definitions:

   {-# LANGUAGE DuplicateRecordFields #-}

    data R = MkR1 { fld1 :: Int, fld2 :: Char }
           | MKR2 { fld1 :: Int, fld2 :: Char, fld3 :: Bool }
    data S = MkS1 { fld1 :: Int } | MkS2 { fld2 :: Char }

In a record update, the `lookupRecUpdFields` function tries to determine
the parent datatype by computing the parents (TyCon/PatSyn) which have
at least one constructor (DataCon/PatSyn) with all of the fields.

For example, in the (non-overloaded) record update

    r { fld1 = 3, fld2 = 'x' }

only the TyCon R contains at least one DataCon which has both of the fields
being updated: in this case, MkR1 and MkR2 have both of the updated fields.
The TyCon S also has both fields fld1 and fld2, but no single constructor
has both of those fields, so S is not a valid parent for this record update.

Note that this check is namespace-aware, so that a record update such as

    import qualified M ( R (fld1, fld2) )
    f r = r { M.fld1 = 3 }

is unambiguous, as only R contains the field fld1 in the M namespace.
(See however #22122 for issues relating to the usage of exact Names in
record fields.)

See also Note [Type-directed record disambiguation] in GHC.Tc.Gen.Expr.

Note [Using PatSyn FreeVars]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When we are disambiguating a non-overloaded record update, as per
Note [Disambiguating record updates], and have determined that this
record update might involve pattern synonym record fields, it is important
to declare usage of all these pattern synonyms record fields in the returned
FreeVars of rnHsRecUpdFields. This ensures that the typechecker sees
that the typechecking of the record update depends on the typechecking
of the pattern synonym, and typechecks the pattern synonyms first.
Not doing so caused #21898.

Note that this can be removed once GHC proposal #366 is implemented,
as we will be able to fully disambiguate the record update in the renamer,
and can immediately declare the correct used FreeVars instead of having
to over-estimate in case of ambiguity.

************************************************************************
*                                                                      *
\subsubsection{Literals}
*                                                                      *
************************************************************************

When literals occur we have to make sure
that the types and classes they involve
are made available.
-}</span><span>
</span><span id="line-1113"></span><span>
</span><span id="line-1114"></span><span id="local-6989586621682853051"><span class="annot"><a href="GHC.Rename.Pat.html#rnLit"><span class="hs-identifier hs-type">rnLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853051"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1115"></span><span id="rnLit"><span class="annot"><span class="annottext">rnLit :: forall p. HsLit p -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Pat.html#rnLit"><span class="hs-identifier hs-var hs-var">rnLit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsChar"><span class="hs-identifier hs-type">HsChar</span></a></span><span> </span><span class="annot"><span class="annottext">XHsChar p
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854421"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682854421"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#checkErr"><span class="hs-identifier hs-var">checkErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="GHC.Types.Literal.html#inCharRange"><span class="hs-identifier hs-var">inCharRange</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682854421"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnCharLiteralOutOfRange"><span class="hs-identifier hs-var">TcRnCharLiteralOutOfRange</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682854421"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1116"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnLit"><span class="hs-identifier hs-var">rnLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1117"></span><span>
</span><span id="line-1118"></span><span class="hs-comment">-- | Turn a Fractional-looking literal which happens to be an integer into an</span><span>
</span><span id="line-1119"></span><span class="hs-comment">-- Integer-looking literal.</span><span>
</span><span id="line-1120"></span><span class="hs-comment">-- We only convert numbers where the exponent is between 0 and 100 to avoid</span><span>
</span><span id="line-1121"></span><span class="hs-comment">-- converting huge numbers and incurring long compilation times. See #15646.</span><span>
</span><span id="line-1122"></span><span class="annot"><a href="GHC.Rename.Pat.html#generalizeOverLitVal"><span class="hs-identifier hs-type">generalizeOverLitVal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLitVal"><span class="hs-identifier hs-type">OverLitVal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLitVal"><span class="hs-identifier hs-type">OverLitVal</span></a></span><span>
</span><span id="line-1123"></span><span id="generalizeOverLitVal"><span class="annot"><span class="annottext">generalizeOverLitVal :: OverLitVal -&gt; OverLitVal
</span><a href="GHC.Rename.Pat.html#generalizeOverLitVal"><span class="hs-identifier hs-var hs-var">generalizeOverLitVal</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsFractional"><span class="hs-identifier hs-type">HsFractional</span></a></span><span> </span><span id="local-6989586621682854425"><span class="annot"><span class="annottext">fl :: FractionalLit
</span><a href="#local-6989586621682854425"><span class="hs-identifier hs-var">fl</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#FL"><span class="hs-identifier hs-type">FL</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">fl_text :: FractionalLit -&gt; SourceText
</span><a href="GHC.Types.SourceText.html#fl_text"><span class="hs-identifier hs-var">fl_text</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621682854428"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682854428"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">fl_neg :: FractionalLit -&gt; Bool
</span><a href="GHC.Types.SourceText.html#fl_neg"><span class="hs-identifier hs-var">fl_neg</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621682854430"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854430"><span class="hs-identifier hs-var">neg</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">fl_exp :: FractionalLit -&gt; Integer
</span><a href="GHC.Types.SourceText.html#fl_exp"><span class="hs-identifier hs-var">fl_exp</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621682854432"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682854432"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1124"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682854432"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682854432"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-1125"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854433"><span class="annot"><span class="annottext">val :: Rational
</span><a href="#local-6989586621682854433"><span class="hs-identifier hs-var hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FractionalLit -&gt; Rational
</span><a href="GHC.Types.SourceText.html#rationalFromFractionalLit"><span class="hs-identifier hs-var">rationalFromFractionalLit</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621682854425"><span class="hs-identifier hs-var">fl</span></a></span><span>
</span><span id="line-1126"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Integer
forall a. Ratio a -&gt; a
</span><span class="hs-identifier hs-var">denominator</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682854433"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntegralLit -&gt; OverLitVal
</span><a href="Language.Haskell.Syntax.Lit.html#HsIntegral"><span class="hs-identifier hs-var">HsIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#IL"><span class="hs-identifier hs-type">IL</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">il_text :: SourceText
</span><a href="GHC.Types.SourceText.html#il_text"><span class="hs-identifier hs-var">il_text</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682854428"><span class="hs-identifier hs-var">src</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">il_neg :: Bool
</span><a href="GHC.Types.SourceText.html#il_neg"><span class="hs-identifier hs-var">il_neg</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854430"><span class="hs-identifier hs-var">neg</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">il_value :: Integer
</span><a href="GHC.Types.SourceText.html#il_value"><span class="hs-identifier hs-var">il_value</span></a></span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">Rational -&gt; Integer
forall a. Ratio a -&gt; a
</span><span class="hs-identifier hs-var">numerator</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682854433"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1127"></span><span class="annot"><a href="GHC.Rename.Pat.html#generalizeOverLitVal"><span class="hs-identifier hs-var">generalizeOverLitVal</span></a></span><span> </span><span id="local-6989586621682854442"><span class="annot"><span class="annottext">OverLitVal
</span><a href="#local-6989586621682854442"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OverLitVal
</span><a href="#local-6989586621682854442"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1128"></span><span>
</span><span id="line-1129"></span><span id="local-6989586621682853223"><span class="annot"><a href="GHC.Rename.Pat.html#isNegativeZeroOverLit"><span class="hs-identifier hs-type">isNegativeZeroOverLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#XXOverLit"><span class="hs-identifier hs-type">XXOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853223"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#DataConCantHappen"><span class="hs-identifier hs-type">DataConCantHappen</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853223"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1130"></span><span id="isNegativeZeroOverLit"><span class="annot"><span class="annottext">isNegativeZeroOverLit :: forall t. (XXOverLit t ~ DataConCantHappen) =&gt; HsOverLit t -&gt; Bool
</span><a href="GHC.Rename.Pat.html#isNegativeZeroOverLit"><span class="hs-identifier hs-var hs-var">isNegativeZeroOverLit</span></a></span></span><span> </span><span id="local-6989586621682854453"><span class="annot"><span class="annottext">HsOverLit t
</span><a href="#local-6989586621682854453"><span class="hs-identifier hs-var">lit</span></a></span></span><span>
</span><span id="line-1131"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsOverLit t -&gt; OverLitVal
forall p. HsOverLit p -&gt; OverLitVal
</span><a href="Language.Haskell.Syntax.Lit.html#ol_val"><span class="hs-identifier hs-var">ol_val</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit t
</span><a href="#local-6989586621682854453"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1132"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsIntegral"><span class="hs-identifier hs-type">HsIntegral</span></a></span><span> </span><span id="local-6989586621682854455"><span class="annot"><span class="annottext">IntegralLit
</span><a href="#local-6989586621682854455"><span class="hs-identifier hs-var">i</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IntegralLit -&gt; Integer
</span><a href="GHC.Types.SourceText.html#il_value"><span class="hs-identifier hs-var">il_value</span></a></span><span> </span><span class="annot"><span class="annottext">IntegralLit
</span><a href="#local-6989586621682854455"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">IntegralLit -&gt; Bool
</span><a href="GHC.Types.SourceText.html#il_neg"><span class="hs-identifier hs-var">il_neg</span></a></span><span> </span><span class="annot"><span class="annottext">IntegralLit
</span><a href="#local-6989586621682854455"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1133"></span><span>        </span><span class="hs-comment">-- For HsFractional, the value of fl is n * (b ^^ e) so it is sufficient</span><span>
</span><span id="line-1134"></span><span>        </span><span class="hs-comment">-- to check if n = 0. b is equal to either 2 or 10. We don't call</span><span>
</span><span id="line-1135"></span><span>        </span><span class="hs-comment">-- rationalFromFractionalLit here as it is expensive when e is big.</span><span>
</span><span id="line-1136"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsFractional"><span class="hs-identifier hs-type">HsFractional</span></a></span><span> </span><span id="local-6989586621682854456"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621682854456"><span class="hs-identifier hs-var">fl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Rational
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Rational -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit -&gt; Rational
</span><a href="GHC.Types.SourceText.html#fl_signi"><span class="hs-identifier hs-var">fl_signi</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621682854456"><span class="hs-identifier hs-var">fl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit -&gt; Bool
</span><a href="GHC.Types.SourceText.html#fl_neg"><span class="hs-identifier hs-var">fl_neg</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621682854456"><span class="hs-identifier hs-var">fl</span></a></span><span>
</span><span id="line-1137"></span><span>        </span><span class="annot"><span class="annottext">OverLitVal
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1138"></span><span>
</span><span id="line-1139"></span><span class="hs-comment">{-
Note [Negative zero]
~~~~~~~~~~~~~~~~~~~~~~~~~
There were problems with negative zero in conjunction with Negative Literals
extension. Numeric literal value is contained in Integer and Rational types
inside IntegralLit and FractionalLit. These types cannot represent negative
zero value. So we had to add explicit field 'neg' which would hold information
about literal sign. Here in rnOverLit we use it to detect negative zeroes and
in this case return not only literal itself but also negateName so that users
can apply it explicitly. In this case it stays negative zero.  #13211
-}</span><span>
</span><span id="line-1150"></span><span>
</span><span id="line-1151"></span><span id="local-6989586621682853056"><span class="annot"><a href="GHC.Rename.Pat.html#rnOverLit"><span class="hs-identifier hs-type">rnOverLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#XXOverLit"><span class="hs-identifier hs-type">XXOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853056"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#DataConCantHappen"><span class="hs-identifier hs-type">DataConCantHappen</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853056"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1152"></span><span>             </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1153"></span><span id="rnOverLit"><span class="annot"><span class="annottext">rnOverLit :: forall t.
(XXOverLit t ~ DataConCantHappen) =&gt;
HsOverLit t
-&gt; RnM ((HsOverLit GhcRn, Maybe (HsExpr GhcRn)), FreeVars)
</span><a href="GHC.Rename.Pat.html#rnOverLit"><span class="hs-identifier hs-var hs-var">rnOverLit</span></a></span></span><span> </span><span id="local-6989586621682854470"><span class="annot"><span class="annottext">HsOverLit t
</span><a href="#local-6989586621682854470"><span class="hs-identifier hs-var">origLit</span></a></span></span><span>
</span><span id="line-1154"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854471"><span class="annot"><a href="#local-6989586621682854471"><span class="hs-identifier hs-var">opt_NumDecimals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.NumDecimals</span></span><span>
</span><span id="line-1155"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682854473"><span class="annot"><a href="#local-6989586621682854473"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLit"><span class="hs-identifier hs-type">OverLit</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#ol_val"><span class="hs-identifier hs-var">ol_val</span></a></span><span class="hs-glyph">=</span><span id="local-6989586621682854475"><span class="annot"><a href="#local-6989586621682854475"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1156"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621682854471"><span class="hs-identifier hs-type">opt_NumDecimals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854470"><span class="hs-identifier hs-type">origLit</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#ol_val"><span class="hs-identifier hs-var">ol_val</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#generalizeOverLitVal"><span class="hs-identifier hs-type">generalizeOverLitVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#ol_val"><span class="hs-identifier hs-var">ol_val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854470"><span class="hs-identifier hs-type">origLit</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-1157"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">otherwise</span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854470"><span class="hs-identifier hs-type">origLit</span></a></span><span>
</span><span id="line-1158"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-1159"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854476"><span class="annot"><a href="#local-6989586621682854476"><span class="hs-identifier hs-var hs-var">std_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OverLitVal -&gt; Name
</span><a href="GHC.Tc.Utils.TcMType.html#hsOverLitName"><span class="hs-identifier hs-var">hsOverLitName</span></a></span><span> </span><span class="annot"><span class="annottext">OverLitVal
</span><a href="#local-6989586621682854475"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-1160"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854477"><span class="annot"><a href="#local-6989586621682854477"><span class="hs-identifier hs-var">from_thing_name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854478"><span class="annot"><a href="#local-6989586621682854478"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#lookupSyntaxName"><span class="hs-identifier hs-type">lookupSyntaxName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854476"><span class="hs-identifier hs-type">std_name</span></a></span><span>
</span><span id="line-1161"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682854479"><span class="annot"><a href="#local-6989586621682854479"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getSrcSpanM"><span class="hs-identifier hs-type">getSrcSpanM</span></a></span><span> </span><span class="hs-comment">-- See Note [Source locations for implicit function calls] in GHC.Iface.Ext.Ast</span><span>
</span><span id="line-1162"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854480"><span class="annot"><a href="#local-6989586621682854480"><span class="hs-identifier hs-var hs-var">rebindable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854477"><span class="hs-identifier hs-var">from_thing_name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854476"><span class="hs-identifier hs-var">std_name</span></a></span><span>
</span><span id="line-1163"></span><span>              </span><span id="local-6989586621682854482"><span class="annot"><a href="#local-6989586621682854482"><span class="hs-identifier hs-var hs-var">lit'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsOverLit t
</span><a href="#local-6989586621682854473"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#ol_ext"><span class="hs-identifier hs-var">ol_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#OverLitRn"><span class="hs-identifier hs-type">OverLitRn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#ol_rebindable"><span class="hs-identifier hs-var">ol_rebindable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854480"><span class="hs-identifier hs-type">rebindable</span></a></span><span>
</span><span id="line-1164"></span><span>                                              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#ol_from_fun"><span class="hs-identifier hs-var">ol_from_fun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-type">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854479"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854477"><span class="hs-identifier hs-type">from_thing_name</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1165"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#isNegativeZeroOverLit"><span class="hs-identifier hs-type">isNegativeZeroOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854482"><span class="hs-identifier hs-type">lit'</span></a></span><span>
</span><span id="line-1166"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854487"><span class="annot"><a href="#local-6989586621682854487"><span class="hs-identifier hs-var">negate_name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854488"><span class="annot"><a href="#local-6989586621682854488"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#lookupSyntaxExpr"><span class="hs-identifier hs-type">lookupSyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#negateName"><span class="hs-identifier hs-type">negateName</span></a></span><span>
</span><span id="line-1167"></span><span>                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854482"><span class="hs-identifier hs-type">lit'</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#ol_val"><span class="hs-identifier hs-var">ol_val</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#negateOverLitVal"><span class="hs-identifier hs-type">negateOverLitVal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854475"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621682854487"><span class="hs-identifier hs-type">negate_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1168"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682854478"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854488"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1169"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854482"><span class="hs-identifier hs-type">lit'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682854478"><span class="hs-identifier hs-type">fvs1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1170"></span><span>
</span><span id="line-1171"></span><span>
</span><span id="line-1172"></span><span class="annot"><a href="GHC.Rename.Pat.html#rnHsTyPat"><span class="hs-identifier hs-type">rnHsTyPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-1173"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyPat"><span class="hs-identifier hs-type">HsTyPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1174"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyPat"><span class="hs-identifier hs-type">HsTyPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1175"></span><span id="rnHsTyPat"><span class="annot"><span class="annottext">rnHsTyPat :: HsDocContext -&gt; HsTyPat GhcPs -&gt; CpsRn (HsTyPat GhcRn)
</span><a href="GHC.Rename.Pat.html#rnHsTyPat"><span class="hs-identifier hs-var hs-var">rnHsTyPat</span></a></span></span><span> </span><span id="local-6989586621682854491"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854491"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621682854492"><span class="annot"><span class="annottext">HsTyPat GhcPs
</span><a href="#local-6989586621682854492"><span class="hs-identifier hs-var">sigType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsTyPat GhcPs
</span><a href="#local-6989586621682854492"><span class="hs-identifier hs-var">sigType</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1176"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTP"><span class="hs-identifier hs-type">HsTP</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hstp_body :: forall pass. HsTyPat pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hstp_body"><span class="hs-identifier hs-var">hstp_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682854495"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854495"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1177"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682854496"><span class="annot"><a href="#local-6989586621682854496"><span class="hs-identifier hs-var">hs_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854497"><span class="annot"><a href="#local-6989586621682854497"><span class="hs-identifier hs-var">tpb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn))
-&gt; HsDocContext
-&gt; CpsRn
     (GenLocated (EpAnn AnnListItem) (HsType GhcRn), HsTyPatRnBuilder)
forall a. TPRnM a -&gt; HsDocContext -&gt; CpsRn (a, HsTyPatRnBuilder)
</span><a href="GHC.Rename.Pat.html#runTPRnM"><span class="hs-identifier hs-var">runTPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854495"><span class="hs-identifier hs-var">hs_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854491"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1178"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTP"><span class="hs-identifier hs-type">HsTP</span></a></span><span>
</span><span id="line-1179"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hstp_body"><span class="hs-identifier hs-var">hstp_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682854496"><span class="hs-identifier hs-type">hs_ty'</span></a></span><span>
</span><span id="line-1180"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hstp_ext"><span class="hs-identifier hs-var">hstp_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#buildHsTyPatRn"><span class="hs-identifier hs-type">buildHsTyPatRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854497"><span class="hs-identifier hs-type">tpb</span></a></span><span>
</span><span id="line-1181"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-1182"></span><span>
</span><span id="line-1183"></span><span class="hs-comment">-- | Type pattern renaming monad</span><span>
</span><span id="line-1184"></span><span class="hs-comment">-- For the OccSet in the ReaderT, see Note [Locally bound names in type patterns]</span><span>
</span><span id="line-1185"></span><span class="hs-comment">-- For the HsTyPatRnBuilderRn in the WriterT, see Note [Implicit and explicit type variable binders]</span><span>
</span><span id="line-1186"></span><span class="hs-comment">-- For the CpsRn base monad, see Note [CpsRn monad]</span><span>
</span><span id="line-1187"></span><span class="hs-comment">-- For why we need CpsRn in TPRnM see Note [Left-to-right scoping of type patterns]</span><span>
</span><span id="line-1188"></span><span class="hs-keyword">newtype</span><span> </span><span id="TPRnM"><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-var">TPRnM</span></a></span></span><span> </span><span id="local-6989586621682853273"><span class="annot"><a href="#local-6989586621682853273"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1189"></span><span>  </span><span id="MkTPRnM"><span class="annot"><a href="GHC.Rename.Pat.html#MkTPRnM"><span class="hs-identifier hs-var">MkTPRnM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Reader.html#ReaderT"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccSet"><span class="hs-identifier hs-type">OccSet</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Writer.CPS.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#HsTyPatRnBuilder"><span class="hs-identifier hs-type">HsTyPatRnBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682853273"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1190"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682854504"><span id="local-6989586621682854510"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; TPRnM a -&gt; TPRnM b)
-&gt; (forall a b. a -&gt; TPRnM b -&gt; TPRnM a) -&gt; Functor TPRnM
forall a b. a -&gt; TPRnM b -&gt; TPRnM a
forall a b. (a -&gt; b) -&gt; TPRnM a -&gt; TPRnM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; TPRnM a -&gt; TPRnM b
fmap :: forall a b. (a -&gt; b) -&gt; TPRnM a -&gt; TPRnM b
$c&lt;$ :: forall a b. a -&gt; TPRnM b -&gt; TPRnM a
&lt;$ :: forall a b. a -&gt; TPRnM b -&gt; TPRnM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854518"><span id="local-6989586621682854524"><span id="local-6989586621682854529"><span id="local-6989586621682854534"><span id="local-6989586621682854539"><span class="annot"><span class="annottext">Functor TPRnM
Functor TPRnM =&gt;
(forall a. a -&gt; TPRnM a)
-&gt; (forall a b. TPRnM (a -&gt; b) -&gt; TPRnM a -&gt; TPRnM b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; TPRnM a -&gt; TPRnM b -&gt; TPRnM c)
-&gt; (forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM b)
-&gt; (forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM a)
-&gt; Applicative TPRnM
forall a. a -&gt; TPRnM a
forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM a
forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM b
forall a b. TPRnM (a -&gt; b) -&gt; TPRnM a -&gt; TPRnM b
forall a b c. (a -&gt; b -&gt; c) -&gt; TPRnM a -&gt; TPRnM b -&gt; TPRnM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; TPRnM a
pure :: forall a. a -&gt; TPRnM a
$c&lt;*&gt; :: forall a b. TPRnM (a -&gt; b) -&gt; TPRnM a -&gt; TPRnM b
&lt;*&gt; :: forall a b. TPRnM (a -&gt; b) -&gt; TPRnM a -&gt; TPRnM b
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; TPRnM a -&gt; TPRnM b -&gt; TPRnM c
liftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; TPRnM a -&gt; TPRnM b -&gt; TPRnM c
$c*&gt; :: forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM b
*&gt; :: forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM b
$c&lt;* :: forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM a
&lt;* :: forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854549"><span id="local-6989586621682854554"><span id="local-6989586621682854558"><span class="annot"><span class="annottext">Applicative TPRnM
Applicative TPRnM =&gt;
(forall a b. TPRnM a -&gt; (a -&gt; TPRnM b) -&gt; TPRnM b)
-&gt; (forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM b)
-&gt; (forall a. a -&gt; TPRnM a)
-&gt; Monad TPRnM
forall a. a -&gt; TPRnM a
forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM b
forall a b. TPRnM a -&gt; (a -&gt; TPRnM b) -&gt; TPRnM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b. TPRnM a -&gt; (a -&gt; TPRnM b) -&gt; TPRnM b
&gt;&gt;= :: forall a b. TPRnM a -&gt; (a -&gt; TPRnM b) -&gt; TPRnM b
$c&gt;&gt; :: forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM b
&gt;&gt; :: forall a b. TPRnM a -&gt; TPRnM b -&gt; TPRnM b
$creturn :: forall a. a -&gt; TPRnM a
return :: forall a. a -&gt; TPRnM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1191"></span><span>
</span><span id="line-1192"></span><span id="local-6989586621682853234"><span class="annot"><a href="GHC.Rename.Pat.html#runTPRnM"><span class="hs-identifier hs-type">runTPRnM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853234"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853234"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#HsTyPatRnBuilder"><span class="hs-identifier hs-type">HsTyPatRnBuilder</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1193"></span><span id="runTPRnM"><span class="annot"><span class="annottext">runTPRnM :: forall a. TPRnM a -&gt; HsDocContext -&gt; CpsRn (a, HsTyPatRnBuilder)
</span><a href="GHC.Rename.Pat.html#runTPRnM"><span class="hs-identifier hs-var hs-var">runTPRnM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#MkTPRnM"><span class="hs-identifier hs-type">MkTPRnM</span></a></span><span> </span><span id="local-6989586621682854562"><span class="annot"><span class="annottext">ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
</span><a href="#local-6989586621682854562"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682854563"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854563"><span class="hs-identifier hs-var">doc_ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT HsTyPatRnBuilder CpsRn a -&gt; CpsRn (a, HsTyPatRnBuilder)
forall w (m :: * -&gt; *) a. Monoid w =&gt; WriterT w m a -&gt; m (a, w)
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Writer.CPS.html#runWriterT"><span class="hs-identifier hs-var">runWriterT</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT HsTyPatRnBuilder CpsRn a -&gt; CpsRn (a, HsTyPatRnBuilder))
-&gt; WriterT HsTyPatRnBuilder CpsRn a -&gt; CpsRn (a, HsTyPatRnBuilder)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; (HsDocContext, OccSet) -&gt; WriterT HsTyPatRnBuilder CpsRn a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Reader.html#runReaderT"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
</span><a href="#local-6989586621682854562"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854563"><span class="hs-identifier hs-var">doc_ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OccSet
</span><a href="GHC.Types.Name.Occurrence.html#emptyOccSet"><span class="hs-identifier hs-var">emptyOccSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1194"></span><span>
</span><span id="line-1195"></span><span class="annot"><a href="GHC.Rename.Pat.html#askLocals"><span class="hs-identifier hs-type">askLocals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccSet"><span class="hs-identifier hs-type">OccSet</span></a></span><span>
</span><span id="line-1196"></span><span id="askLocals"><span class="annot"><span class="annottext">askLocals :: TPRnM OccSet
</span><a href="GHC.Rename.Pat.html#askLocals"><span class="hs-identifier hs-var hs-var">askLocals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT
  (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) OccSet
-&gt; TPRnM OccSet
forall a.
ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#MkTPRnM"><span class="hs-identifier hs-var">MkTPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((HsDocContext, OccSet) -&gt; OccSet)
-&gt; ReaderT
     (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) OccSet
forall (m :: * -&gt; *) r a. Monad m =&gt; (r -&gt; a) -&gt; ReaderT r m a
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Reader.html#asks"><span class="hs-identifier hs-var">asks</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDocContext, OccSet) -&gt; OccSet
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span>
</span><span id="line-1197"></span><span>
</span><span id="line-1198"></span><span class="annot"><a href="GHC.Rename.Pat.html#askDocContext"><span class="hs-identifier hs-type">askDocContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-1199"></span><span id="askDocContext"><span class="annot"><span class="annottext">askDocContext :: TPRnM HsDocContext
</span><a href="GHC.Rename.Pat.html#askDocContext"><span class="hs-identifier hs-var hs-var">askDocContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT
  (HsDocContext, OccSet)
  (WriterT HsTyPatRnBuilder CpsRn)
  HsDocContext
-&gt; TPRnM HsDocContext
forall a.
ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#MkTPRnM"><span class="hs-identifier hs-var">MkTPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((HsDocContext, OccSet) -&gt; HsDocContext)
-&gt; ReaderT
     (HsDocContext, OccSet)
     (WriterT HsTyPatRnBuilder CpsRn)
     HsDocContext
forall (m :: * -&gt; *) r a. Monad m =&gt; (r -&gt; a) -&gt; ReaderT r m a
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Reader.html#asks"><span class="hs-identifier hs-var">asks</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDocContext, OccSet) -&gt; HsDocContext
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span>
</span><span id="line-1200"></span><span>
</span><span id="line-1201"></span><span class="annot"><a href="GHC.Rename.Pat.html#tellTPB"><span class="hs-identifier hs-type">tellTPB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#HsTyPatRnBuilder"><span class="hs-identifier hs-type">HsTyPatRnBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1202"></span><span id="tellTPB"><span class="annot"><span class="annottext">tellTPB :: HsTyPatRnBuilder -&gt; TPRnM ()
</span><a href="GHC.Rename.Pat.html#tellTPB"><span class="hs-identifier hs-var hs-var">tellTPB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) ()
-&gt; TPRnM ()
forall a.
ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#MkTPRnM"><span class="hs-identifier hs-var">MkTPRnM</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) ()
 -&gt; TPRnM ())
-&gt; (HsTyPatRnBuilder
    -&gt; ReaderT
         (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) ())
-&gt; HsTyPatRnBuilder
-&gt; TPRnM ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WriterT HsTyPatRnBuilder CpsRn ()
-&gt; ReaderT
     (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) ()
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; ReaderT (HsDocContext, OccSet) m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT HsTyPatRnBuilder CpsRn ()
 -&gt; ReaderT
      (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) ())
-&gt; (HsTyPatRnBuilder -&gt; WriterT HsTyPatRnBuilder CpsRn ())
-&gt; HsTyPatRnBuilder
-&gt; ReaderT
     (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HsTyPatRnBuilder -&gt; WriterT HsTyPatRnBuilder CpsRn ()
forall w (m :: * -&gt; *). (Monoid w, Monad m) =&gt; w -&gt; WriterT w m ()
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Writer.CPS.html#tell"><span class="hs-identifier hs-var">tell</span></a></span><span>
</span><span id="line-1203"></span><span>
</span><span id="line-1204"></span><span id="local-6989586621682853286"><span class="annot"><a href="GHC.Rename.Pat.html#liftRnFV"><span class="hs-identifier hs-type">liftRnFV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853286"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853286"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1205"></span><span id="liftRnFV"><span class="annot"><span class="annottext">liftRnFV :: forall a. RnM (a, FreeVars) -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftRnFV"><span class="hs-identifier hs-var hs-var">liftRnFV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CpsRn a -&gt; TPRnM a
forall a. CpsRn a -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftTPRnCps"><span class="hs-identifier hs-var">liftTPRnCps</span></a></span><span> </span><span class="annot"><span class="annottext">(CpsRn a -&gt; TPRnM a)
-&gt; (RnM (a, FreeVars) -&gt; CpsRn a) -&gt; RnM (a, FreeVars) -&gt; TPRnM a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RnM (a, FreeVars) -&gt; CpsRn a
forall a. RnM (a, FreeVars) -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCpsFV"><span class="hs-identifier hs-var">liftCpsFV</span></a></span><span>
</span><span id="line-1206"></span><span>
</span><span id="line-1207"></span><span id="local-6989586621682853289"><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853289"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853289"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1208"></span><span id="liftRn"><span class="annot"><span class="annottext">liftRn :: forall a. RnM a -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-var hs-var">liftRn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CpsRn a -&gt; TPRnM a
forall a. CpsRn a -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftTPRnCps"><span class="hs-identifier hs-var">liftTPRnCps</span></a></span><span> </span><span class="annot"><span class="annottext">(CpsRn a -&gt; TPRnM a) -&gt; (RnM a -&gt; CpsRn a) -&gt; RnM a -&gt; TPRnM a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RnM a -&gt; CpsRn a
forall a. RnM a -&gt; CpsRn a
</span><a href="GHC.Rename.Pat.html#liftCps"><span class="hs-identifier hs-var">liftCps</span></a></span><span>
</span><span id="line-1209"></span><span>
</span><span id="line-1210"></span><span id="local-6989586621682853291"><span class="annot"><a href="GHC.Rename.Pat.html#liftRnWithCont"><span class="hs-identifier hs-type">liftRnWithCont</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682853292"><span class="annot"><a href="#local-6989586621682853292"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853291"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853292"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853292"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853291"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1211"></span><span id="liftRnWithCont"><span class="annot"><span class="annottext">liftRnWithCont :: forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; TPRnM b
</span><a href="GHC.Rename.Pat.html#liftRnWithCont"><span class="hs-identifier hs-var hs-var">liftRnWithCont</span></a></span></span><span> </span><span id="local-6989586621682854579"><span class="annot"><span class="annottext">forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682854579"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CpsRn b -&gt; TPRnM b
forall a. CpsRn a -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftTPRnCps"><span class="hs-identifier hs-var">liftTPRnCps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#liftCpsWithCont"><span class="hs-identifier hs-var">liftCpsWithCont</span></a></span><span> </span><span class="annot"><span class="annottext">(b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682854579"><span class="hs-identifier hs-var">cont</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1212"></span><span>
</span><span id="line-1213"></span><span id="local-6989586621682853288"><span class="annot"><a href="GHC.Rename.Pat.html#liftTPRnCps"><span class="hs-identifier hs-type">liftTPRnCps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#CpsRn"><span class="hs-identifier hs-type">CpsRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853288"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853288"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1214"></span><span id="liftTPRnCps"><span class="annot"><span class="annottext">liftTPRnCps :: forall a. CpsRn a -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftTPRnCps"><span class="hs-identifier hs-var hs-var">liftTPRnCps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; TPRnM a
forall a.
ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#MkTPRnM"><span class="hs-identifier hs-var">MkTPRnM</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
 -&gt; TPRnM a)
-&gt; (CpsRn a
    -&gt; ReaderT
         (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a)
-&gt; CpsRn a
-&gt; TPRnM a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WriterT HsTyPatRnBuilder CpsRn a
-&gt; ReaderT
     (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; ReaderT (HsDocContext, OccSet) m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT HsTyPatRnBuilder CpsRn a
 -&gt; ReaderT
      (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a)
-&gt; (CpsRn a -&gt; WriterT HsTyPatRnBuilder CpsRn a)
-&gt; CpsRn a
-&gt; ReaderT
     (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CpsRn a -&gt; WriterT HsTyPatRnBuilder CpsRn a
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; WriterT HsTyPatRnBuilder m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span>
</span><span id="line-1215"></span><span>
</span><span id="line-1216"></span><span id="local-6989586621682853297"><span class="annot"><a href="GHC.Rename.Pat.html#liftTPRnRaw"><span class="hs-identifier hs-type">liftTPRnRaw</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1217"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682853298"><span class="annot"><a href="#local-6989586621682853298"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-operator">.</span><span>
</span><span id="line-1218"></span><span>    </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1219"></span><span>    </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccSet"><span class="hs-identifier hs-type">OccSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1220"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853297"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#HsTyPatRnBuilder"><span class="hs-identifier hs-type">HsTyPatRnBuilder</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853298"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1221"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853298"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1222"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853297"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1223"></span><span id="liftTPRnRaw"><span class="annot"><span class="annottext">liftTPRnRaw :: forall a.
(forall r.
 HsDocContext
 -&gt; OccSet
 -&gt; ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
 -&gt; RnM (r, FreeVars))
-&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftTPRnRaw"><span class="hs-identifier hs-var hs-var">liftTPRnRaw</span></a></span></span><span> </span><span id="local-6989586621682854588"><span class="annot"><span class="annottext">forall r.
HsDocContext
-&gt; OccSet
-&gt; ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682854588"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; TPRnM a
forall a.
ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#MkTPRnM"><span class="hs-identifier hs-var">MkTPRnM</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
 -&gt; TPRnM a)
-&gt; ReaderT
     (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; TPRnM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((HsDocContext, OccSet) -&gt; WriterT HsTyPatRnBuilder CpsRn a)
-&gt; ReaderT
     (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
forall r (m :: * -&gt; *) a. (r -&gt; m a) -&gt; ReaderT r m a
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Reader.html#ReaderT"><span class="hs-identifier hs-var">ReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">(((HsDocContext, OccSet) -&gt; WriterT HsTyPatRnBuilder CpsRn a)
 -&gt; ReaderT
      (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a)
-&gt; ((HsDocContext, OccSet) -&gt; WriterT HsTyPatRnBuilder CpsRn a)
-&gt; ReaderT
     (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682854590"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854590"><span class="hs-identifier hs-var">doc_ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854591"><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621682854591"><span class="hs-identifier hs-var">locals</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CpsRn (a, HsTyPatRnBuilder) -&gt; WriterT HsTyPatRnBuilder CpsRn a
forall (m :: * -&gt; *) w a.
(Functor m, Monoid w) =&gt;
m (a, w) -&gt; WriterT w m a
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Writer.CPS.html#writerT"><span class="hs-identifier hs-var">writerT</span></a></span><span> </span><span class="annot"><span class="annottext">(CpsRn (a, HsTyPatRnBuilder) -&gt; WriterT HsTyPatRnBuilder CpsRn a)
-&gt; CpsRn (a, HsTyPatRnBuilder) -&gt; WriterT HsTyPatRnBuilder CpsRn a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(forall r.
 ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn (a, HsTyPatRnBuilder)
forall b.
(forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn b
</span><a href="GHC.Rename.Pat.html#liftCpsWithCont"><span class="hs-identifier hs-var">liftCpsWithCont</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext
-&gt; OccSet
-&gt; ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
forall r.
HsDocContext
-&gt; OccSet
-&gt; ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682854588"><span class="hs-identifier hs-var">cont</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854590"><span class="hs-identifier hs-var">doc_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621682854591"><span class="hs-identifier hs-var">locals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1224"></span><span>
</span><span id="line-1225"></span><span id="local-6989586621682853307"><span id="local-6989586621682853308"><span class="annot"><a href="GHC.Rename.Pat.html#unTPRnRaw"><span class="hs-identifier hs-type">unTPRnRaw</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1226"></span><span>  </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853307"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1227"></span><span>  </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1228"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccSet"><span class="hs-identifier hs-type">OccSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1229"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853307"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#HsTyPatRnBuilder"><span class="hs-identifier hs-type">HsTyPatRnBuilder</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853308"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1230"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853308"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1231"></span><span id="unTPRnRaw"><span class="annot"><span class="annottext">unTPRnRaw :: forall a r.
TPRnM a
-&gt; HsDocContext
-&gt; OccSet
-&gt; ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
</span><a href="GHC.Rename.Pat.html#unTPRnRaw"><span class="hs-identifier hs-var hs-var">unTPRnRaw</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#MkTPRnM"><span class="hs-identifier hs-type">MkTPRnM</span></a></span><span> </span><span id="local-6989586621682854595"><span class="annot"><span class="annottext">ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
</span><a href="#local-6989586621682854595"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682854596"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854596"><span class="hs-identifier hs-var">doc_ctxt</span></a></span></span><span> </span><span id="local-6989586621682854597"><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621682854597"><span class="hs-identifier hs-var">locals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CpsRn (a, HsTyPatRnBuilder)
-&gt; forall r.
   ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
forall b.
CpsRn b -&gt; forall r. (b -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
</span><a href="GHC.Rename.Pat.html#unCpsRn"><span class="hs-identifier hs-var">unCpsRn</span></a></span><span> </span><span class="annot"><span class="annottext">(CpsRn (a, HsTyPatRnBuilder)
 -&gt; forall r.
    ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars))
-&gt; CpsRn (a, HsTyPatRnBuilder)
-&gt; forall r.
   ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars)) -&gt; RnM (r, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">WriterT HsTyPatRnBuilder CpsRn a -&gt; CpsRn (a, HsTyPatRnBuilder)
forall w (m :: * -&gt; *) a. Monoid w =&gt; WriterT w m a -&gt; m (a, w)
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Writer.CPS.html#runWriterT"><span class="hs-identifier hs-var">runWriterT</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT HsTyPatRnBuilder CpsRn a -&gt; CpsRn (a, HsTyPatRnBuilder))
-&gt; WriterT HsTyPatRnBuilder CpsRn a -&gt; CpsRn (a, HsTyPatRnBuilder)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
-&gt; (HsDocContext, OccSet) -&gt; WriterT HsTyPatRnBuilder CpsRn a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../../transformers-0.6.1.1-inplace/src/Control.Monad.Trans.Reader.html#runReaderT"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">ReaderT (HsDocContext, OccSet) (WriterT HsTyPatRnBuilder CpsRn) a
</span><a href="#local-6989586621682854595"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854596"><span class="hs-identifier hs-var">doc_ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621682854597"><span class="hs-identifier hs-var">locals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1232"></span><span>
</span><span id="line-1233"></span><span id="local-6989586621682853311"><span id="local-6989586621682853312"><span id="local-6989586621682853313"><span class="annot"><a href="GHC.Rename.Pat.html#wrapSrcSpanTPRnM"><span class="hs-identifier hs-type">wrapSrcSpanTPRnM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682853311"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853312"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853313"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853311"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853313"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682853312"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1234"></span><span id="wrapSrcSpanTPRnM"><span class="annot"><span class="annottext">wrapSrcSpanTPRnM :: forall a b ann.
(a -&gt; TPRnM b) -&gt; LocatedAn ann a -&gt; TPRnM (LocatedAn ann b)
</span><a href="GHC.Rename.Pat.html#wrapSrcSpanTPRnM"><span class="hs-identifier hs-var hs-var">wrapSrcSpanTPRnM</span></a></span></span><span> </span><span id="local-6989586621682854601"><span class="annot"><span class="annottext">a -&gt; TPRnM b
</span><a href="#local-6989586621682854601"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854602"><span class="annot"><span class="annottext">EpAnn ann
</span><a href="#local-6989586621682854602"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682854603"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682854603"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1235"></span><span>  </span><span id="local-6989586621682854604"><span class="annot"><a href="#local-6989586621682854604"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; TPRnM b
</span><a href="#local-6989586621682854601"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682854603"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1236"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854602"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854604"><span class="hs-identifier hs-type">a'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1237"></span><span>
</span><span id="line-1238"></span><span class="annot"><a href="GHC.Rename.Pat.html#lookupTypeOccTPRnM"><span class="hs-identifier hs-type">lookupTypeOccTPRnM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1239"></span><span id="lookupTypeOccTPRnM"><span class="annot"><span class="annottext">lookupTypeOccTPRnM :: RdrName -&gt; TPRnM Name
</span><a href="GHC.Rename.Pat.html#lookupTypeOccTPRnM"><span class="hs-identifier hs-var hs-var">lookupTypeOccTPRnM</span></a></span></span><span> </span><span id="local-6989586621682854606"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854606"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnM (Name, FreeVars) -&gt; TPRnM Name
forall a. RnM (a, FreeVars) -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftRnFV"><span class="hs-identifier hs-var">liftRnFV</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM (Name, FreeVars) -&gt; TPRnM Name)
-&gt; RnM (Name, FreeVars) -&gt; TPRnM Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1240"></span><span>  </span><span id="local-6989586621682854607"><span class="annot"><a href="#local-6989586621682854607"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Env.html#lookupTypeOccRn"><span class="hs-identifier hs-var">lookupTypeOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854606"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-1241"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854607"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-type">unitFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854607"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1242"></span><span>
</span><span id="line-1243"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-type">rn_lty_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1244"></span><span id="rn_lty_pat"><span class="annot"><span class="annottext">rn_lty_pat :: LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var hs-var">rn_lty_pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854609"><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854609"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682854610"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682854610"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1245"></span><span>  </span><span id="local-6989586621682854611"><span class="annot"><a href="#local-6989586621682854611"><span class="hs-identifier hs-var">hs_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; TPRnM (HsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682854610"><span class="hs-identifier hs-var">hs_ty</span></a></span><span>
</span><span id="line-1246"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854609"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854611"><span class="hs-identifier hs-type">hs_ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1247"></span><span>
</span><span id="line-1248"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat_var"><span class="hs-identifier hs-type">rn_ty_pat_var</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1249"></span><span id="rn_ty_pat_var"><span class="annot"><span class="annottext">rn_ty_pat_var :: GenLocated SrcSpanAnnN RdrName -&gt; TPRnM (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#rn_ty_pat_var"><span class="hs-identifier hs-var hs-var">rn_ty_pat_var</span></a></span></span><span> </span><span id="local-6989586621682854614"><span class="annot"><span class="annottext">lrdr :: GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854614"><span class="hs-identifier hs-var">lrdr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854615"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682854615"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682854616"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682854616"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1250"></span><span>  </span><span id="local-6989586621682854617"><span class="annot"><a href="#local-6989586621682854617"><span class="hs-identifier hs-var">locals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TPRnM OccSet
</span><a href="GHC.Rename.Pat.html#askLocals"><span class="hs-identifier hs-var">askLocals</span></a></span><span>
</span><span id="line-1251"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isRdrTyVar"><span class="hs-identifier hs-type">isRdrTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854616"><span class="hs-identifier hs-type">rdr</span></a></span><span>
</span><span id="line-1252"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#elemOccSet"><span class="hs-identifier hs-type">elemOccSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-type">occName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854616"><span class="hs-identifier hs-type">rdr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854617"><span class="hs-identifier hs-type">locals</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- See Note [Locally bound names in type patterns]</span><span>
</span><span id="line-1253"></span><span>
</span><span id="line-1254"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- binder</span><span>
</span><span id="line-1255"></span><span>      </span><span id="local-6989586621682854619"><span class="annot"><a href="#local-6989586621682854619"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftTPRnCps"><span class="hs-identifier hs-type">liftTPRnCps</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#newPatName"><span class="hs-identifier hs-type">newPatName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#LamMk"><span class="hs-identifier hs-type">LamMk</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854614"><span class="hs-identifier hs-type">lrdr</span></a></span><span>
</span><span id="line-1256"></span><span>      </span><span class="annot"><a href="GHC.Rename.Pat.html#tellTPB"><span class="hs-identifier hs-type">tellTPB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#tpBuilderExplicitTV"><span class="hs-identifier hs-type">tpBuilderExplicitTV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854619"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1257"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854615"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854619"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1258"></span><span>
</span><span id="line-1259"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- usage</span><span>
</span><span id="line-1260"></span><span>      </span><span id="local-6989586621682854621"><span class="annot"><a href="#local-6989586621682854621"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#lookupTypeOccTPRnM"><span class="hs-identifier hs-type">lookupTypeOccTPRnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854616"><span class="hs-identifier hs-type">rdr</span></a></span><span>
</span><span id="line-1261"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854615"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854621"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1262"></span><span>
</span><span id="line-1263"></span><span class="hs-comment">-- | Rename type patterns</span><span>
</span><span id="line-1264"></span><span class="hs-comment">--</span><span>
</span><span id="line-1265"></span><span class="hs-comment">-- For the difference between `rn_ty_pat` and `rnHsTyKi` see Note [CpsRn monad]</span><span>
</span><span id="line-1266"></span><span class="hs-comment">-- and Note [Implicit and explicit type variable binders]</span><span>
</span><span id="line-1267"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-type">rn_ty_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1268"></span><span id="rn_ty_pat"><span class="annot"><span class="annottext">rn_ty_pat :: HsType GhcPs -&gt; TPRnM (HsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var hs-var">rn_ty_pat</span></a></span></span><span> </span><span id="local-6989586621682854622"><span class="annot"><span class="annottext">tv :: HsType GhcPs
</span><a href="#local-6989586621682854622"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyVar"><span class="hs-identifier hs-type">HsTyVar</span></a></span><span> </span><span id="local-6989586621682854624"><span class="annot"><span class="annottext">XTyVar GhcPs
</span><a href="#local-6989586621682854624"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854625"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682854625"><span class="hs-identifier hs-var">prom</span></a></span></span><span> </span><span id="local-6989586621682854626"><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682854626"><span class="hs-identifier hs-var">lrdr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1269"></span><span>  </span><span id="local-6989586621682854627"><span class="annot"><a href="#local-6989586621682854627"><span class="hs-identifier hs-var">lname</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854628"><span class="annot"><a href="#local-6989586621682854628"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; TPRnM (LocatedN Name)
</span><a href="GHC.Rename.Pat.html#rn_ty_pat_var"><span class="hs-identifier hs-var">rn_ty_pat_var</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621682854626"><span class="hs-identifier hs-var">lrdr</span></a></span><span>
</span><span id="line-1270"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#isDataConName"><span class="hs-identifier hs-type">isDataConName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854628"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#isKindName"><span class="hs-identifier hs-type">isKindName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854628"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1271"></span><span>    </span><span class="hs-comment">-- Any use of a promoted data constructor name (that is not specifically</span><span>
</span><span id="line-1272"></span><span>    </span><span class="hs-comment">-- exempted by isKindName) is illegal without the use of DataKinds.</span><span>
</span><span id="line-1273"></span><span>    </span><span class="hs-comment">-- See Note [Checking for DataKinds] in GHC.Tc.Validity.</span><span>
</span><span id="line-1274"></span><span>    </span><span class="annot"><a href="GHC.Rename.Pat.html#check_data_kinds"><span class="hs-identifier hs-type">check_data_kinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854622"><span class="hs-identifier hs-type">tv</span></a></span><span>
</span><span id="line-1275"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyVar"><span class="hs-identifier hs-type">HsTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854624"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854625"><span class="hs-identifier hs-type">prom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854627"><span class="hs-identifier hs-type">lname</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1276"></span><span>
</span><span id="line-1277"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-type">HsForAllTy</span></a></span><span> </span><span id="local-6989586621682854632"><span class="annot"><span class="annottext">XForAllTy GhcPs
</span><a href="#local-6989586621682854632"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854633"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682854633"><span class="hs-identifier hs-var">tele</span></a></span></span><span> </span><span id="local-6989586621682854634"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854634"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r.
 HsDocContext
 -&gt; OccSet
 -&gt; ((HsType GhcRn, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
 -&gt; RnM (r, FreeVars))
-&gt; TPRnM (HsType GhcRn)
forall a.
(forall r.
 HsDocContext
 -&gt; OccSet
 -&gt; ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
 -&gt; RnM (r, FreeVars))
-&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftTPRnRaw"><span class="hs-identifier hs-var">liftTPRnRaw</span></a></span><span> </span><span class="annot"><span class="annottext">((forall r.
  HsDocContext
  -&gt; OccSet
  -&gt; ((HsType GhcRn, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
  -&gt; RnM (r, FreeVars))
 -&gt; TPRnM (HsType GhcRn))
-&gt; (forall r.
    HsDocContext
    -&gt; OccSet
    -&gt; ((HsType GhcRn, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
    -&gt; RnM (r, FreeVars))
-&gt; TPRnM (HsType GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682854636"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854636"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621682854637"><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621682854637"><span class="hs-identifier hs-var">locals</span></a></span></span><span> </span><span id="local-6989586621682854638"><span class="annot"><span class="annottext">(HsType GhcRn, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682854638"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1278"></span><span>  </span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsForAllTelescope GhcPs
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
forall a.
HsDocContext
-&gt; HsForAllTelescope GhcPs
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsForAllTelescope"><span class="hs-identifier hs-var">bindHsForAllTelescope</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854636"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682854633"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="annot"><span class="annottext">((HsForAllTelescope GhcRn -&gt; RnM (r, FreeVars))
 -&gt; RnM (r, FreeVars))
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682854640"><span class="annot"><span class="annottext">HsForAllTelescope GhcRn
</span><a href="#local-6989586621682854640"><span class="hs-identifier hs-var">tele'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1279"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-1280"></span><span>      </span><span id="local-6989586621682854641"><span class="annot"><span class="annottext">tele_names :: [IdP GhcRn]
</span><a href="#local-6989586621682854641"><span class="hs-identifier hs-var hs-var">tele_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcRn -&gt; [IdP GhcRn]
forall (p :: Pass).
HsForAllTelescope (GhcPass p) -&gt; [IdP (GhcPass p)]
</span><a href="GHC.Hs.Type.html#hsForAllTelescopeNames"><span class="hs-identifier hs-var">hsForAllTelescopeNames</span></a></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcRn
</span><a href="#local-6989586621682854640"><span class="hs-identifier hs-var">tele'</span></a></span><span>
</span><span id="line-1281"></span><span>      </span><span id="local-6989586621682854643"><span class="annot"><span class="annottext">locals' :: OccSet
</span><a href="#local-6989586621682854643"><span class="hs-identifier hs-var hs-var">locals'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621682854637"><span class="hs-identifier hs-var">locals</span></a></span><span> </span><span class="annot"><span class="annottext">OccSet -&gt; [OccName] -&gt; OccSet
</span><a href="GHC.Types.Name.Occurrence.html#extendOccSetList"><span class="hs-operator hs-var">`extendOccSetList`</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; OccName) -&gt; [Name] -&gt; [OccName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
forall name. HasOccName name =&gt; name -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-var">occName</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
[Name]
</span><a href="#local-6989586621682854641"><span class="hs-identifier hs-var">tele_names</span></a></span><span>
</span><span id="line-1282"></span><span>
</span><span id="line-1283"></span><span>    </span><span class="annot"><span class="annottext">TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn))
-&gt; HsDocContext
-&gt; OccSet
-&gt; ((GenLocated (EpAnn AnnListItem) (HsType GhcRn),
     HsTyPatRnBuilder)
    -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
forall a r.
TPRnM a
-&gt; HsDocContext
-&gt; OccSet
-&gt; ((a, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
</span><a href="GHC.Rename.Pat.html#unTPRnRaw"><span class="hs-identifier hs-var">unTPRnRaw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854634"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621682854636"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621682854643"><span class="hs-identifier hs-var">locals'</span></a></span><span> </span><span class="annot"><span class="annottext">(((GenLocated (EpAnn AnnListItem) (HsType GhcRn), HsTyPatRnBuilder)
  -&gt; RnM (r, FreeVars))
 -&gt; RnM (r, FreeVars))
-&gt; ((GenLocated (EpAnn AnnListItem) (HsType GhcRn),
     HsTyPatRnBuilder)
    -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682854645"><span class="annot"><span class="annottext">GenLocated (EpAnn AnnListItem) (HsType GhcRn)
</span><a href="#local-6989586621682854645"><span class="hs-identifier hs-var">body'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682854646"><span class="annot"><span class="annottext">HsTyPatRnBuilder
</span><a href="#local-6989586621682854646"><span class="hs-identifier hs-var">tpb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1284"></span><span>      </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (r, FreeVars) -&gt; RnM (r, FreeVars)
forall a. [Name] -&gt; RnM a -&gt; RnM a
</span><a href="GHC.Rename.Utils.html#delLocalNames"><span class="hs-identifier hs-var">delLocalNames</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcRn]
[Name]
</span><a href="#local-6989586621682854641"><span class="hs-identifier hs-var">tele_names</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM (r, FreeVars) -&gt; RnM (r, FreeVars))
-&gt; RnM (r, FreeVars) -&gt; RnM (r, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-comment">-- locally bound names do not scope over the continuation</span><span>
</span><span id="line-1285"></span><span>        </span><span class="annot"><span class="annottext">(HsType GhcRn, HsTyPatRnBuilder) -&gt; RnM (r, FreeVars)
</span><a href="#local-6989586621682854638"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">XForAllTy GhcRn
-&gt; HsForAllTelescope GhcRn -&gt; LHsType GhcRn -&gt; HsType GhcRn
forall pass.
XForAllTy pass
-&gt; HsForAllTelescope pass -&gt; LHsType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-var">HsForAllTy</span></a></span><span> </span><span class="annot"><span class="annottext">XForAllTy GhcPs
XForAllTy GhcRn
</span><a href="#local-6989586621682854632"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcRn
</span><a href="#local-6989586621682854640"><span class="hs-identifier hs-var">tele'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated (EpAnn AnnListItem) (HsType GhcRn)
</span><a href="#local-6989586621682854645"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsTyPatRnBuilder
</span><a href="#local-6989586621682854646"><span class="hs-identifier hs-var">tpb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1286"></span><span>
</span><span id="line-1287"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span id="local-6989586621682854648"><span class="annot"><span class="annottext">XQualTy GhcPs
</span><a href="#local-6989586621682854648"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854649"><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621682854649"><span class="hs-identifier hs-var">lctx</span></a></span></span><span> </span><span id="local-6989586621682854650"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854650"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1288"></span><span>  </span><span id="local-6989586621682854651"><span class="annot"><a href="#local-6989586621682854651"><span class="hs-identifier hs-var">lctx'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
 -&gt; TPRnM [GenLocated (EpAnn AnnListItem) (HsType GhcRn)])
-&gt; LocatedAn
     AnnContext [GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
-&gt; TPRnM
     (LocatedAn
        AnnContext [GenLocated (EpAnn AnnListItem) (HsType GhcRn)])
forall a b ann.
(a -&gt; TPRnM b) -&gt; LocatedAn ann a -&gt; TPRnM (LocatedAn ann b)
</span><a href="GHC.Rename.Pat.html#wrapSrcSpanTPRnM"><span class="hs-identifier hs-var">wrapSrcSpanTPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated (EpAnn AnnListItem) (HsType GhcPs)
 -&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn)))
-&gt; [GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
-&gt; TPRnM [GenLocated (EpAnn AnnListItem) (HsType GhcRn)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
GenLocated (EpAnn AnnListItem) (HsType GhcPs)
-&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn))
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsContext GhcPs
LocatedAn
  AnnContext [GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
</span><a href="#local-6989586621682854649"><span class="hs-identifier hs-var">lctx</span></a></span><span>
</span><span id="line-1289"></span><span>  </span><span id="local-6989586621682854652"><span class="annot"><a href="#local-6989586621682854652"><span class="hs-identifier hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-type">rn_lty_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854650"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-1290"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854648"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854651"><span class="hs-identifier hs-type">lctx'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854652"><span class="hs-identifier hs-type">body'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1291"></span><span>
</span><span id="line-1292"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppTy"><span class="hs-identifier hs-type">HsAppTy</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854654"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854654"><span class="hs-identifier hs-var">fun_ty</span></a></span></span><span> </span><span id="local-6989586621682854655"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854655"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1293"></span><span>  </span><span id="local-6989586621682854656"><span class="annot"><a href="#local-6989586621682854656"><span class="hs-identifier hs-var">fun_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854654"><span class="hs-identifier hs-var">fun_ty</span></a></span><span>
</span><span id="line-1294"></span><span>  </span><span id="local-6989586621682854657"><span class="annot"><a href="#local-6989586621682854657"><span class="hs-identifier hs-var">arg_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-type">rn_lty_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854655"><span class="hs-identifier hs-type">arg_ty</span></a></span><span>
</span><span id="line-1295"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppTy"><span class="hs-identifier hs-type">HsAppTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854656"><span class="hs-identifier hs-type">fun_ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854657"><span class="hs-identifier hs-type">arg_ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1296"></span><span>
</span><span id="line-1297"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppKindTy"><span class="hs-identifier hs-type">HsAppKindTy</span></a></span><span> </span><span class="annot"><span class="annottext">XAppKindTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854659"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854659"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682854660"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854660"><span class="hs-identifier hs-var">ki</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1298"></span><span>  </span><span id="local-6989586621682854661"><span class="annot"><a href="#local-6989586621682854661"><span class="hs-identifier hs-var">kind_app</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM Bool -&gt; TPRnM Bool
forall a. RnM a -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-var">liftRn</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM Bool -&gt; TPRnM Bool) -&gt; RnM Bool -&gt; TPRnM Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.TypeApplications</span></span><span>
</span><span id="line-1299"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682854661"><span class="hs-identifier hs-type">kind_app</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Utils.html#typeAppErr"><span class="hs-identifier hs-type">typeAppErr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-type">KindLevel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854660"><span class="hs-identifier hs-type">ki</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1300"></span><span>  </span><span id="local-6989586621682854663"><span class="annot"><a href="#local-6989586621682854663"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-type">rn_lty_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854659"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1301"></span><span>  </span><span id="local-6989586621682854664"><span class="annot"><a href="#local-6989586621682854664"><span class="hs-identifier hs-var">ki'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-type">rn_lty_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854660"><span class="hs-identifier hs-type">ki</span></a></span><span>
</span><span id="line-1302"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppKindTy"><span class="hs-identifier hs-type">HsAppKindTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854663"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854664"><span class="hs-identifier hs-type">ki'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1303"></span><span>
</span><span id="line-1304"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsFunTy"><span class="hs-identifier hs-type">HsFunTy</span></a></span><span> </span><span id="local-6989586621682854666"><span class="annot"><span class="annottext">XFunTy GhcPs
</span><a href="#local-6989586621682854666"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854667"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621682854667"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621682854668"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854668"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621682854669"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854669"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1305"></span><span>  </span><span id="local-6989586621682854670"><span class="annot"><a href="#local-6989586621682854670"><span class="hs-identifier hs-var">lhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854668"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1306"></span><span>  </span><span id="local-6989586621682854671"><span class="annot"><a href="#local-6989586621682854671"><span class="hs-identifier hs-var">mult'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat_arrow"><span class="hs-identifier hs-type">rn_ty_pat_arrow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854667"><span class="hs-identifier hs-type">mult</span></a></span><span>
</span><span id="line-1307"></span><span>  </span><span id="local-6989586621682854673"><span class="annot"><a href="#local-6989586621682854673"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-type">rn_lty_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854669"><span class="hs-identifier hs-type">rhs</span></a></span><span>
</span><span id="line-1308"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsFunTy"><span class="hs-identifier hs-type">HsFunTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854666"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854671"><span class="hs-identifier hs-type">mult'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854670"><span class="hs-identifier hs-type">lhs'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854673"><span class="hs-identifier hs-type">rhs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1309"></span><span>
</span><span id="line-1310"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsListTy"><span class="hs-identifier hs-type">HsListTy</span></a></span><span> </span><span id="local-6989586621682854675"><span class="annot"><span class="annottext">XListTy GhcPs
</span><a href="#local-6989586621682854675"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854676"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854676"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1311"></span><span>  </span><span id="local-6989586621682854677"><span class="annot"><a href="#local-6989586621682854677"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854676"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1312"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsListTy"><span class="hs-identifier hs-type">HsListTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854675"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854677"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1313"></span><span>
</span><span id="line-1314"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-type">HsTupleTy</span></a></span><span> </span><span id="local-6989586621682854679"><span class="annot"><span class="annottext">XTupleTy GhcPs
</span><a href="#local-6989586621682854679"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854680"><span class="annot"><span class="annottext">HsTupleSort
</span><a href="#local-6989586621682854680"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621682854681"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621682854681"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1315"></span><span>  </span><span id="local-6989586621682854682"><span class="annot"><a href="#local-6989586621682854682"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated (EpAnn AnnListItem) (HsType GhcPs)
 -&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn)))
-&gt; [GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
-&gt; TPRnM [GenLocated (EpAnn AnnListItem) (HsType GhcRn)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
GenLocated (EpAnn AnnListItem) (HsType GhcPs)
-&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn))
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
</span><a href="#local-6989586621682854681"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1316"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-type">HsTupleTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854679"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854680"><span class="hs-identifier hs-type">con</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854682"><span class="hs-identifier hs-type">tys'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1317"></span><span>
</span><span id="line-1318"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSumTy"><span class="hs-identifier hs-type">HsSumTy</span></a></span><span> </span><span id="local-6989586621682854684"><span class="annot"><span class="annottext">XSumTy GhcPs
</span><a href="#local-6989586621682854684"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854685"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621682854685"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1319"></span><span>  </span><span id="local-6989586621682854686"><span class="annot"><a href="#local-6989586621682854686"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated (EpAnn AnnListItem) (HsType GhcPs)
 -&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn)))
-&gt; [GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
-&gt; TPRnM [GenLocated (EpAnn AnnListItem) (HsType GhcRn)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
GenLocated (EpAnn AnnListItem) (HsType GhcPs)
-&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn))
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
</span><a href="#local-6989586621682854685"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1320"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSumTy"><span class="hs-identifier hs-type">HsSumTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854684"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854686"><span class="hs-identifier hs-type">tys'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1321"></span><span>
</span><span id="line-1322"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOpTy"><span class="hs-identifier hs-type">HsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">XOpTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854688"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682854688"><span class="hs-identifier hs-var">prom</span></a></span></span><span> </span><span id="local-6989586621682854689"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854689"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621682854690"><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682854690"><span class="hs-identifier hs-var">l_op</span></a></span></span><span> </span><span id="local-6989586621682854691"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854691"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1323"></span><span>  </span><span id="local-6989586621682854692"><span class="annot"><a href="#local-6989586621682854692"><span class="hs-identifier hs-var">ty1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854689"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-1324"></span><span>  </span><span id="local-6989586621682854693"><span class="annot"><a href="#local-6989586621682854693"><span class="hs-identifier hs-var">l_op'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat_var"><span class="hs-identifier hs-type">rn_ty_pat_var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854690"><span class="hs-identifier hs-type">l_op</span></a></span><span>
</span><span id="line-1325"></span><span>  </span><span id="local-6989586621682854694"><span class="annot"><a href="#local-6989586621682854694"><span class="hs-identifier hs-var">ty2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-type">rn_lty_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854691"><span class="hs-identifier hs-type">ty2</span></a></span><span>
</span><span id="line-1326"></span><span>  </span><span id="local-6989586621682854695"><span class="annot"><a href="#local-6989586621682854695"><span class="hs-identifier hs-var">fix</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#lookupTyFixityRn"><span class="hs-identifier hs-type">lookupTyFixityRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854693"><span class="hs-identifier hs-type">l_op'</span></a></span><span>
</span><span id="line-1327"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682854697"><span class="annot"><a href="#local-6989586621682854697"><span class="hs-identifier hs-var hs-var">op_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN Name
</span><a href="#local-6989586621682854693"><span class="hs-identifier hs-var">l_op'</span></a></span><span>
</span><span id="line-1328"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#isDataConName"><span class="hs-identifier hs-type">isDataConName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854697"><span class="hs-identifier hs-type">op_name</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#isPromoted"><span class="hs-identifier hs-type">isPromoted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854688"><span class="hs-identifier hs-type">prom</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1329"></span><span>    </span><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-type">addDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnUntickedPromotedThing"><span class="hs-identifier hs-type">TcRnUntickedPromotedThing</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#UntickedConstructor"><span class="hs-identifier hs-type">UntickedConstructor</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html#Infix"><span class="hs-identifier hs-type">Infix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854697"><span class="hs-identifier hs-type">op_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1330"></span><span>  </span><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#mkHsOpTyRn"><span class="hs-identifier hs-type">mkHsOpTyRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854688"><span class="hs-identifier hs-type">prom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854693"><span class="hs-identifier hs-type">l_op'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854695"><span class="hs-identifier hs-type">fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854692"><span class="hs-identifier hs-type">ty1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854694"><span class="hs-identifier hs-type">ty2'</span></a></span><span>
</span><span id="line-1331"></span><span>
</span><span id="line-1332"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span id="local-6989586621682854704"><span class="annot"><span class="annottext">XParTy GhcPs
</span><a href="#local-6989586621682854704"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854705"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854705"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1333"></span><span>  </span><span id="local-6989586621682854706"><span class="annot"><a href="#local-6989586621682854706"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854705"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1334"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854704"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854706"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1335"></span><span>
</span><span id="line-1336"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsIParamTy"><span class="hs-identifier hs-type">HsIParamTy</span></a></span><span> </span><span id="local-6989586621682854708"><span class="annot"><span class="annottext">XIParamTy GhcPs
</span><a href="#local-6989586621682854708"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854709"><span class="annot"><span class="annottext">XRec GhcPs HsIPName
</span><a href="#local-6989586621682854709"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682854710"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854710"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1337"></span><span>  </span><span id="local-6989586621682854711"><span class="annot"><a href="#local-6989586621682854711"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854710"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1338"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsIParamTy"><span class="hs-identifier hs-type">HsIParamTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854708"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854709"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854711"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1339"></span><span>
</span><span id="line-1340"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsStarTy"><span class="hs-identifier hs-type">HsStarTy</span></a></span><span> </span><span id="local-6989586621682854713"><span class="annot"><span class="annottext">XStarTy GhcPs
</span><a href="#local-6989586621682854713"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854714"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854714"><span class="hs-identifier hs-var">unicode</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1341"></span><span>  </span><span class="annot"><span class="annottext">HsType GhcRn -&gt; TPRnM (HsType GhcRn)
forall a. a -&gt; TPRnM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XStarTy GhcRn -&gt; Bool -&gt; HsType GhcRn
forall pass. XStarTy pass -&gt; Bool -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsStarTy"><span class="hs-identifier hs-var">HsStarTy</span></a></span><span> </span><span class="annot"><span class="annottext">XStarTy GhcPs
XStarTy GhcRn
</span><a href="#local-6989586621682854713"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682854714"><span class="hs-identifier hs-var">unicode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1342"></span><span>
</span><span id="line-1343"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsDocTy"><span class="hs-identifier hs-type">HsDocTy</span></a></span><span> </span><span id="local-6989586621682854716"><span class="annot"><span class="annottext">XDocTy GhcPs
</span><a href="#local-6989586621682854716"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854717"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854717"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682854718"><span class="annot"><span class="annottext">LHsDoc GhcPs
</span><a href="#local-6989586621682854718"><span class="hs-identifier hs-var">haddock_doc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1344"></span><span>  </span><span id="local-6989586621682854719"><span class="annot"><a href="#local-6989586621682854719"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854717"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1345"></span><span>  </span><span id="local-6989586621682854720"><span class="annot"><a href="#local-6989586621682854720"><span class="hs-identifier hs-var">haddock_doc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Doc.html#rnLHsDoc"><span class="hs-identifier hs-type">rnLHsDoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854718"><span class="hs-identifier hs-type">haddock_doc</span></a></span><span>
</span><span id="line-1346"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsDocTy"><span class="hs-identifier hs-type">HsDocTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854716"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854719"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854720"><span class="hs-identifier hs-type">haddock_doc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1347"></span><span>
</span><span id="line-1348"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span id="local-6989586621682854721"><span class="annot"><span class="annottext">ty :: HsType GhcPs
</span><a href="#local-6989586621682854721"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitListTy"><span class="hs-identifier hs-type">HsExplicitListTy</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitListTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854723"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682854723"><span class="hs-identifier hs-var">prom</span></a></span></span><span> </span><span id="local-6989586621682854724"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621682854724"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1349"></span><span>  </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; TPRnM ()
</span><a href="GHC.Rename.Pat.html#check_data_kinds"><span class="hs-identifier hs-var">check_data_kinds</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682854721"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1350"></span><span>
</span><span id="line-1351"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; TPRnM () -&gt; TPRnM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PromotionFlag -&gt; Bool
</span><a href="Language.Haskell.Syntax.Type.html#isPromoted"><span class="hs-identifier hs-var">isPromoted</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682854723"><span class="hs-identifier hs-var">prom</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TPRnM () -&gt; TPRnM ()) -&gt; TPRnM () -&gt; TPRnM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1352"></span><span>    </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) () -&gt; TPRnM ()
forall a. RnM a -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-var">liftRn</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) () -&gt; TPRnM ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) () -&gt; TPRnM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-var">addDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UntickedPromotedThing -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnUntickedPromotedThing"><span class="hs-identifier hs-var">TcRnUntickedPromotedThing</span></a></span><span> </span><span class="annot"><span class="annottext">(UntickedPromotedThing -&gt; TcRnMessage)
-&gt; UntickedPromotedThing -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UntickedPromotedThing
</span><a href="GHC.Types.Hint.html#UntickedExplicitList"><span class="hs-identifier hs-var">UntickedExplicitList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1353"></span><span>
</span><span id="line-1354"></span><span>  </span><span id="local-6989586621682854726"><span class="annot"><a href="#local-6989586621682854726"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated (EpAnn AnnListItem) (HsType GhcPs)
 -&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn)))
-&gt; [GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
-&gt; TPRnM [GenLocated (EpAnn AnnListItem) (HsType GhcRn)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
GenLocated (EpAnn AnnListItem) (HsType GhcPs)
-&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn))
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
</span><a href="#local-6989586621682854724"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1355"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitListTy"><span class="hs-identifier hs-type">HsExplicitListTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854723"><span class="hs-identifier hs-type">prom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854726"><span class="hs-identifier hs-type">tys'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1356"></span><span>
</span><span id="line-1357"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span id="local-6989586621682854727"><span class="annot"><span class="annottext">ty :: HsType GhcPs
</span><a href="#local-6989586621682854727"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitTupleTy"><span class="hs-identifier hs-type">HsExplicitTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitTupleTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854729"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621682854729"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1358"></span><span>  </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; TPRnM ()
</span><a href="GHC.Rename.Pat.html#check_data_kinds"><span class="hs-identifier hs-var">check_data_kinds</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682854727"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1359"></span><span>  </span><span id="local-6989586621682854730"><span class="annot"><a href="#local-6989586621682854730"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated (EpAnn AnnListItem) (HsType GhcPs)
 -&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn)))
-&gt; [GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
-&gt; TPRnM [GenLocated (EpAnn AnnListItem) (HsType GhcRn)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
GenLocated (EpAnn AnnListItem) (HsType GhcPs)
-&gt; TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn))
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated (EpAnn AnnListItem) (HsType GhcPs)]
</span><a href="#local-6989586621682854729"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1360"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitTupleTy"><span class="hs-identifier hs-type">HsExplicitTupleTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854730"><span class="hs-identifier hs-type">tys'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1361"></span><span>
</span><span id="line-1362"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span id="local-6989586621682854731"><span class="annot"><span class="annottext">tyLit :: HsType GhcPs
</span><a href="#local-6989586621682854731"><span class="hs-identifier hs-var">tyLit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-type">HsTyLit</span></a></span><span> </span><span id="local-6989586621682854733"><span class="annot"><span class="annottext">XTyLit GhcPs
</span><a href="#local-6989586621682854733"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621682854734"><span class="annot"><span class="annottext">HsTyLit GhcPs
</span><a href="#local-6989586621682854734"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1363"></span><span>  </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; TPRnM ()
</span><a href="GHC.Rename.Pat.html#check_data_kinds"><span class="hs-identifier hs-var">check_data_kinds</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682854731"><span class="hs-identifier hs-var">tyLit</span></a></span><span>
</span><span id="line-1364"></span><span>  </span><span id="local-6989586621682854735"><span class="annot"><a href="#local-6989586621682854735"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM (HsTyLit GhcRn) -&gt; TPRnM (HsTyLit GhcRn)
forall a. RnM a -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-var">liftRn</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM (HsTyLit GhcRn) -&gt; TPRnM (HsTyLit GhcRn))
-&gt; RnM (HsTyLit GhcRn) -&gt; TPRnM (HsTyLit GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsTyLit GhcPs -&gt; RnM (HsTyLit GhcRn)
</span><a href="GHC.Rename.HsType.html#rnHsTyLit"><span class="hs-identifier hs-var">rnHsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyLit GhcPs
</span><a href="#local-6989586621682854734"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1365"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-type">HsTyLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854733"><span class="hs-identifier hs-type">src</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854735"><span class="hs-identifier hs-type">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1366"></span><span>
</span><span id="line-1367"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWildCardTy"><span class="hs-identifier hs-type">HsWildCardTy</span></a></span><span> </span><span class="annot"><span class="annottext">XWildCardTy GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1368"></span><span>  </span><span class="annot"><span class="annottext">HsType GhcRn -&gt; TPRnM (HsType GhcRn)
forall a. a -&gt; TPRnM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XWildCardTy GhcRn -&gt; HsType GhcRn
forall pass. XWildCardTy pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsWildCardTy"><span class="hs-identifier hs-var">HsWildCardTy</span></a></span><span> </span><span class="annot"><span class="annottext">XWildCardTy GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1369"></span><span>
</span><span id="line-1370"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsKindSig"><span class="hs-identifier hs-type">HsKindSig</span></a></span><span> </span><span id="local-6989586621682854739"><span class="annot"><span class="annottext">XKindSig GhcPs
</span><a href="#local-6989586621682854739"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854740"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854740"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682854741"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854741"><span class="hs-identifier hs-var">ki</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1371"></span><span>  </span><span id="local-6989586621682854742"><span class="annot"><a href="#local-6989586621682854742"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TPRnM HsDocContext
</span><a href="GHC.Rename.Pat.html#askDocContext"><span class="hs-identifier hs-var">askDocContext</span></a></span><span>
</span><span id="line-1372"></span><span>  </span><span id="local-6989586621682854743"><span class="annot"><a href="#local-6989586621682854743"><span class="hs-identifier hs-var">kind_sigs_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-type">xoptM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LangExt.KindSignatures</span></span><span>
</span><span id="line-1373"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682854743"><span class="hs-identifier hs-type">kind_sigs_ok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#badKindSigErr"><span class="hs-identifier hs-type">badKindSigErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854742"><span class="hs-identifier hs-type">ctxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854741"><span class="hs-identifier hs-type">ki</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1374"></span><span>  </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPS"><span class="hs-identifier hs-type">HsPS</span></a></span><span> </span><span id="local-6989586621682854747"><span class="annot"><a href="#local-6989586621682854747"><span class="hs-identifier hs-var">hsps</span></a></span></span><span> </span><span id="local-6989586621682854748"><span class="annot"><a href="#local-6989586621682854748"><span class="hs-identifier hs-var">ki'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#liftRnWithCont"><span class="hs-identifier hs-type">liftRnWithCont</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1375"></span><span>                      </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsPatSigKind"><span class="hs-identifier hs-type">rnHsPatSigKind</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#AlwaysBind"><span class="hs-identifier hs-type">AlwaysBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854742"><span class="hs-identifier hs-type">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPS"><span class="hs-identifier hs-type">HsPS</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854741"><span class="hs-identifier hs-type">ki</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1376"></span><span>  </span><span id="local-6989586621682854752"><span class="annot"><a href="#local-6989586621682854752"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-type">rn_lty_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854740"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1377"></span><span>  </span><span class="annot"><a href="GHC.Rename.Pat.html#tellTPB"><span class="hs-identifier hs-type">tellTPB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#tpBuilderPatSig"><span class="hs-identifier hs-type">tpBuilderPatSig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854747"><span class="hs-identifier hs-type">hsps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1378"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsKindSig"><span class="hs-identifier hs-type">HsKindSig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854739"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854752"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854748"><span class="hs-identifier hs-type">ki'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1379"></span><span>
</span><span id="line-1380"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSpliceTy"><span class="hs-identifier hs-type">HsSpliceTy</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854755"><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682854755"><span class="hs-identifier hs-var">splice</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1381"></span><span>  </span><span id="local-6989586621682854756"><span class="annot"><a href="#local-6989586621682854756"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM
  ((HsUntypedSplice GhcRn, HsUntypedSpliceResult (LHsType GhcPs)),
   FreeVars)
-&gt; TPRnM
     (HsUntypedSplice GhcRn, HsUntypedSpliceResult (LHsType GhcPs))
forall a. RnM (a, FreeVars) -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftRnFV"><span class="hs-identifier hs-var">liftRnFV</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM
   ((HsUntypedSplice GhcRn, HsUntypedSpliceResult (LHsType GhcPs)),
    FreeVars)
 -&gt; TPRnM
      (HsUntypedSplice GhcRn, HsUntypedSpliceResult (LHsType GhcPs)))
-&gt; RnM
     ((HsUntypedSplice GhcRn, HsUntypedSpliceResult (LHsType GhcPs)),
      FreeVars)
-&gt; TPRnM
     (HsUntypedSplice GhcRn, HsUntypedSpliceResult (LHsType GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
-&gt; RnM
     ((HsUntypedSplice GhcRn, HsUntypedSpliceResult (LHsType GhcPs)),
      FreeVars)
</span><a href="GHC.Rename.Splice.html#rnSpliceTyPat"><span class="hs-identifier hs-var">rnSpliceTyPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682854755"><span class="hs-identifier hs-var">splice</span></a></span><span>
</span><span id="line-1382"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682854756"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1383"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682854757"><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><a href="#local-6989586621682854757"><span class="hs-identifier hs-var">rn_splice</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsUntypedSpliceTop"><span class="hs-identifier hs-type">HsUntypedSpliceTop</span></a></span><span> </span><span id="local-6989586621682854758"><span class="annot"><span class="annottext">ThModFinalizers
</span><a href="#local-6989586621682854758"><span class="hs-identifier hs-var">mfs</span></a></span></span><span> </span><span id="local-6989586621682854759"><span class="annot"><span class="annottext">GenLocated (EpAnn AnnListItem) (HsType GhcPs)
</span><a href="#local-6989586621682854759"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- Splice was top-level and thus run, creating LHsType GhcPs</span><span>
</span><span id="line-1384"></span><span>        </span><span id="local-6989586621682854760"><span class="annot"><a href="#local-6989586621682854760"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated (EpAnn AnnListItem) (HsType GhcPs)
</span><a href="#local-6989586621682854759"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1385"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSpliceTy"><span class="hs-identifier hs-type">HsSpliceTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsUntypedSpliceTop"><span class="hs-identifier hs-type">HsUntypedSpliceTop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854758"><span class="hs-identifier hs-type">mfs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682854761"><span class="hs-identifier hs-type">mb_paren</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854760"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682854757"><span class="hs-identifier hs-type">rn_splice</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1386"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682854762"><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><a href="#local-6989586621682854762"><span class="hs-identifier hs-var">rn_splice</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsUntypedSpliceNested"><span class="hs-identifier hs-type">HsUntypedSpliceNested</span></a></span><span> </span><span id="local-6989586621682854763"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854763"><span class="hs-identifier hs-var">splice_name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1387"></span><span>        </span><span class="annot"><span class="annottext">HsType GhcRn -&gt; TPRnM (HsType GhcRn)
forall a. a -&gt; TPRnM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSpliceTy GhcRn -&gt; HsUntypedSplice GhcRn -&gt; HsType GhcRn
forall pass. XSpliceTy pass -&gt; HsUntypedSplice pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsSpliceTy"><span class="hs-identifier hs-var">HsSpliceTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; HsUntypedSpliceResult
     (GenLocated (EpAnn AnnListItem) (HsType GhcRn))
forall thing. Name -&gt; HsUntypedSpliceResult thing
</span><a href="GHC.Hs.Expr.html#HsUntypedSpliceNested"><span class="hs-identifier hs-var">HsUntypedSpliceNested</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682854763"><span class="hs-identifier hs-var">splice_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><a href="#local-6989586621682854762"><span class="hs-identifier hs-var">rn_splice</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Splice was nested and thus already renamed</span><span>
</span><span id="line-1388"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1389"></span><span>    </span><span class="annot"><a href="#local-6989586621682854761"><span class="hs-identifier hs-type">mb_paren</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1390"></span><span>    </span><span id="local-6989586621682854761"><span class="annot"><span class="annottext">mb_paren :: LHsType GhcRn -&gt; LHsType GhcRn
</span><a href="#local-6989586621682854761"><span class="hs-identifier hs-var hs-var">mb_paren</span></a></span></span><span> </span><span id="local-6989586621682854764"><span class="annot"><span class="annottext">lhs_ty :: LHsType GhcRn
</span><a href="#local-6989586621682854764"><span class="hs-identifier hs-var">lhs_ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682854765"><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854765"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682854766"><span class="annot"><span class="annottext">HsType GhcRn
</span><a href="#local-6989586621682854766"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1391"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PprPrec -&gt; HsType GhcRn -&gt; Bool
forall (p :: Pass). PprPrec -&gt; HsType (GhcPass p) -&gt; Bool
</span><a href="GHC.Hs.Type.html#hsTypeNeedsParens"><span class="hs-identifier hs-var">hsTypeNeedsParens</span></a></span><span> </span><span class="annot"><span class="annottext">PprPrec
</span><a href="GHC.Types.Basic.html#maxPrec"><span class="hs-identifier hs-var">maxPrec</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcRn
</span><a href="#local-6989586621682854766"><span class="hs-identifier hs-var">hs_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
-&gt; HsType GhcRn -&gt; GenLocated (EpAnn AnnListItem) (HsType GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn AnnListItem
</span><a href="#local-6989586621682854765"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XParTy GhcRn -&gt; LHsType GhcRn -&gt; HsType GhcRn
forall pass. XParTy pass -&gt; LHsType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-var">HsParTy</span></a></span><span> </span><span class="annot"><span class="annottext">XParTy GhcRn
AnnParen
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621682854764"><span class="hs-identifier hs-var">lhs_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1392"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621682854764"><span class="hs-identifier hs-var">lhs_ty</span></a></span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-type">HsBangTy</span></a></span><span> </span><span id="local-6989586621682854770"><span class="annot"><span class="annottext">XBangTy GhcPs
</span><a href="#local-6989586621682854770"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682854771"><span class="annot"><span class="annottext">HsSrcBang
</span><a href="#local-6989586621682854771"><span class="hs-identifier hs-var">bang_src</span></a></span></span><span> </span><span id="local-6989586621682854772"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854772"><span class="hs-identifier hs-var">lty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1395"></span><span>  </span><span id="local-6989586621682854773"><span class="annot"><a href="#local-6989586621682854773"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TPRnM HsDocContext
</span><a href="GHC.Rename.Pat.html#askDocContext"><span class="hs-identifier hs-var">askDocContext</span></a></span><span>
</span><span id="line-1396"></span><span>  </span><span id="local-6989586621682854774"><span class="annot"><a href="#local-6989586621682854774"><span class="hs-identifier hs-var">lty'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854775"><span class="annot"><a href="#local-6989586621682854775"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-type">rn_lty_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854772"><span class="hs-identifier hs-type">lty</span></a></span><span>
</span><span id="line-1397"></span><span>  </span><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1398"></span><span>    </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-type">TcRnWithHsDocContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854773"><span class="hs-identifier hs-type">ctxt</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1399"></span><span>    </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnUnexpectedAnnotation"><span class="hs-identifier hs-type">TcRnUnexpectedAnnotation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854775"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854771"><span class="hs-identifier hs-type">bang_src</span></a></span><span>
</span><span id="line-1400"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-type">HsBangTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854770"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854771"><span class="hs-identifier hs-type">bang_src</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854774"><span class="hs-identifier hs-type">lty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1401"></span><span>
</span><span id="line-1402"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span id="local-6989586621682854778"><span class="annot"><span class="annottext">ty :: HsType GhcPs
</span><a href="#local-6989586621682854778"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsRecTy"><span class="hs-identifier hs-type">HsRecTy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1403"></span><span>  </span><span id="local-6989586621682854780"><span class="annot"><a href="#local-6989586621682854780"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TPRnM HsDocContext
</span><a href="GHC.Rename.Pat.html#askDocContext"><span class="hs-identifier hs-var">askDocContext</span></a></span><span>
</span><span id="line-1404"></span><span>  </span><span class="annot"><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-type">liftRn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1405"></span><span>    </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-type">TcRnWithHsDocContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854780"><span class="hs-identifier hs-type">ctxt</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1406"></span><span>    </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnIllegalRecordSyntax"><span class="hs-identifier hs-type">TcRnIllegalRecordSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><a href="#local-6989586621682854778"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1407"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWildCardTy"><span class="hs-identifier hs-type">HsWildCardTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- trick to avoid `failWithTc`</span><span>
</span><span id="line-1408"></span><span>
</span><span id="line-1409"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat"><span class="hs-identifier hs-var">rn_ty_pat</span></a></span><span> </span><span id="local-6989586621682854782"><span class="annot"><span class="annottext">ty :: HsType GhcPs
</span><a href="#local-6989586621682854782"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#XHsType"><span class="hs-identifier hs-type">XHsType</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1410"></span><span>  </span><span id="local-6989586621682854784"><span class="annot"><a href="#local-6989586621682854784"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TPRnM HsDocContext
</span><a href="GHC.Rename.Pat.html#askDocContext"><span class="hs-identifier hs-var">askDocContext</span></a></span><span>
</span><span id="line-1411"></span><span>  </span><span class="annot"><a href="GHC.Rename.Pat.html#liftRnFV"><span class="hs-identifier hs-type">liftRnFV</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsType"><span class="hs-identifier hs-type">rnHsType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854784"><span class="hs-identifier hs-type">ctxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682854782"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1412"></span><span>
</span><span id="line-1413"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat_arrow"><span class="hs-identifier hs-type">rn_ty_pat_arrow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrow"><span class="hs-identifier hs-type">HsArrow</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrow"><span class="hs-identifier hs-type">HsArrow</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1414"></span><span id="rn_ty_pat_arrow"><span class="annot"><span class="annottext">rn_ty_pat_arrow :: HsArrow GhcPs -&gt; TPRnM (HsArrow GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_ty_pat_arrow"><span class="hs-identifier hs-var hs-var">rn_ty_pat_arrow</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsUnrestrictedArrow"><span class="hs-identifier hs-type">HsUnrestrictedArrow</span></a></span><span> </span><span class="annot"><span class="annottext">XUnrestrictedArrow GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsArrow GhcRn -&gt; TPRnM (HsArrow GhcRn)
forall a. a -&gt; TPRnM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XUnrestrictedArrow GhcRn -&gt; HsArrow GhcRn
forall pass. XUnrestrictedArrow pass -&gt; HsArrow pass
</span><a href="Language.Haskell.Syntax.Type.html#HsUnrestrictedArrow"><span class="hs-identifier hs-var">HsUnrestrictedArrow</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XUnrestrictedArrow GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1415"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat_arrow"><span class="hs-identifier hs-var">rn_ty_pat_arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsLinearArrow"><span class="hs-identifier hs-type">HsLinearArrow</span></a></span><span> </span><span class="annot"><span class="annottext">XLinearArrow GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsArrow GhcRn -&gt; TPRnM (HsArrow GhcRn)
forall a. a -&gt; TPRnM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLinearArrow GhcRn -&gt; HsArrow GhcRn
forall pass. XLinearArrow pass -&gt; HsArrow pass
</span><a href="Language.Haskell.Syntax.Type.html#HsLinearArrow"><span class="hs-identifier hs-var">HsLinearArrow</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XLinearArrow GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1416"></span><span class="annot"><a href="GHC.Rename.Pat.html#rn_ty_pat_arrow"><span class="hs-identifier hs-var">rn_ty_pat_arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitMult"><span class="hs-identifier hs-type">HsExplicitMult</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitMult GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682854789"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854789"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1417"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; TPRnM (LHsType GhcRn)
</span><a href="GHC.Rename.Pat.html#rn_lty_pat"><span class="hs-identifier hs-var">rn_lty_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682854789"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TPRnM (GenLocated (EpAnn AnnListItem) (HsType GhcRn))
-&gt; (GenLocated (EpAnn AnnListItem) (HsType GhcRn) -&gt; HsArrow GhcRn)
-&gt; TPRnM (HsArrow GhcRn)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682854790"><span class="annot"><span class="annottext">GenLocated (EpAnn AnnListItem) (HsType GhcRn)
</span><a href="#local-6989586621682854790"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XExplicitMult GhcRn -&gt; LHsType GhcRn -&gt; HsArrow GhcRn
forall pass. XExplicitMult pass -&gt; LHsType pass -&gt; HsArrow pass
</span><a href="Language.Haskell.Syntax.Type.html#HsExplicitMult"><span class="hs-identifier hs-var">HsExplicitMult</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XExplicitMult GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated (EpAnn AnnListItem) (HsType GhcRn)
</span><a href="#local-6989586621682854790"><span class="hs-identifier hs-var">mult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1418"></span><span>
</span><span id="line-1419"></span><span class="annot"><a href="GHC.Rename.Pat.html#check_data_kinds"><span class="hs-identifier hs-type">check_data_kinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#TPRnM"><span class="hs-identifier hs-type">TPRnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1420"></span><span id="check_data_kinds"><span class="annot"><span class="annottext">check_data_kinds :: HsType GhcPs -&gt; TPRnM ()
</span><a href="GHC.Rename.Pat.html#check_data_kinds"><span class="hs-identifier hs-var hs-var">check_data_kinds</span></a></span></span><span> </span><span id="local-6989586621682854791"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682854791"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) () -&gt; TPRnM ()
forall a. RnM a -&gt; TPRnM a
</span><a href="GHC.Rename.Pat.html#liftRn"><span class="hs-identifier hs-var">liftRn</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) () -&gt; TPRnM ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) () -&gt; TPRnM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1421"></span><span>  </span><span id="local-6989586621682854792"><span class="annot"><a href="#local-6989586621682854792"><span class="hs-identifier hs-var">data_kinds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; RnM Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.DataKinds</span></span><span>
</span><span id="line-1422"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682854792"><span class="hs-identifier hs-type">data_kinds</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1423"></span><span>    </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnDataKindsError"><span class="hs-identifier hs-type">TcRnDataKindsError</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-type">TypeLevel</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><a href="#local-6989586621682854791"><span class="hs-identifier hs-type">thing</span></a></span><span>
</span><span id="line-1424"></span><span>
</span><span id="line-1425"></span><span class="hs-comment">{- Note [Locally bound names in type patterns]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Type patterns can bind local names using forall. Compare the following examples:
  f (Proxy @(Either a b)) = ...
  g (Proxy @(forall a . Either a b)) = ...

In `f` both `a` and `b` are bound by the pattern and scope over the RHS of f.
In `g` only `b` is bound by the pattern, whereas `a` is locally bound in the pattern
and does not scope over the RHS of `g`.

We track locally bound names in the `OccSet` in `TPRnM` monad, and use it to
decide whether occurrences of type variables are usages or bindings.

The check is done in `rn_ty_pat_var`

Note [Implicit and explicit type variable binders]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Type patterns are renamed differently from ordinary types.
  * Types are renamed by `rnHsType` where all type variable occurrences are considered usages
  * Type patterns are renamed by `rnHsTyPat` where some type variable occurrences are usages
    and other are bindings

Here is an example:
  {-# LANGUAGE ScopedTypeVariables #-}
  f :: forall b. Proxy _ -&gt; ...
  f (Proxy @(x :: (a, b))) = ...

In the (x :: (a,b)) type pattern
  * `x` is a type variable explicitly bound by type pattern
  * `a` is a type variable implicitly bound in a pattern signature
  * `b` is a usage of type variable bound by the outer forall

This classification is clear to us in `rnHsTyPat`, but it is also useful in later passes, such
as `collectPatBinders` and `tcHsTyPat`, so we store it in the extension field of `HsTyPat`, namely
`HsTyPatRn`.

To collect lists of those variables efficiently we use `HsTyPatRnBuilder` which is exactly like
`HsTyPatRn`, but uses Bags.

Note [Left-to-right scoping of type patterns]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In term-level patterns, we use continuation passing to implement left-to-right
scoping, see Note [CpsRn monad]. Left-to-right scoping manifests itself when
e.g. view patterns are involved:

  f (x, g x -&gt; Just y) = ...

Here the first occurrence of `x` is a binder, and the second occurrence is a
use of `x` in a view pattern. This example does not work if we swap the
components of the tuple:

  f (g x -&gt; Just y, x) = ...
  --  ^^^
  -- Variable not in scope: x

In type patterns there are no view patterns, but there is a different feature
that is served well by left-to-right scoping: kind annotations. Compare:

  f (Proxy @(T k (a :: k))) = ...
  g (Proxy @(T (a :: k) k)) = ...

In `f`, the first occurrence of `k` is an explicit binder,
  and the second occurrence is a usage. Simple.
In `g`, the first occurrence of `k` is an implicit binder,
  and then the second occurrence is an explicit binder that shadows it.

So we get two different results after renaming:

  f (Proxy @(T k1 (a :: k1))) = ...
  g (Proxy @(T (a :: k1) k2)) = ...

This makes GHC accept the first example but rejects the second example with an
error about duplicate binders.

One could argue that we don't want order-sensitivity here. Historically, we
used a different principle when renaming types: collect all free variables,
bind them on the outside, and then rename all occurrences as usages.
This approach does not scale to multiple patterns. Consider:

  f' (MkP @k @(a :: k)) = ...
  g' (MkP @(a :: k) @k) = ...

Here a difference in behavior is inevitable, as we rename type patterns
one at a time. Could we perhaps concatenate the free variables from all
type patterns in a ConPat? But then we still get the same problem one level up,
when we have multiple patterns in a function LHS

  f'' (Proxy @k) (Proxy @(a :: k)) = ...
  g'' (Proxy @(a :: k)) (Proxy @k) = ...

And if we tried to avoid order sensitivity at this level, then we'd still be left
with lambdas:

  f''' (Proxy @k)        = \(Proxy @(a :: k)) -&gt; ...
  g''' (Proxy @(a :: k)) = \(Proxy @k)        -&gt; ...


So we have at least three options where we could do free variable extraction:
HsConPatTyArg, ConPat, or a Match (used to represent a function LHS). And none
of those would be general enough. Rather than make an arbitrary choice, we
embrace left-to-right scoping in types and implement it with CPS, just like
it's done for view patterns in terms.
-}</span><span>
</span><span id="line-1528"></span></pre></body></html>